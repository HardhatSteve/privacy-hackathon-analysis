var fc=Object.defineProperty;var lc=(n,t,e)=>t in n?fc(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var oe=(n,t,e)=>lc(n,typeof t!="symbol"?t+"":t,e);var De=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function es(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var dt={},Kn={};Kn.byteLength=pc;Kn.toByteArray=mc;Kn.fromByteArray=bc;var $e=[],Te=[],hc=typeof Uint8Array<"u"?Uint8Array:Array,Ei="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Rr=0,dc=Ei.length;Rr<dc;++Rr)$e[Rr]=Ei[Rr],Te[Ei.charCodeAt(Rr)]=Rr;Te[45]=62;Te[95]=63;function Eo(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function pc(n){var t=Eo(n),e=t[0],r=t[1];return(e+r)*3/4-r}function gc(n,t,e){return(t+e)*3/4-e}function mc(n){var t,e=Eo(n),r=e[0],s=e[1],i=new hc(gc(n,r,s)),o=0,c=s>0?r-4:r,d;for(d=0;d<c;d+=4)t=Te[n.charCodeAt(d)]<<18|Te[n.charCodeAt(d+1)]<<12|Te[n.charCodeAt(d+2)]<<6|Te[n.charCodeAt(d+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Te[n.charCodeAt(d)]<<2|Te[n.charCodeAt(d+1)]>>4,i[o++]=t&255),s===1&&(t=Te[n.charCodeAt(d)]<<10|Te[n.charCodeAt(d+1)]<<4|Te[n.charCodeAt(d+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function yc(n){return $e[n>>18&63]+$e[n>>12&63]+$e[n>>6&63]+$e[n&63]}function wc(n,t,e){for(var r,s=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),s.push(yc(r));return s.join("")}function bc(n){for(var t,e=n.length,r=e%3,s=[],i=16383,o=0,c=e-r;o<c;o+=i)s.push(wc(n,o,o+i>c?c:o+i));return r===1?(t=n[e-1],s.push($e[t>>2]+$e[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],s.push($e[t>>10]+$e[t>>4&63]+$e[t<<2&63]+"=")),s.join("")}var rs={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */rs.read=function(n,t,e,r,s){var i,o,c=s*8-r-1,d=(1<<c)-1,b=d>>1,_=-7,I=e?s-1:0,k=e?-1:1,S=n[t+I];for(I+=k,i=S&(1<<-_)-1,S>>=-_,_+=c;_>0;i=i*256+n[t+I],I+=k,_-=8);for(o=i&(1<<-_)-1,i>>=-_,_+=r;_>0;o=o*256+n[t+I],I+=k,_-=8);if(i===0)i=1-b;else{if(i===d)return o?NaN:(S?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-b}return(S?-1:1)*o*Math.pow(2,i-r)};rs.write=function(n,t,e,r,s,i){var o,c,d,b=i*8-s-1,_=(1<<b)-1,I=_>>1,k=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=r?0:i-1,A=r?1:-1,C=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=_):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+I>=1?t+=k/d:t+=k*Math.pow(2,1-I),t*d>=2&&(o++,d/=2),o+I>=_?(c=0,o=_):o+I>=1?(c=(t*d-1)*Math.pow(2,s),o=o+I):(c=t*Math.pow(2,I-1)*Math.pow(2,s),o=0));s>=8;n[e+S]=c&255,S+=A,c/=256,s-=8);for(o=o<<s|c,b+=s;b>0;n[e+S]=o&255,S+=A,o/=256,b-=8);n[e+S-A]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=Kn,e=rs,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=D,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const g=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(g,u),g.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(g){if(g>s)throw new RangeError('The value "'+g+'" is invalid for option "size"');const u=new Uint8Array(g);return Object.setPrototypeOf(u,c.prototype),u}function c(g,u,l){if(typeof g=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return I(g)}return d(g,u,l)}c.poolSize=8192;function d(g,u,l){if(typeof g=="string")return k(g,u);if(ArrayBuffer.isView(g))return A(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(Ae(g,ArrayBuffer)||g&&Ae(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ae(g,SharedArrayBuffer)||g&&Ae(g.buffer,SharedArrayBuffer)))return C(g,u,l);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const v=g.valueOf&&g.valueOf();if(v!=null&&v!==g)return c.from(v,u,l);const R=L(g);if(R)return R;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return c.from(g[Symbol.toPrimitive]("string"),u,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}c.from=function(g,u,l){return d(g,u,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function b(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function _(g,u,l){return b(g),g<=0?o(g):u!==void 0?typeof l=="string"?o(g).fill(u,l):o(g).fill(u):o(g)}c.alloc=function(g,u,l){return _(g,u,l)};function I(g){return b(g),o(g<0?0:F(g)|0)}c.allocUnsafe=function(g){return I(g)},c.allocUnsafeSlow=function(g){return I(g)};function k(g,u){if((typeof u!="string"||u==="")&&(u="utf8"),!c.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const l=O(g,u)|0;let v=o(l);const R=v.write(g,u);return R!==l&&(v=v.slice(0,R)),v}function S(g){const u=g.length<0?0:F(g.length)|0,l=o(u);for(let v=0;v<u;v+=1)l[v]=g[v]&255;return l}function A(g){if(Ae(g,Uint8Array)){const u=new Uint8Array(g);return C(u.buffer,u.byteOffset,u.byteLength)}return S(g)}function C(g,u,l){if(u<0||g.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<u+(l||0))throw new RangeError('"length" is outside of buffer bounds');let v;return u===void 0&&l===void 0?v=new Uint8Array(g):l===void 0?v=new Uint8Array(g,u):v=new Uint8Array(g,u,l),Object.setPrototypeOf(v,c.prototype),v}function L(g){if(c.isBuffer(g)){const u=F(g.length)|0,l=o(u);return l.length===0||g.copy(l,0,0,u),l}if(g.length!==void 0)return typeof g.length!="number"||Mt(g.length)?o(0):S(g);if(g.type==="Buffer"&&Array.isArray(g.data))return S(g.data)}function F(g){if(g>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return g|0}function D(g){return+g!=g&&(g=0),c.alloc(+g)}c.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==c.prototype},c.compare=function(u,l){if(Ae(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),Ae(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(u)||!c.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===l)return 0;let v=u.length,R=l.length;for(let U=0,P=Math.min(v,R);U<P;++U)if(u[U]!==l[U]){v=u[U],R=l[U];break}return v<R?-1:R<v?1:0},c.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(u,l){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return c.alloc(0);let v;if(l===void 0)for(l=0,v=0;v<u.length;++v)l+=u[v].length;const R=c.allocUnsafe(l);let U=0;for(v=0;v<u.length;++v){let P=u[v];if(Ae(P,Uint8Array))U+P.length>R.length?(c.isBuffer(P)||(P=c.from(P)),P.copy(R,U)):Uint8Array.prototype.set.call(R,P,U);else if(c.isBuffer(P))P.copy(R,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=P.length}return R};function O(g,u){if(c.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||Ae(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const l=g.length,v=arguments.length>2&&arguments[2]===!0;if(!v&&l===0)return 0;let R=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return It(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Ct(g).length;default:if(R)return v?-1:It(g).length;u=(""+u).toLowerCase(),R=!0}}c.byteLength=O;function K(g,u,l){let v=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,u>>>=0,l<=u))return"";for(g||(g="utf8");;)switch(g){case"hex":return B(this,u,l);case"utf8":case"utf-8":return a(this,u,l);case"ascii":return w(this,u,l);case"latin1":case"binary":return x(this,u,l);case"base64":return m(this,u,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,u,l);default:if(v)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),v=!0}}c.prototype._isBuffer=!0;function Z(g,u,l){const v=g[u];g[u]=g[l],g[l]=v}c.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<u;l+=2)Z(this,l,l+1);return this},c.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<u;l+=4)Z(this,l,l+3),Z(this,l+1,l+2);return this},c.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<u;l+=8)Z(this,l,l+7),Z(this,l+1,l+6),Z(this,l+2,l+5),Z(this,l+3,l+4);return this},c.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?a(this,0,u):K.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(u){if(!c.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:c.compare(this,u)===0},c.prototype.inspect=function(){let u="";const l=n.INSPECT_MAX_BYTES;return u=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(u+=" ... "),"<Buffer "+u+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(u,l,v,R,U){if(Ae(u,Uint8Array)&&(u=c.from(u,u.offset,u.byteLength)),!c.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(l===void 0&&(l=0),v===void 0&&(v=u?u.length:0),R===void 0&&(R=0),U===void 0&&(U=this.length),l<0||v>u.length||R<0||U>this.length)throw new RangeError("out of range index");if(R>=U&&l>=v)return 0;if(R>=U)return-1;if(l>=v)return 1;if(l>>>=0,v>>>=0,R>>>=0,U>>>=0,this===u)return 0;let P=U-R,gt=v-l;const ht=Math.min(P,gt),lt=this.slice(R,U),kt=u.slice(l,v);for(let ut=0;ut<ht;++ut)if(lt[ut]!==kt[ut]){P=lt[ut],gt=kt[ut];break}return P<gt?-1:gt<P?1:0};function tt(g,u,l,v,R){if(g.length===0)return-1;if(typeof l=="string"?(v=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Mt(l)&&(l=R?0:g.length-1),l<0&&(l=g.length+l),l>=g.length){if(R)return-1;l=g.length-1}else if(l<0)if(R)l=0;else return-1;if(typeof u=="string"&&(u=c.from(u,v)),c.isBuffer(u))return u.length===0?-1:rt(g,u,l,v,R);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?R?Uint8Array.prototype.indexOf.call(g,u,l):Uint8Array.prototype.lastIndexOf.call(g,u,l):rt(g,[u],l,v,R);throw new TypeError("val must be string, number or Buffer")}function rt(g,u,l,v,R){let U=1,P=g.length,gt=u.length;if(v!==void 0&&(v=String(v).toLowerCase(),v==="ucs2"||v==="ucs-2"||v==="utf16le"||v==="utf-16le")){if(g.length<2||u.length<2)return-1;U=2,P/=2,gt/=2,l/=2}function ht(kt,ut){return U===1?kt[ut]:kt.readUInt16BE(ut*U)}let lt;if(R){let kt=-1;for(lt=l;lt<P;lt++)if(ht(g,lt)===ht(u,kt===-1?0:lt-kt)){if(kt===-1&&(kt=lt),lt-kt+1===gt)return kt*U}else kt!==-1&&(lt-=lt-kt),kt=-1}else for(l+gt>P&&(l=P-gt),lt=l;lt>=0;lt--){let kt=!0;for(let ut=0;ut<gt;ut++)if(ht(g,lt+ut)!==ht(u,ut)){kt=!1;break}if(kt)return lt}return-1}c.prototype.includes=function(u,l,v){return this.indexOf(u,l,v)!==-1},c.prototype.indexOf=function(u,l,v){return tt(this,u,l,v,!0)},c.prototype.lastIndexOf=function(u,l,v){return tt(this,u,l,v,!1)};function ot(g,u,l,v){l=Number(l)||0;const R=g.length-l;v?(v=Number(v),v>R&&(v=R)):v=R;const U=u.length;v>U/2&&(v=U/2);let P;for(P=0;P<v;++P){const gt=parseInt(u.substr(P*2,2),16);if(Mt(gt))return P;g[l+P]=gt}return P}function z(g,u,l,v){return At(It(u,g.length-l),g,l,v)}function et(g,u,l,v){return At(Nt(u),g,l,v)}function Y(g,u,l,v){return At(Ct(u),g,l,v)}function Q(g,u,l,v){return At(wn(u,g.length-l),g,l,v)}c.prototype.write=function(u,l,v,R){if(l===void 0)R="utf8",v=this.length,l=0;else if(v===void 0&&typeof l=="string")R=l,v=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(v)?(v=v>>>0,R===void 0&&(R="utf8")):(R=v,v=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const U=this.length-l;if((v===void 0||v>U)&&(v=U),u.length>0&&(v<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");R||(R="utf8");let P=!1;for(;;)switch(R){case"hex":return ot(this,u,l,v);case"utf8":case"utf-8":return z(this,u,l,v);case"ascii":case"latin1":case"binary":return et(this,u,l,v);case"base64":return Y(this,u,l,v);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Q(this,u,l,v);default:if(P)throw new TypeError("Unknown encoding: "+R);R=(""+R).toLowerCase(),P=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function m(g,u,l){return u===0&&l===g.length?t.fromByteArray(g):t.fromByteArray(g.slice(u,l))}function a(g,u,l){l=Math.min(g.length,l);const v=[];let R=u;for(;R<l;){const U=g[R];let P=null,gt=U>239?4:U>223?3:U>191?2:1;if(R+gt<=l){let ht,lt,kt,ut;switch(gt){case 1:U<128&&(P=U);break;case 2:ht=g[R+1],(ht&192)===128&&(ut=(U&31)<<6|ht&63,ut>127&&(P=ut));break;case 3:ht=g[R+1],lt=g[R+2],(ht&192)===128&&(lt&192)===128&&(ut=(U&15)<<12|(ht&63)<<6|lt&63,ut>2047&&(ut<55296||ut>57343)&&(P=ut));break;case 4:ht=g[R+1],lt=g[R+2],kt=g[R+3],(ht&192)===128&&(lt&192)===128&&(kt&192)===128&&(ut=(U&15)<<18|(ht&63)<<12|(lt&63)<<6|kt&63,ut>65535&&ut<1114112&&(P=ut))}}P===null?(P=65533,gt=1):P>65535&&(P-=65536,v.push(P>>>10&1023|55296),P=56320|P&1023),v.push(P),R+=gt}return p(v)}const h=4096;function p(g){const u=g.length;if(u<=h)return String.fromCharCode.apply(String,g);let l="",v=0;for(;v<u;)l+=String.fromCharCode.apply(String,g.slice(v,v+=h));return l}function w(g,u,l){let v="";l=Math.min(g.length,l);for(let R=u;R<l;++R)v+=String.fromCharCode(g[R]&127);return v}function x(g,u,l){let v="";l=Math.min(g.length,l);for(let R=u;R<l;++R)v+=String.fromCharCode(g[R]);return v}function B(g,u,l){const v=g.length;(!u||u<0)&&(u=0),(!l||l<0||l>v)&&(l=v);let R="";for(let U=u;U<l;++U)R+=Ot[g[U]];return R}function M(g,u,l){const v=g.slice(u,l);let R="";for(let U=0;U<v.length-1;U+=2)R+=String.fromCharCode(v[U]+v[U+1]*256);return R}c.prototype.slice=function(u,l){const v=this.length;u=~~u,l=l===void 0?v:~~l,u<0?(u+=v,u<0&&(u=0)):u>v&&(u=v),l<0?(l+=v,l<0&&(l=0)):l>v&&(l=v),l<u&&(l=u);const R=this.subarray(u,l);return Object.setPrototypeOf(R,c.prototype),R};function y(g,u,l){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+u>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(u,l,v){u=u>>>0,l=l>>>0,v||y(u,l,this.length);let R=this[u],U=1,P=0;for(;++P<l&&(U*=256);)R+=this[u+P]*U;return R},c.prototype.readUintBE=c.prototype.readUIntBE=function(u,l,v){u=u>>>0,l=l>>>0,v||y(u,l,this.length);let R=this[u+--l],U=1;for(;l>0&&(U*=256);)R+=this[u+--l]*U;return R},c.prototype.readUint8=c.prototype.readUInt8=function(u,l){return u=u>>>0,l||y(u,1,this.length),this[u]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(u,l){return u=u>>>0,l||y(u,2,this.length),this[u]|this[u+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(u,l){return u=u>>>0,l||y(u,2,this.length),this[u]<<8|this[u+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(u,l){return u=u>>>0,l||y(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(u,l){return u=u>>>0,l||y(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},c.prototype.readBigUInt64LE=Oe(function(u){u=u>>>0,Ue(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&Bt(u,this.length-8);const R=l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,U=this[++u]+this[++u]*2**8+this[++u]*2**16+v*2**24;return BigInt(R)+(BigInt(U)<<BigInt(32))}),c.prototype.readBigUInt64BE=Oe(function(u){u=u>>>0,Ue(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&Bt(u,this.length-8);const R=l*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],U=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v;return(BigInt(R)<<BigInt(32))+BigInt(U)}),c.prototype.readIntLE=function(u,l,v){u=u>>>0,l=l>>>0,v||y(u,l,this.length);let R=this[u],U=1,P=0;for(;++P<l&&(U*=256);)R+=this[u+P]*U;return U*=128,R>=U&&(R-=Math.pow(2,8*l)),R},c.prototype.readIntBE=function(u,l,v){u=u>>>0,l=l>>>0,v||y(u,l,this.length);let R=l,U=1,P=this[u+--R];for(;R>0&&(U*=256);)P+=this[u+--R]*U;return U*=128,P>=U&&(P-=Math.pow(2,8*l)),P},c.prototype.readInt8=function(u,l){return u=u>>>0,l||y(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},c.prototype.readInt16LE=function(u,l){u=u>>>0,l||y(u,2,this.length);const v=this[u]|this[u+1]<<8;return v&32768?v|4294901760:v},c.prototype.readInt16BE=function(u,l){u=u>>>0,l||y(u,2,this.length);const v=this[u+1]|this[u]<<8;return v&32768?v|4294901760:v},c.prototype.readInt32LE=function(u,l){return u=u>>>0,l||y(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},c.prototype.readInt32BE=function(u,l){return u=u>>>0,l||y(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},c.prototype.readBigInt64LE=Oe(function(u){u=u>>>0,Ue(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&Bt(u,this.length-8);const R=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(v<<24);return(BigInt(R)<<BigInt(32))+BigInt(l+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),c.prototype.readBigInt64BE=Oe(function(u){u=u>>>0,Ue(u,"offset");const l=this[u],v=this[u+7];(l===void 0||v===void 0)&&Bt(u,this.length-8);const R=(l<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(R)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+v)}),c.prototype.readFloatLE=function(u,l){return u=u>>>0,l||y(u,4,this.length),e.read(this,u,!0,23,4)},c.prototype.readFloatBE=function(u,l){return u=u>>>0,l||y(u,4,this.length),e.read(this,u,!1,23,4)},c.prototype.readDoubleLE=function(u,l){return u=u>>>0,l||y(u,8,this.length),e.read(this,u,!0,52,8)},c.prototype.readDoubleBE=function(u,l){return u=u>>>0,l||y(u,8,this.length),e.read(this,u,!1,52,8)};function f(g,u,l,v,R,U){if(!c.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>R||u<U)throw new RangeError('"value" argument is out of bounds');if(l+v>g.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(u,l,v,R){if(u=+u,l=l>>>0,v=v>>>0,!R){const gt=Math.pow(2,8*v)-1;f(this,u,l,v,gt,0)}let U=1,P=0;for(this[l]=u&255;++P<v&&(U*=256);)this[l+P]=u/U&255;return l+v},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(u,l,v,R){if(u=+u,l=l>>>0,v=v>>>0,!R){const gt=Math.pow(2,8*v)-1;f(this,u,l,v,gt,0)}let U=v-1,P=1;for(this[l+U]=u&255;--U>=0&&(P*=256);)this[l+U]=u/P&255;return l+v},c.prototype.writeUint8=c.prototype.writeUInt8=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,1,255,0),this[l]=u&255,l+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,65535,0),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,65535,0),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,4294967295,0),this[l+3]=u>>>24,this[l+2]=u>>>16,this[l+1]=u>>>8,this[l]=u&255,l+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,4294967295,0),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4};function E(g,u,l,v,R){St(u,v,R,g,l,7);let U=Number(u&BigInt(4294967295));g[l++]=U,U=U>>8,g[l++]=U,U=U>>8,g[l++]=U,U=U>>8,g[l++]=U;let P=Number(u>>BigInt(32)&BigInt(4294967295));return g[l++]=P,P=P>>8,g[l++]=P,P=P>>8,g[l++]=P,P=P>>8,g[l++]=P,l}function V(g,u,l,v,R){St(u,v,R,g,l,7);let U=Number(u&BigInt(4294967295));g[l+7]=U,U=U>>8,g[l+6]=U,U=U>>8,g[l+5]=U,U=U>>8,g[l+4]=U;let P=Number(u>>BigInt(32)&BigInt(4294967295));return g[l+3]=P,P=P>>8,g[l+2]=P,P=P>>8,g[l+1]=P,P=P>>8,g[l]=P,l+8}c.prototype.writeBigUInt64LE=Oe(function(u,l=0){return E(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Oe(function(u,l=0){return V(this,u,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(u,l,v,R){if(u=+u,l=l>>>0,!R){const ht=Math.pow(2,8*v-1);f(this,u,l,v,ht-1,-ht)}let U=0,P=1,gt=0;for(this[l]=u&255;++U<v&&(P*=256);)u<0&&gt===0&&this[l+U-1]!==0&&(gt=1),this[l+U]=(u/P>>0)-gt&255;return l+v},c.prototype.writeIntBE=function(u,l,v,R){if(u=+u,l=l>>>0,!R){const ht=Math.pow(2,8*v-1);f(this,u,l,v,ht-1,-ht)}let U=v-1,P=1,gt=0;for(this[l+U]=u&255;--U>=0&&(P*=256);)u<0&&gt===0&&this[l+U+1]!==0&&(gt=1),this[l+U]=(u/P>>0)-gt&255;return l+v},c.prototype.writeInt8=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,1,127,-128),u<0&&(u=255+u+1),this[l]=u&255,l+1},c.prototype.writeInt16LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,32767,-32768),this[l]=u&255,this[l+1]=u>>>8,l+2},c.prototype.writeInt16BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,2,32767,-32768),this[l]=u>>>8,this[l+1]=u&255,l+2},c.prototype.writeInt32LE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,2147483647,-2147483648),this[l]=u&255,this[l+1]=u>>>8,this[l+2]=u>>>16,this[l+3]=u>>>24,l+4},c.prototype.writeInt32BE=function(u,l,v){return u=+u,l=l>>>0,v||f(this,u,l,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[l]=u>>>24,this[l+1]=u>>>16,this[l+2]=u>>>8,this[l+3]=u&255,l+4},c.prototype.writeBigInt64LE=Oe(function(u,l=0){return E(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Oe(function(u,l=0){return V(this,u,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function H(g,u,l,v,R,U){if(l+v>g.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function X(g,u,l,v,R){return u=+u,l=l>>>0,R||H(g,u,l,4),e.write(g,u,l,v,23,4),l+4}c.prototype.writeFloatLE=function(u,l,v){return X(this,u,l,!0,v)},c.prototype.writeFloatBE=function(u,l,v){return X(this,u,l,!1,v)};function yt(g,u,l,v,R){return u=+u,l=l>>>0,R||H(g,u,l,8),e.write(g,u,l,v,52,8),l+8}c.prototype.writeDoubleLE=function(u,l,v){return yt(this,u,l,!0,v)},c.prototype.writeDoubleBE=function(u,l,v){return yt(this,u,l,!1,v)},c.prototype.copy=function(u,l,v,R){if(!c.isBuffer(u))throw new TypeError("argument should be a Buffer");if(v||(v=0),!R&&R!==0&&(R=this.length),l>=u.length&&(l=u.length),l||(l=0),R>0&&R<v&&(R=v),R===v||u.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(v<0||v>=this.length)throw new RangeError("Index out of range");if(R<0)throw new RangeError("sourceEnd out of bounds");R>this.length&&(R=this.length),u.length-l<R-v&&(R=u.length-l+v);const U=R-v;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,v,R):Uint8Array.prototype.set.call(u,this.subarray(v,R),l),U},c.prototype.fill=function(u,l,v,R){if(typeof u=="string"){if(typeof l=="string"?(R=l,l=0,v=this.length):typeof v=="string"&&(R=v,v=this.length),R!==void 0&&typeof R!="string")throw new TypeError("encoding must be a string");if(typeof R=="string"&&!c.isEncoding(R))throw new TypeError("Unknown encoding: "+R);if(u.length===1){const P=u.charCodeAt(0);(R==="utf8"&&P<128||R==="latin1")&&(u=P)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(l<0||this.length<l||this.length<v)throw new RangeError("Out of range index");if(v<=l)return this;l=l>>>0,v=v===void 0?this.length:v>>>0,u||(u=0);let U;if(typeof u=="number")for(U=l;U<v;++U)this[U]=u;else{const P=c.isBuffer(u)?u:c.from(u,R),gt=P.length;if(gt===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(U=0;U<v-l;++U)this[U+l]=P[U%gt]}return this};const ft={};function ct(g,u,l){ft[g]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(R){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:R,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}ct("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ct("ERR_INVALID_ARG_TYPE",function(g,u){return`The "${g}" argument must be of type number. Received type ${typeof u}`},TypeError),ct("ERR_OUT_OF_RANGE",function(g,u,l){let v=`The value of "${g}" is out of range.`,R=l;return Number.isInteger(l)&&Math.abs(l)>2**32?R=Tt(String(l)):typeof l=="bigint"&&(R=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(R=Tt(R)),R+="n"),v+=` It must be ${u}. Received ${R}`,v},RangeError);function Tt(g){let u="",l=g.length;const v=g[0]==="-"?1:0;for(;l>=v+4;l-=3)u=`_${g.slice(l-3,l)}${u}`;return`${g.slice(0,l)}${u}`}function xt(g,u,l){Ue(u,"offset"),(g[u]===void 0||g[u+l]===void 0)&&Bt(u,g.length-(l+1))}function St(g,u,l,v,R,U){if(g>l||g<u){const P=typeof u=="bigint"?"n":"";let gt;throw u===0||u===BigInt(0)?gt=`>= 0${P} and < 2${P} ** ${(U+1)*8}${P}`:gt=`>= -(2${P} ** ${(U+1)*8-1}${P}) and < 2 ** ${(U+1)*8-1}${P}`,new ft.ERR_OUT_OF_RANGE("value",gt,g)}xt(v,R,U)}function Ue(g,u){if(typeof g!="number")throw new ft.ERR_INVALID_ARG_TYPE(u,"number",g)}function Bt(g,u,l){throw Math.floor(g)!==g?(Ue(g,l),new ft.ERR_OUT_OF_RANGE("offset","an integer",g)):u<0?new ft.ERR_BUFFER_OUT_OF_BOUNDS:new ft.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,g)}const Ft=/[^+/0-9A-Za-z-_]/g;function yn(g){if(g=g.split("=")[0],g=g.trim().replace(Ft,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function It(g,u){u=u||1/0;let l;const v=g.length;let R=null;const U=[];for(let P=0;P<v;++P){if(l=g.charCodeAt(P),l>55295&&l<57344){if(!R){if(l>56319){(u-=3)>-1&&U.push(239,191,189);continue}else if(P+1===v){(u-=3)>-1&&U.push(239,191,189);continue}R=l;continue}if(l<56320){(u-=3)>-1&&U.push(239,191,189),R=l;continue}l=(R-55296<<10|l-56320)+65536}else R&&(u-=3)>-1&&U.push(239,191,189);if(R=null,l<128){if((u-=1)<0)break;U.push(l)}else if(l<2048){if((u-=2)<0)break;U.push(l>>6|192,l&63|128)}else if(l<65536){if((u-=3)<0)break;U.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((u-=4)<0)break;U.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return U}function Nt(g){const u=[];for(let l=0;l<g.length;++l)u.push(g.charCodeAt(l)&255);return u}function wn(g,u){let l,v,R;const U=[];for(let P=0;P<g.length&&!((u-=2)<0);++P)l=g.charCodeAt(P),v=l>>8,R=l%256,U.push(R),U.push(v);return U}function Ct(g){return t.toByteArray(yn(g))}function At(g,u,l,v){let R;for(R=0;R<v&&!(R+l>=u.length||R>=g.length);++R)u[R+l]=g[R];return R}function Ae(g,u){return g instanceof u||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===u.name}function Mt(g){return g!==g}const Ot=function(){const g="0123456789abcdef",u=new Array(256);for(let l=0;l<16;++l){const v=l*16;for(let R=0;R<16;++R)u[v+R]=g[l]+g[R]}return u}();function Oe(g){return typeof BigInt>"u"?Pt:g}function Pt(){throw new Error("BigInt not supported")}})(dt);const Cr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function fn(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function qi(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function Br(n,...t){if(!fn(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function So(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");qi(n.outputLen),qi(n.blockLen)}function Mn(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function vc(n,t){Br(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function $r(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function Si(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function Ke(n,t){return n<<32-t|n>>>t}const Bo=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",xc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function br(n){if(Br(n),Bo)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=xc[n[e]];return t}const Xe={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ds(n){if(n>=Xe._0&&n<=Xe._9)return n-Xe._0;if(n>=Xe.A&&n<=Xe.F)return n-(Xe.A-10);if(n>=Xe.a&&n<=Xe.f)return n-(Xe.a-10)}function Rn(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(Bo)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Ds(n.charCodeAt(i)),c=Ds(n.charCodeAt(i+1));if(o===void 0||c===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[s]=o*16+c}return r}function Ec(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function ns(n){return typeof n=="string"&&(n=Ec(n)),Br(n),n}function He(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];Br(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class _o{}function Ao(n){const t=r=>n().update(ns(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function is(n=32){if(Cr&&typeof Cr.getRandomValues=="function")return Cr.getRandomValues(new Uint8Array(n));if(Cr&&typeof Cr.randomBytes=="function")return Uint8Array.from(Cr.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Sc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),d=r?4:0,b=r?0:4;n.setUint32(t+d,o,r),n.setUint32(t+b,c,r)}function Bc(n,t,e){return n&t^~n&e}function _c(n,t,e){return n&t^n&e^t&e}class ko extends _o{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Si(this.buffer)}update(t){Mn(this),t=ns(t),Br(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const d=Si(t);for(;s<=i-o;o+=s)this.process(d,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Mn(this),vc(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,$r(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let I=o;I<s;I++)e[I]=0;Sc(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=Si(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=d/4,_=this.get();if(b>_.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<b;I++)c.setUint32(4*I,_[I],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const or=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ge=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),bn=BigInt(2**32-1),qs=BigInt(32);function Ac(n,t=!1){return t?{h:Number(n&bn),l:Number(n>>qs&bn)}:{h:Number(n>>qs&bn)|0,l:Number(n&bn)|0}}function kc(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:c}=Ac(n[i],t);[r[i],s[i]]=[o,c]}return[r,s]}const Ks=(n,t,e)=>n>>>e,$s=(n,t,e)=>n<<32-e|t>>>e,Lr=(n,t,e)=>n>>>e|t<<32-e,Ur=(n,t,e)=>n<<32-e|t>>>e,vn=(n,t,e)=>n<<64-e|t>>>e-32,xn=(n,t,e)=>n>>>e-32|t<<64-e;function Je(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const Ic=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Mc=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,Rc=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),Cc=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,Lc=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),Uc=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,Tc=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ar=new Uint32Array(64);class Fc extends ko{constructor(t=32){super(64,t,8,!1),this.A=or[0]|0,this.B=or[1]|0,this.C=or[2]|0,this.D=or[3]|0,this.E=or[4]|0,this.F=or[5]|0,this.G=or[6]|0,this.H=or[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:c,H:d}=this;return[t,e,r,s,i,o,c,d]}set(t,e,r,s,i,o,c,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=d|0}process(t,e){for(let I=0;I<16;I++,e+=4)ar[I]=t.getUint32(e,!1);for(let I=16;I<64;I++){const k=ar[I-15],S=ar[I-2],A=Ke(k,7)^Ke(k,18)^k>>>3,C=Ke(S,17)^Ke(S,19)^S>>>10;ar[I]=C+ar[I-7]+A+ar[I-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:d,G:b,H:_}=this;for(let I=0;I<64;I++){const k=Ke(c,6)^Ke(c,11)^Ke(c,25),S=_+k+Bc(c,d,b)+Tc[I]+ar[I]|0,C=(Ke(r,2)^Ke(r,13)^Ke(r,22))+_c(r,s,i)|0;_=b,b=d,d=c,c=o+S|0,o=i,i=s,s=r,r=S+C|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,d=d+this.F|0,b=b+this.G|0,_=_+this.H|0,this.set(r,s,i,o,c,d,b,_)}roundClean(){$r(ar)}destroy(){this.set(0,0,0,0,0,0,0,0),$r(this.buffer)}}const Io=kc(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),Nc=Io[0],Oc=Io[1],cr=new Uint32Array(80),ur=new Uint32Array(80);class Pc extends ko{constructor(t=64){super(128,t,16,!1),this.Ah=ge[0]|0,this.Al=ge[1]|0,this.Bh=ge[2]|0,this.Bl=ge[3]|0,this.Ch=ge[4]|0,this.Cl=ge[5]|0,this.Dh=ge[6]|0,this.Dl=ge[7]|0,this.Eh=ge[8]|0,this.El=ge[9]|0,this.Fh=ge[10]|0,this.Fl=ge[11]|0,this.Gh=ge[12]|0,this.Gl=ge[13]|0,this.Hh=ge[14]|0,this.Hl=ge[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:c,Dl:d,Eh:b,El:_,Fh:I,Fl:k,Gh:S,Gl:A,Hh:C,Hl:L}=this;return[t,e,r,s,i,o,c,d,b,_,I,k,S,A,C,L]}set(t,e,r,s,i,o,c,d,b,_,I,k,S,A,C,L){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=d|0,this.Eh=b|0,this.El=_|0,this.Fh=I|0,this.Fl=k|0,this.Gh=S|0,this.Gl=A|0,this.Hh=C|0,this.Hl=L|0}process(t,e){for(let O=0;O<16;O++,e+=4)cr[O]=t.getUint32(e),ur[O]=t.getUint32(e+=4);for(let O=16;O<80;O++){const K=cr[O-15]|0,Z=ur[O-15]|0,tt=Lr(K,Z,1)^Lr(K,Z,8)^Ks(K,Z,7),rt=Ur(K,Z,1)^Ur(K,Z,8)^$s(K,Z,7),ot=cr[O-2]|0,z=ur[O-2]|0,et=Lr(ot,z,19)^vn(ot,z,61)^Ks(ot,z,6),Y=Ur(ot,z,19)^xn(ot,z,61)^$s(ot,z,6),Q=Rc(rt,Y,ur[O-7],ur[O-16]),m=Cc(Q,tt,et,cr[O-7],cr[O-16]);cr[O]=m|0,ur[O]=Q|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:c,Cl:d,Dh:b,Dl:_,Eh:I,El:k,Fh:S,Fl:A,Gh:C,Gl:L,Hh:F,Hl:D}=this;for(let O=0;O<80;O++){const K=Lr(I,k,14)^Lr(I,k,18)^vn(I,k,41),Z=Ur(I,k,14)^Ur(I,k,18)^xn(I,k,41),tt=I&S^~I&C,rt=k&A^~k&L,ot=Lc(D,Z,rt,Oc[O],ur[O]),z=Uc(ot,F,K,tt,Nc[O],cr[O]),et=ot|0,Y=Lr(r,s,28)^vn(r,s,34)^vn(r,s,39),Q=Ur(r,s,28)^xn(r,s,34)^xn(r,s,39),m=r&i^r&c^i&c,a=s&o^s&d^o&d;F=C|0,D=L|0,C=S|0,L=A|0,S=I|0,A=k|0,{h:I,l:k}=Je(b|0,_|0,z|0,et|0),b=c|0,_=d|0,c=i|0,d=o|0,i=r|0,o=s|0;const h=Ic(et,Q,a);r=Mc(h,z,Y,m),s=h|0}({h:r,l:s}=Je(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Je(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:d}=Je(this.Ch|0,this.Cl|0,c|0,d|0),{h:b,l:_}=Je(this.Dh|0,this.Dl|0,b|0,_|0),{h:I,l:k}=Je(this.Eh|0,this.El|0,I|0,k|0),{h:S,l:A}=Je(this.Fh|0,this.Fl|0,S|0,A|0),{h:C,l:L}=Je(this.Gh|0,this.Gl|0,C|0,L|0),{h:F,l:D}=Je(this.Hh|0,this.Hl|0,F|0,D|0),this.set(r,s,i,o,c,d,b,_,I,k,S,A,C,L,F,D)}roundClean(){$r(cr,ur)}destroy(){$r(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Mo=Ao(()=>new Fc),zc=Ao(()=>new Pc);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ss=BigInt(0),Ki=BigInt(1);function Er(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function Pe(n,t,e=""){const r=fn(n),s=n==null?void 0:n.length,i=t!==void 0;if(!r||i&&s!==t){const o=e&&`"${e}" `,c=i?` of length ${t}`:"",d=r?`length=${s}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+d)}return n}function En(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Ro(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?ss:BigInt("0x"+n)}function $n(n){return Ro(br(n))}function sn(n){return Br(n),Ro(br(Uint8Array.from(n).reverse()))}function os(n,t){return Rn(n.toString(16).padStart(t*2,"0"))}function Co(n,t){return os(n,t).reverse()}function Dt(n,t,e){let r;if(typeof t=="string")try{r=Rn(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(fn(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Hs(n){return Uint8Array.from(n)}const Bi=n=>typeof n=="bigint"&&ss<=n;function Dc(n,t,e){return Bi(n)&&Bi(t)&&Bi(e)&&t<=n&&n<e}function $i(n,t,e,r){if(!Dc(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Lo(n){let t;for(t=0;n>ss;n>>=Ki,t+=1);return t}const ln=n=>(Ki<<BigInt(n))-Ki;function qc(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=S=>new Uint8Array(S),s=S=>Uint8Array.of(S);let i=r(n),o=r(n),c=0;const d=()=>{i.fill(1),o.fill(0),c=0},b=(...S)=>e(o,i,...S),_=(S=r(0))=>{o=b(s(0),S),i=b(),S.length!==0&&(o=b(s(1),S),i=b())},I=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let S=0;const A=[];for(;S<t;){i=b();const C=i.slice();A.push(C),S+=i.length}return He(...A)};return(S,A)=>{d(),_(S);let C;for(;!(C=A(I()));)_();return d(),C}}function hn(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const c=n[s];if(o&&c===void 0)return;const d=typeof c;if(d!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${d}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function Cn(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _e=BigInt(0),pe=BigInt(1),mr=BigInt(2),Uo=BigInt(3),To=BigInt(4),Fo=BigInt(5),Kc=BigInt(7),No=BigInt(8),$c=BigInt(9),Oo=BigInt(16);function ae(n,t){const e=n%t;return e>=_e?e:t+e}function zt(n,t,e){let r=n;for(;t-- >_e;)r*=r,r%=e;return r}function Ws(n,t){if(n===_e)throw new Error("invert: expected non-zero number");if(t<=_e)throw new Error("invert: expected positive modulus, got "+t);let e=ae(n,t),r=t,s=_e,i=pe;for(;e!==_e;){const c=r/e,d=r%e,b=s-i*c;r=e,e=d,s=i,i=b}if(r!==pe)throw new Error("invert: does not exist");return ae(s,t)}function as(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function Po(n,t){const e=(n.ORDER+pe)/To,r=n.pow(t,e);return as(n,r,t),r}function Hc(n,t){const e=(n.ORDER-Fo)/No,r=n.mul(t,mr),s=n.pow(r,e),i=n.mul(t,s),o=n.mul(n.mul(i,mr),s),c=n.mul(i,n.sub(o,n.ONE));return as(n,c,t),c}function Wc(n){const t=_r(n),e=zo(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),o=(n+Kc)/Oo;return(c,d)=>{let b=c.pow(d,o),_=c.mul(b,r);const I=c.mul(b,s),k=c.mul(b,i),S=c.eql(c.sqr(_),d),A=c.eql(c.sqr(I),d);b=c.cmov(b,_,S),_=c.cmov(k,I,A);const C=c.eql(c.sqr(_),d),L=c.cmov(b,_,C);return as(c,L,d),L}}function zo(n){if(n<Uo)throw new Error("sqrt is not defined for small field");let t=n-pe,e=0;for(;t%mr===_e;)t/=mr,e++;let r=mr;const s=_r(n);for(;Vs(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Po;let i=s.pow(r,t);const o=(t+pe)/mr;return function(d,b){if(d.is0(b))return b;if(Vs(d,b)!==1)throw new Error("Cannot find square root");let _=e,I=d.mul(d.ONE,i),k=d.pow(b,t),S=d.pow(b,o);for(;!d.eql(k,d.ONE);){if(d.is0(k))return d.ZERO;let A=1,C=d.sqr(k);for(;!d.eql(C,d.ONE);)if(A++,C=d.sqr(C),A===_)throw new Error("Cannot find square root");const L=pe<<BigInt(_-A-1),F=d.pow(I,L);_=A,I=d.sqr(F),k=d.mul(k,I),S=d.mul(S,F)}return S}}function Vc(n){return n%To===Uo?Po:n%No===Fo?Hc:n%Oo===$c?Wc(n):zo(n)}const Gc=(n,t)=>(ae(n,t)&pe)===pe,jc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Zc(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=jc.reduce((r,s)=>(r[s]="function",r),t);return hn(n,e),n}function Yc(n,t,e){if(e<_e)throw new Error("invalid exponent, negatives unsupported");if(e===_e)return n.ONE;if(e===pe)return t;let r=n.ONE,s=t;for(;e>_e;)e&pe&&(r=n.mul(r,s)),s=n.sqr(s),e>>=pe;return r}function Do(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((o,c,d)=>n.is0(c)?o:(r[d]=o,n.mul(o,c)),n.ONE),i=n.inv(s);return t.reduceRight((o,c,d)=>n.is0(c)?o:(r[d]=n.mul(o,r[d]),n.mul(o,c)),i),r}function Vs(n,t){const e=(n.ORDER-pe)/mr,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function qo(n,t){t!==void 0&&qi(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function _r(n,t,e=!1,r={}){if(n<=_e)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,o=!1,c;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const k=t;k.BITS&&(s=k.BITS),k.sqrt&&(i=k.sqrt),typeof k.isLE=="boolean"&&(e=k.isLE),typeof k.modFromBytes=="boolean"&&(o=k.modFromBytes),c=k.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:d,nByteLength:b}=qo(n,s);if(b>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let _;const I=Object.freeze({ORDER:n,isLE:e,BITS:d,BYTES:b,MASK:ln(d),ZERO:_e,ONE:pe,allowedLengths:c,create:k=>ae(k,n),isValid:k=>{if(typeof k!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof k);return _e<=k&&k<n},is0:k=>k===_e,isValidNot0:k=>!I.is0(k)&&I.isValid(k),isOdd:k=>(k&pe)===pe,neg:k=>ae(-k,n),eql:(k,S)=>k===S,sqr:k=>ae(k*k,n),add:(k,S)=>ae(k+S,n),sub:(k,S)=>ae(k-S,n),mul:(k,S)=>ae(k*S,n),pow:(k,S)=>Yc(I,k,S),div:(k,S)=>ae(k*Ws(S,n),n),sqrN:k=>k*k,addN:(k,S)=>k+S,subN:(k,S)=>k-S,mulN:(k,S)=>k*S,inv:k=>Ws(k,n),sqrt:i||(k=>(_||(_=Vc(n)),_(I,k))),toBytes:k=>e?Co(k,b):os(k,b),fromBytes:(k,S=!0)=>{if(c){if(!c.includes(k.length)||k.length>b)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+k.length);const C=new Uint8Array(b);C.set(k,e?0:C.length-k.length),k=C}if(k.length!==b)throw new Error("Field.fromBytes: expected "+b+" bytes, got "+k.length);let A=e?sn(k):$n(k);if(o&&(A=ae(A,n)),!S&&!I.isValid(A))throw new Error("invalid field element: outside of range 0..ORDER");return A},invertBatch:k=>Do(I,k),cmov:(k,S,A)=>A?S:k});return Object.freeze(I)}function Ko(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function $o(n){const t=Ko(n);return t+Math.ceil(t/2)}function Xc(n,t,e=!1){const r=n.length,s=Ko(t),i=$o(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?sn(n):$n(n),c=ae(o,t-pe)+pe;return e?Co(c,s):os(c,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hr=BigInt(0),yr=BigInt(1);function Ln(n,t){const e=t.negate();return n?e:t}function wr(n,t){const e=Do(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function Ho(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function _i(n,t){Ho(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=ln(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Gs(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let c=Number(n&s),d=n>>o;c>r&&(c-=i,d+=yr);const b=t*r,_=b+Math.abs(c)-1,I=c===0,k=c<0,S=t%2!==0;return{nextN:d,offset:_,isZero:I,isNeg:k,isNegF:S,offsetF:b}}function Jc(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function Qc(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const Ai=new WeakMap,Wo=new WeakMap;function ki(n){return Wo.get(n)||1}function js(n){if(n!==Hr)throw new Error("invalid wNAF")}class Vo{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>Hr;)e&yr&&(r=r.add(s)),s=s.double(),e>>=yr;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=_i(e,this.bits),i=[];let o=t,c=o;for(let d=0;d<r;d++){c=o,i.push(c);for(let b=1;b<s;b++)c=c.add(o),i.push(c);o=c.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=_i(t,this.bits);for(let c=0;c<o.windows;c++){const{nextN:d,offset:b,isZero:_,isNeg:I,isNegF:k,offsetF:S}=Gs(r,c,o);r=d,_?i=i.add(Ln(k,e[S])):s=s.add(Ln(I,e[b]))}return js(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=_i(t,this.bits);for(let o=0;o<i.windows&&r!==Hr;o++){const{nextN:c,offset:d,isZero:b,isNeg:_}=Gs(r,o,i);if(r=c,!b){const I=e[d];s=s.add(_?I.negate():I)}}return js(r),s}getPrecomputes(t,e,r){let s=Ai.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),Ai.set(e,s))),s}cached(t,e,r){const s=ki(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=ki(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){Ho(e,this.bits),Wo.set(t,e),Ai.delete(t)}hasCache(t){return ki(t)!==1}}function tu(n,t,e,r){let s=t,i=n.ZERO,o=n.ZERO;for(;e>Hr||r>Hr;)e&yr&&(i=i.add(s)),r&yr&&(o=o.add(s)),s=s.double(),e>>=yr,r>>=yr;return{p1:i,p2:o}}function Go(n,t,e,r){Jc(e,n),Qc(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=Lo(BigInt(s));let d=1;c>12?d=c-3:c>4?d=c-2:c>0&&(d=2);const b=ln(d),_=new Array(Number(b)+1).fill(o),I=Math.floor((t.BITS-1)/d)*d;let k=o;for(let S=I;S>=0;S-=d){_.fill(o);for(let C=0;C<i;C++){const L=r[C],F=Number(L>>BigInt(S)&b);_[F]=_[F].add(e[C])}let A=o;for(let C=_.length-1,L=o;C>0;C--)L=L.add(_[C]),A=A.add(L);if(k=k.add(A),S!==0)for(let C=0;C<d;C++)k=k.double()}return k}function Zs(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Zc(t),t}else return _r(n,{isLE:e})}function jo(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const d of["p","n","h"]){const b=t[d];if(!(typeof b=="bigint"&&b>Hr))throw new Error(`CURVE.${d} must be positive bigint`)}const s=Zs(t.p,e.Fp,r),i=Zs(t.n,e.Fn,r),c=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const d of c)if(!s.isValid(t[d]))throw new Error(`CURVE.${d} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fr=BigInt(0),ce=BigInt(1),Ii=BigInt(2),eu=BigInt(8);function ru(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),o=n.add(n.mul(t.a,s),i),c=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(o,c)}function nu(n,t={}){const e=jo("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o}=i;hn(t,{},{uvRatio:"function"});const c=Ii<<BigInt(s.BYTES*8)-ce,d=L=>r.create(L),b=t.uvRatio||((L,F)=>{try{return{isValid:!0,value:r.sqrt(r.div(L,F))}}catch{return{isValid:!1,value:fr}}});if(!ru(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function _(L,F,D=!1){const O=D?ce:fr;return $i("coordinate "+L,F,O,c),F}function I(L){if(!(L instanceof A))throw new Error("ExtendedPoint expected")}const k=Cn((L,F)=>{const{X:D,Y:O,Z:K}=L,Z=L.is0();F==null&&(F=Z?eu:r.inv(K));const tt=d(D*F),rt=d(O*F),ot=r.mul(K,F);if(Z)return{x:fr,y:ce};if(ot!==ce)throw new Error("invZ was invalid");return{x:tt,y:rt}}),S=Cn(L=>{const{a:F,d:D}=i;if(L.is0())throw new Error("bad point: ZERO");const{X:O,Y:K,Z,T:tt}=L,rt=d(O*O),ot=d(K*K),z=d(Z*Z),et=d(z*z),Y=d(rt*F),Q=d(z*d(Y+ot)),m=d(et+d(D*d(rt*ot)));if(Q!==m)throw new Error("bad point: equation left != right (1)");const a=d(O*K),h=d(Z*tt);if(a!==h)throw new Error("bad point: equation left != right (2)");return!0});class A{constructor(F,D,O,K){this.X=_("x",F),this.Y=_("y",D),this.Z=_("z",O,!0),this.T=_("t",K),Object.freeze(this)}static CURVE(){return i}static fromAffine(F){if(F instanceof A)throw new Error("extended point not allowed");const{x:D,y:O}=F||{};return _("x",D),_("y",O),new A(D,O,ce,d(D*O))}static fromBytes(F,D=!1){const O=r.BYTES,{a:K,d:Z}=i;F=Hs(Pe(F,O,"point")),Er(D,"zip215");const tt=Hs(F),rt=F[O-1];tt[O-1]=rt&-129;const ot=sn(tt),z=D?c:r.ORDER;$i("point.y",ot,fr,z);const et=d(ot*ot),Y=d(et-ce),Q=d(Z*et-K);let{isValid:m,value:a}=b(Y,Q);if(!m)throw new Error("bad point: invalid y coordinate");const h=(a&ce)===ce,p=(rt&128)!==0;if(!D&&a===fr&&p)throw new Error("bad point: x=0 and x_0=1");return p!==h&&(a=d(-a)),A.fromAffine({x:a,y:ot})}static fromHex(F,D=!1){return A.fromBytes(Dt("point",F),D)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(F=8,D=!0){return C.createCache(this,F),D||this.multiply(Ii),this}assertValidity(){S(this)}equals(F){I(F);const{X:D,Y:O,Z:K}=this,{X:Z,Y:tt,Z:rt}=F,ot=d(D*rt),z=d(Z*K),et=d(O*rt),Y=d(tt*K);return ot===z&&et===Y}is0(){return this.equals(A.ZERO)}negate(){return new A(d(-this.X),this.Y,this.Z,d(-this.T))}double(){const{a:F}=i,{X:D,Y:O,Z:K}=this,Z=d(D*D),tt=d(O*O),rt=d(Ii*d(K*K)),ot=d(F*Z),z=D+O,et=d(d(z*z)-Z-tt),Y=ot+tt,Q=Y-rt,m=ot-tt,a=d(et*Q),h=d(Y*m),p=d(et*m),w=d(Q*Y);return new A(a,h,w,p)}add(F){I(F);const{a:D,d:O}=i,{X:K,Y:Z,Z:tt,T:rt}=this,{X:ot,Y:z,Z:et,T:Y}=F,Q=d(K*ot),m=d(Z*z),a=d(rt*O*Y),h=d(tt*et),p=d((K+Z)*(ot+z)-Q-m),w=h-a,x=h+a,B=d(m-D*Q),M=d(p*w),y=d(x*B),f=d(p*B),E=d(w*x);return new A(M,y,E,f)}subtract(F){return this.add(F.negate())}multiply(F){if(!s.isValidNot0(F))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:D,f:O}=C.cached(this,F,K=>wr(A,K));return wr(A,[D,O])[0]}multiplyUnsafe(F,D=A.ZERO){if(!s.isValid(F))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return F===fr?A.ZERO:this.is0()||F===ce?this:C.unsafe(this,F,O=>wr(A,O),D)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return C.unsafe(this,i.n).is0()}toAffine(F){return k(this,F)}clearCofactor(){return o===ce?this:this.multiplyUnsafe(o)}toBytes(){const{x:F,y:D}=this.toAffine(),O=r.toBytes(D);return O[O.length-1]|=F&ce?128:0,O}toHex(){return br(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(F){return wr(A,F)}static msm(F,D){return Go(A,s,F,D)}_setWindowSize(F){this.precompute(F)}toRawBytes(){return this.toBytes()}}A.BASE=new A(i.Gx,i.Gy,ce,d(i.Gx*i.Gy)),A.ZERO=new A(fr,ce,ce,fr),A.Fp=r,A.Fn=s;const C=new Vo(A,s.BITS);return A.BASE.precompute(8),A}function iu(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');hn(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:o}=n,c=e.randomBytes||is,d=e.adjustScalarBytes||(z=>z),b=e.domain||((z,et,Y)=>{if(Er(Y,"phflag"),et.length||Y)throw new Error("Contexts/pre-hash are not supported");return z});function _(z){return o.create(sn(z))}function I(z){const et=O.secretKey;z=Dt("private key",z,et);const Y=Dt("hashed private key",t(z),2*et),Q=d(Y.slice(0,et)),m=Y.slice(et,2*et),a=_(Q);return{head:Q,prefix:m,scalar:a}}function k(z){const{head:et,prefix:Y,scalar:Q}=I(z),m=s.multiply(Q),a=m.toBytes();return{head:et,prefix:Y,scalar:Q,point:m,pointBytes:a}}function S(z){return k(z).pointBytes}function A(z=Uint8Array.of(),...et){const Y=He(...et);return _(t(b(Y,Dt("context",z),!!r)))}function C(z,et,Y={}){z=Dt("message",z),r&&(z=r(z));const{prefix:Q,scalar:m,pointBytes:a}=k(et),h=A(Y.context,Q,z),p=s.multiply(h).toBytes(),w=A(Y.context,p,a,z),x=o.create(h+w*m);if(!o.isValid(x))throw new Error("sign failed: invalid s");const B=He(p,o.toBytes(x));return Pe(B,O.signature,"result")}const L={zip215:!0};function F(z,et,Y,Q=L){const{context:m,zip215:a}=Q,h=O.signature;z=Dt("signature",z,h),et=Dt("message",et),Y=Dt("publicKey",Y,O.publicKey),a!==void 0&&Er(a,"zip215"),r&&(et=r(et));const p=h/2,w=z.subarray(0,p),x=sn(z.subarray(p,h));let B,M,y;try{B=n.fromBytes(Y,a),M=n.fromBytes(w,a),y=s.multiplyUnsafe(x)}catch{return!1}if(!a&&B.isSmallOrder())return!1;const f=A(m,M.toBytes(),B.toBytes(),et);return M.add(B.multiplyUnsafe(f)).subtract(y).clearCofactor().is0()}const D=i.BYTES,O={secretKey:D,publicKey:D,signature:2*D,seed:D};function K(z=c(O.seed)){return Pe(z,O.seed,"seed")}function Z(z){const et=ot.randomSecretKey(z);return{secretKey:et,publicKey:S(et)}}function tt(z){return fn(z)&&z.length===o.BYTES}function rt(z,et){try{return!!n.fromBytes(z,et)}catch{return!1}}const ot={getExtendedPublicKey:k,randomSecretKey:K,isValidSecretKey:tt,isValidPublicKey:rt,toMontgomery(z){const{y:et}=n.fromBytes(z),Y=O.publicKey,Q=Y===32;if(!Q&&Y!==57)throw new Error("only defined for 25519 and 448");const m=Q?i.div(ce+et,ce-et):i.div(et-ce,et+ce);return i.toBytes(m)},toMontgomerySecret(z){const et=O.secretKey;Pe(z,et);const Y=t(z.subarray(0,et));return d(Y).subarray(0,et)},randomPrivateKey:K,precompute(z=8,et=n.BASE){return et.precompute(z,!1)}};return Object.freeze({keygen:Z,getPublicKey:S,sign:C,verify:F,utils:ot,Point:n,lengths:O})}function su(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=_r(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function ou(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function au(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=su(n),i=nu(t,e),o=iu(i,r,s);return ou(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const cu=BigInt(1),Ys=BigInt(2);BigInt(3);const uu=BigInt(5),fu=BigInt(8),cs=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Zo={p:cs,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:fu,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function lu(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=cs,c=n*n%i*n%i,d=zt(c,Ys,i)*c%i,b=zt(d,cu,i)*n%i,_=zt(b,uu,i)*b%i,I=zt(_,t,i)*_%i,k=zt(I,e,i)*I%i,S=zt(k,r,i)*k%i,A=zt(S,s,i)*S%i,C=zt(A,s,i)*S%i,L=zt(C,t,i)*_%i;return{pow_p_5_8:zt(L,Ys,i)*n%i,b2:c}}function hu(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const Xs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function du(n,t){const e=cs,r=ae(t*t*t,e),s=ae(r*r*t,e),i=lu(n*s).pow_p_5_8;let o=ae(n*r*i,e);const c=ae(t*o*o,e),d=o,b=ae(o*Xs,e),_=c===n,I=c===ae(-n,e),k=c===ae(-n*Xs,e);return _&&(o=d),(I||k)&&(o=b),Gc(o,e)&&(o=ae(-o,e)),{isValid:_||I,value:o}}const pu=_r(Zo.p,{isLE:!0}),gu={...Zo,Fp:pu,hash:zc,adjustScalarBytes:hu,uvRatio:du},Zr=au(gu);var us={exports:{}};const mu={},yu=Object.freeze(Object.defineProperty({__proto__:null,default:mu},Symbol.toStringTag,{value:"Module"})),wu=es(yu);us.exports;(function(n){(function(t,e){function r(m,a){if(!m)throw new Error(a||"Assertion failed")}function s(m,a){m.super_=a;var h=function(){};h.prototype=a.prototype,m.prototype=new h,m.prototype.constructor=m}function i(m,a,h){if(i.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(m||0,a||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=wu.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,h){return a.cmp(h)>0?a:h},i.min=function(a,h){return a.cmp(h)<0?a:h},i.prototype._init=function(a,h,p){if(typeof a=="number")return this._initNumber(a,h,p);if(typeof a=="object")return this._initArray(a,h,p);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var w=0;a[0]==="-"&&(w++,this.negative=1),w<a.length&&(h===16?this._parseHex(a,w,p):(this._parseBase(a,h,w),p==="le"&&this._initArray(this.toArray(),h,p)))},i.prototype._initNumber=function(a,h,p){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),h,p)},i.prototype._initArray=function(a,h,p){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x,B,M=0;if(p==="be")for(w=a.length-1,x=0;w>=0;w-=3)B=a[w]|a[w-1]<<8|a[w-2]<<16,this.words[x]|=B<<M&67108863,this.words[x+1]=B>>>26-M&67108863,M+=24,M>=26&&(M-=26,x++);else if(p==="le")for(w=0,x=0;w<a.length;w+=3)B=a[w]|a[w+1]<<8|a[w+2]<<16,this.words[x]|=B<<M&67108863,this.words[x+1]=B>>>26-M&67108863,M+=24,M>=26&&(M-=26,x++);return this._strip()};function c(m,a){var h=m.charCodeAt(a);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+m)}function d(m,a,h){var p=c(m,h);return h-1>=a&&(p|=c(m,h-1)<<4),p}i.prototype._parseHex=function(a,h,p){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var w=0;w<this.length;w++)this.words[w]=0;var x=0,B=0,M;if(p==="be")for(w=a.length-1;w>=h;w-=2)M=d(a,h,w)<<x,this.words[B]|=M&67108863,x>=18?(x-=18,B+=1,this.words[B]|=M>>>26):x+=8;else{var y=a.length-h;for(w=y%2===0?h+1:h;w<a.length;w+=2)M=d(a,h,w)<<x,this.words[B]|=M&67108863,x>=18?(x-=18,B+=1,this.words[B]|=M>>>26):x+=8}this._strip()};function b(m,a,h,p){for(var w=0,x=0,B=Math.min(m.length,h),M=a;M<B;M++){var y=m.charCodeAt(M)-48;w*=p,y>=49?x=y-49+10:y>=17?x=y-17+10:x=y,r(y>=0&&x<p,"Invalid character"),w+=x}return w}i.prototype._parseBase=function(a,h,p){this.words=[0],this.length=1;for(var w=0,x=1;x<=67108863;x*=h)w++;w--,x=x/h|0;for(var B=a.length-p,M=B%w,y=Math.min(B,B-M)+p,f=0,E=p;E<y;E+=w)f=b(a,E,E+w,h),this.imuln(x),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(M!==0){var V=1;for(f=b(a,E,a.length,h),E=0;E<M;E++)V*=h;this.imuln(V),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red};function _(m,a){m.words=a.words,m.length=a.length,m.negative=a.negative,m.red=a.red}if(i.prototype._move=function(a){_(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{i.prototype.inspect=I}else i.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var k=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],S=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,h){a=a||10,h=h|0||1;var p;if(a===16||a==="hex"){p="";for(var w=0,x=0,B=0;B<this.length;B++){var M=this.words[B],y=((M<<w|x)&16777215).toString(16);x=M>>>24-w&16777215,w+=2,w>=26&&(w-=26,B--),x!==0||B!==this.length-1?p=k[6-y.length]+y+p:p=y+p}for(x!==0&&(p=x.toString(16)+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(a===(a|0)&&a>=2&&a<=36){var f=S[a],E=A[a];p="";var V=this.clone();for(V.negative=0;!V.isZero();){var H=V.modrn(E).toString(a);V=V.idivn(E),V.isZero()?p=H+p:p=k[f-H.length]+H+p}for(this.isZero()&&(p="0"+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,h){return this.toArrayLike(o,a,h)}),i.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)};var C=function(a,h){return a.allocUnsafe?a.allocUnsafe(h):new a(h)};i.prototype.toArrayLike=function(a,h,p){this._strip();var w=this.byteLength(),x=p||Math.max(1,w);r(w<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var B=C(a,x),M=h==="le"?"LE":"BE";return this["_toArrayLike"+M](B,w),B},i.prototype._toArrayLikeLE=function(a,h){for(var p=0,w=0,x=0,B=0;x<this.length;x++){var M=this.words[x]<<B|w;a[p++]=M&255,p<a.length&&(a[p++]=M>>8&255),p<a.length&&(a[p++]=M>>16&255),B===6?(p<a.length&&(a[p++]=M>>24&255),w=0,B=0):(w=M>>>24,B+=2)}if(p<a.length)for(a[p++]=w;p<a.length;)a[p++]=0},i.prototype._toArrayLikeBE=function(a,h){for(var p=a.length-1,w=0,x=0,B=0;x<this.length;x++){var M=this.words[x]<<B|w;a[p--]=M&255,p>=0&&(a[p--]=M>>8&255),p>=0&&(a[p--]=M>>16&255),B===6?(p>=0&&(a[p--]=M>>24&255),w=0,B=0):(w=M>>>24,B+=2)}if(p>=0)for(a[p--]=w;p>=0;)a[p--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var h=a,p=0;return h>=4096&&(p+=13,h>>>=13),h>=64&&(p+=7,h>>>=7),h>=8&&(p+=4,h>>>=4),h>=2&&(p+=2,h>>>=2),p+h},i.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,p=0;return h&8191||(p+=13,h>>>=13),h&127||(p+=7,h>>>=7),h&15||(p+=4,h>>>=4),h&3||(p+=2,h>>>=2),h&1||p++,p},i.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function L(m){for(var a=new Array(m.bitLength()),h=0;h<a.length;h++){var p=h/26|0,w=h%26;a[h]=m.words[p]>>>w&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var p=this._zeroBits(this.words[h]);if(a+=p,p!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]&a.words[p];return this.length=h.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var h,p;this.length>a.length?(h=this,p=a):(h=a,p=this);for(var w=0;w<p.length;w++)this.words[w]=h.words[w]^p.words[w];if(this!==h)for(;w<h.length;w++)this.words[w]=h.words[w];return this.length=h.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,p=a%26;this._expand(h),p>0&&h--;for(var w=0;w<h;w++)this.words[w]=~this.words[w]&67108863;return p>0&&(this.words[w]=~this.words[w]&67108863>>26-p),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,h){r(typeof a=="number"&&a>=0);var p=a/26|0,w=a%26;return this._expand(p+1),h?this.words[p]=this.words[p]|1<<w:this.words[p]=this.words[p]&~(1<<w),this._strip()},i.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var p,w;this.length>a.length?(p=this,w=a):(p=a,w=this);for(var x=0,B=0;B<w.length;B++)h=(p.words[B]|0)+(w.words[B]|0)+x,this.words[B]=h&67108863,x=h>>>26;for(;x!==0&&B<p.length;B++)h=(p.words[B]|0)+x,this.words[B]=h&67108863,x=h>>>26;if(this.length=p.length,x!==0)this.words[this.length]=x,this.length++;else if(p!==this)for(;B<p.length;B++)this.words[B]=p.words[B];return this},i.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var p=this.cmp(a);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var w,x;p>0?(w=this,x=a):(w=a,x=this);for(var B=0,M=0;M<x.length;M++)h=(w.words[M]|0)-(x.words[M]|0)+B,B=h>>26,this.words[M]=h&67108863;for(;B!==0&&M<w.length;M++)h=(w.words[M]|0)+B,B=h>>26,this.words[M]=h&67108863;if(B===0&&M<w.length&&w!==this)for(;M<w.length;M++)this.words[M]=w.words[M];return this.length=Math.max(this.length,M),w!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function F(m,a,h){h.negative=a.negative^m.negative;var p=m.length+a.length|0;h.length=p,p=p-1|0;var w=m.words[0]|0,x=a.words[0]|0,B=w*x,M=B&67108863,y=B/67108864|0;h.words[0]=M;for(var f=1;f<p;f++){for(var E=y>>>26,V=y&67108863,H=Math.min(f,a.length-1),X=Math.max(0,f-m.length+1);X<=H;X++){var yt=f-X|0;w=m.words[yt]|0,x=a.words[X]|0,B=w*x+V,E+=B/67108864|0,V=B&67108863}h.words[f]=V|0,y=E|0}return y!==0?h.words[f]=y|0:h.length--,h._strip()}var D=function(a,h,p){var w=a.words,x=h.words,B=p.words,M=0,y,f,E,V=w[0]|0,H=V&8191,X=V>>>13,yt=w[1]|0,ft=yt&8191,ct=yt>>>13,Tt=w[2]|0,xt=Tt&8191,St=Tt>>>13,Ue=w[3]|0,Bt=Ue&8191,Ft=Ue>>>13,yn=w[4]|0,It=yn&8191,Nt=yn>>>13,wn=w[5]|0,Ct=wn&8191,At=wn>>>13,Ae=w[6]|0,Mt=Ae&8191,Ot=Ae>>>13,Oe=w[7]|0,Pt=Oe&8191,g=Oe>>>13,u=w[8]|0,l=u&8191,v=u>>>13,R=w[9]|0,U=R&8191,P=R>>>13,gt=x[0]|0,ht=gt&8191,lt=gt>>>13,kt=x[1]|0,ut=kt&8191,$t=kt>>>13,Ls=x[2]|0,Ht=Ls&8191,Wt=Ls>>>13,Us=x[3]|0,Vt=Us&8191,Gt=Us>>>13,Ts=x[4]|0,jt=Ts&8191,Zt=Ts>>>13,Fs=x[5]|0,Yt=Fs&8191,Xt=Fs>>>13,Ns=x[6]|0,Jt=Ns&8191,Qt=Ns>>>13,Os=x[7]|0,te=Os&8191,ee=Os>>>13,Ps=x[8]|0,re=Ps&8191,ne=Ps>>>13,zs=x[9]|0,ie=zs&8191,se=zs>>>13;p.negative=a.negative^h.negative,p.length=19,y=Math.imul(H,ht),f=Math.imul(H,lt),f=f+Math.imul(X,ht)|0,E=Math.imul(X,lt);var ni=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(ni>>>26)|0,ni&=67108863,y=Math.imul(ft,ht),f=Math.imul(ft,lt),f=f+Math.imul(ct,ht)|0,E=Math.imul(ct,lt),y=y+Math.imul(H,ut)|0,f=f+Math.imul(H,$t)|0,f=f+Math.imul(X,ut)|0,E=E+Math.imul(X,$t)|0;var ii=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(ii>>>26)|0,ii&=67108863,y=Math.imul(xt,ht),f=Math.imul(xt,lt),f=f+Math.imul(St,ht)|0,E=Math.imul(St,lt),y=y+Math.imul(ft,ut)|0,f=f+Math.imul(ft,$t)|0,f=f+Math.imul(ct,ut)|0,E=E+Math.imul(ct,$t)|0,y=y+Math.imul(H,Ht)|0,f=f+Math.imul(H,Wt)|0,f=f+Math.imul(X,Ht)|0,E=E+Math.imul(X,Wt)|0;var si=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(si>>>26)|0,si&=67108863,y=Math.imul(Bt,ht),f=Math.imul(Bt,lt),f=f+Math.imul(Ft,ht)|0,E=Math.imul(Ft,lt),y=y+Math.imul(xt,ut)|0,f=f+Math.imul(xt,$t)|0,f=f+Math.imul(St,ut)|0,E=E+Math.imul(St,$t)|0,y=y+Math.imul(ft,Ht)|0,f=f+Math.imul(ft,Wt)|0,f=f+Math.imul(ct,Ht)|0,E=E+Math.imul(ct,Wt)|0,y=y+Math.imul(H,Vt)|0,f=f+Math.imul(H,Gt)|0,f=f+Math.imul(X,Vt)|0,E=E+Math.imul(X,Gt)|0;var oi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(oi>>>26)|0,oi&=67108863,y=Math.imul(It,ht),f=Math.imul(It,lt),f=f+Math.imul(Nt,ht)|0,E=Math.imul(Nt,lt),y=y+Math.imul(Bt,ut)|0,f=f+Math.imul(Bt,$t)|0,f=f+Math.imul(Ft,ut)|0,E=E+Math.imul(Ft,$t)|0,y=y+Math.imul(xt,Ht)|0,f=f+Math.imul(xt,Wt)|0,f=f+Math.imul(St,Ht)|0,E=E+Math.imul(St,Wt)|0,y=y+Math.imul(ft,Vt)|0,f=f+Math.imul(ft,Gt)|0,f=f+Math.imul(ct,Vt)|0,E=E+Math.imul(ct,Gt)|0,y=y+Math.imul(H,jt)|0,f=f+Math.imul(H,Zt)|0,f=f+Math.imul(X,jt)|0,E=E+Math.imul(X,Zt)|0;var ai=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(ai>>>26)|0,ai&=67108863,y=Math.imul(Ct,ht),f=Math.imul(Ct,lt),f=f+Math.imul(At,ht)|0,E=Math.imul(At,lt),y=y+Math.imul(It,ut)|0,f=f+Math.imul(It,$t)|0,f=f+Math.imul(Nt,ut)|0,E=E+Math.imul(Nt,$t)|0,y=y+Math.imul(Bt,Ht)|0,f=f+Math.imul(Bt,Wt)|0,f=f+Math.imul(Ft,Ht)|0,E=E+Math.imul(Ft,Wt)|0,y=y+Math.imul(xt,Vt)|0,f=f+Math.imul(xt,Gt)|0,f=f+Math.imul(St,Vt)|0,E=E+Math.imul(St,Gt)|0,y=y+Math.imul(ft,jt)|0,f=f+Math.imul(ft,Zt)|0,f=f+Math.imul(ct,jt)|0,E=E+Math.imul(ct,Zt)|0,y=y+Math.imul(H,Yt)|0,f=f+Math.imul(H,Xt)|0,f=f+Math.imul(X,Yt)|0,E=E+Math.imul(X,Xt)|0;var ci=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(ci>>>26)|0,ci&=67108863,y=Math.imul(Mt,ht),f=Math.imul(Mt,lt),f=f+Math.imul(Ot,ht)|0,E=Math.imul(Ot,lt),y=y+Math.imul(Ct,ut)|0,f=f+Math.imul(Ct,$t)|0,f=f+Math.imul(At,ut)|0,E=E+Math.imul(At,$t)|0,y=y+Math.imul(It,Ht)|0,f=f+Math.imul(It,Wt)|0,f=f+Math.imul(Nt,Ht)|0,E=E+Math.imul(Nt,Wt)|0,y=y+Math.imul(Bt,Vt)|0,f=f+Math.imul(Bt,Gt)|0,f=f+Math.imul(Ft,Vt)|0,E=E+Math.imul(Ft,Gt)|0,y=y+Math.imul(xt,jt)|0,f=f+Math.imul(xt,Zt)|0,f=f+Math.imul(St,jt)|0,E=E+Math.imul(St,Zt)|0,y=y+Math.imul(ft,Yt)|0,f=f+Math.imul(ft,Xt)|0,f=f+Math.imul(ct,Yt)|0,E=E+Math.imul(ct,Xt)|0,y=y+Math.imul(H,Jt)|0,f=f+Math.imul(H,Qt)|0,f=f+Math.imul(X,Jt)|0,E=E+Math.imul(X,Qt)|0;var ui=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(ui>>>26)|0,ui&=67108863,y=Math.imul(Pt,ht),f=Math.imul(Pt,lt),f=f+Math.imul(g,ht)|0,E=Math.imul(g,lt),y=y+Math.imul(Mt,ut)|0,f=f+Math.imul(Mt,$t)|0,f=f+Math.imul(Ot,ut)|0,E=E+Math.imul(Ot,$t)|0,y=y+Math.imul(Ct,Ht)|0,f=f+Math.imul(Ct,Wt)|0,f=f+Math.imul(At,Ht)|0,E=E+Math.imul(At,Wt)|0,y=y+Math.imul(It,Vt)|0,f=f+Math.imul(It,Gt)|0,f=f+Math.imul(Nt,Vt)|0,E=E+Math.imul(Nt,Gt)|0,y=y+Math.imul(Bt,jt)|0,f=f+Math.imul(Bt,Zt)|0,f=f+Math.imul(Ft,jt)|0,E=E+Math.imul(Ft,Zt)|0,y=y+Math.imul(xt,Yt)|0,f=f+Math.imul(xt,Xt)|0,f=f+Math.imul(St,Yt)|0,E=E+Math.imul(St,Xt)|0,y=y+Math.imul(ft,Jt)|0,f=f+Math.imul(ft,Qt)|0,f=f+Math.imul(ct,Jt)|0,E=E+Math.imul(ct,Qt)|0,y=y+Math.imul(H,te)|0,f=f+Math.imul(H,ee)|0,f=f+Math.imul(X,te)|0,E=E+Math.imul(X,ee)|0;var fi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(fi>>>26)|0,fi&=67108863,y=Math.imul(l,ht),f=Math.imul(l,lt),f=f+Math.imul(v,ht)|0,E=Math.imul(v,lt),y=y+Math.imul(Pt,ut)|0,f=f+Math.imul(Pt,$t)|0,f=f+Math.imul(g,ut)|0,E=E+Math.imul(g,$t)|0,y=y+Math.imul(Mt,Ht)|0,f=f+Math.imul(Mt,Wt)|0,f=f+Math.imul(Ot,Ht)|0,E=E+Math.imul(Ot,Wt)|0,y=y+Math.imul(Ct,Vt)|0,f=f+Math.imul(Ct,Gt)|0,f=f+Math.imul(At,Vt)|0,E=E+Math.imul(At,Gt)|0,y=y+Math.imul(It,jt)|0,f=f+Math.imul(It,Zt)|0,f=f+Math.imul(Nt,jt)|0,E=E+Math.imul(Nt,Zt)|0,y=y+Math.imul(Bt,Yt)|0,f=f+Math.imul(Bt,Xt)|0,f=f+Math.imul(Ft,Yt)|0,E=E+Math.imul(Ft,Xt)|0,y=y+Math.imul(xt,Jt)|0,f=f+Math.imul(xt,Qt)|0,f=f+Math.imul(St,Jt)|0,E=E+Math.imul(St,Qt)|0,y=y+Math.imul(ft,te)|0,f=f+Math.imul(ft,ee)|0,f=f+Math.imul(ct,te)|0,E=E+Math.imul(ct,ee)|0,y=y+Math.imul(H,re)|0,f=f+Math.imul(H,ne)|0,f=f+Math.imul(X,re)|0,E=E+Math.imul(X,ne)|0;var li=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(li>>>26)|0,li&=67108863,y=Math.imul(U,ht),f=Math.imul(U,lt),f=f+Math.imul(P,ht)|0,E=Math.imul(P,lt),y=y+Math.imul(l,ut)|0,f=f+Math.imul(l,$t)|0,f=f+Math.imul(v,ut)|0,E=E+Math.imul(v,$t)|0,y=y+Math.imul(Pt,Ht)|0,f=f+Math.imul(Pt,Wt)|0,f=f+Math.imul(g,Ht)|0,E=E+Math.imul(g,Wt)|0,y=y+Math.imul(Mt,Vt)|0,f=f+Math.imul(Mt,Gt)|0,f=f+Math.imul(Ot,Vt)|0,E=E+Math.imul(Ot,Gt)|0,y=y+Math.imul(Ct,jt)|0,f=f+Math.imul(Ct,Zt)|0,f=f+Math.imul(At,jt)|0,E=E+Math.imul(At,Zt)|0,y=y+Math.imul(It,Yt)|0,f=f+Math.imul(It,Xt)|0,f=f+Math.imul(Nt,Yt)|0,E=E+Math.imul(Nt,Xt)|0,y=y+Math.imul(Bt,Jt)|0,f=f+Math.imul(Bt,Qt)|0,f=f+Math.imul(Ft,Jt)|0,E=E+Math.imul(Ft,Qt)|0,y=y+Math.imul(xt,te)|0,f=f+Math.imul(xt,ee)|0,f=f+Math.imul(St,te)|0,E=E+Math.imul(St,ee)|0,y=y+Math.imul(ft,re)|0,f=f+Math.imul(ft,ne)|0,f=f+Math.imul(ct,re)|0,E=E+Math.imul(ct,ne)|0,y=y+Math.imul(H,ie)|0,f=f+Math.imul(H,se)|0,f=f+Math.imul(X,ie)|0,E=E+Math.imul(X,se)|0;var hi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(hi>>>26)|0,hi&=67108863,y=Math.imul(U,ut),f=Math.imul(U,$t),f=f+Math.imul(P,ut)|0,E=Math.imul(P,$t),y=y+Math.imul(l,Ht)|0,f=f+Math.imul(l,Wt)|0,f=f+Math.imul(v,Ht)|0,E=E+Math.imul(v,Wt)|0,y=y+Math.imul(Pt,Vt)|0,f=f+Math.imul(Pt,Gt)|0,f=f+Math.imul(g,Vt)|0,E=E+Math.imul(g,Gt)|0,y=y+Math.imul(Mt,jt)|0,f=f+Math.imul(Mt,Zt)|0,f=f+Math.imul(Ot,jt)|0,E=E+Math.imul(Ot,Zt)|0,y=y+Math.imul(Ct,Yt)|0,f=f+Math.imul(Ct,Xt)|0,f=f+Math.imul(At,Yt)|0,E=E+Math.imul(At,Xt)|0,y=y+Math.imul(It,Jt)|0,f=f+Math.imul(It,Qt)|0,f=f+Math.imul(Nt,Jt)|0,E=E+Math.imul(Nt,Qt)|0,y=y+Math.imul(Bt,te)|0,f=f+Math.imul(Bt,ee)|0,f=f+Math.imul(Ft,te)|0,E=E+Math.imul(Ft,ee)|0,y=y+Math.imul(xt,re)|0,f=f+Math.imul(xt,ne)|0,f=f+Math.imul(St,re)|0,E=E+Math.imul(St,ne)|0,y=y+Math.imul(ft,ie)|0,f=f+Math.imul(ft,se)|0,f=f+Math.imul(ct,ie)|0,E=E+Math.imul(ct,se)|0;var di=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(di>>>26)|0,di&=67108863,y=Math.imul(U,Ht),f=Math.imul(U,Wt),f=f+Math.imul(P,Ht)|0,E=Math.imul(P,Wt),y=y+Math.imul(l,Vt)|0,f=f+Math.imul(l,Gt)|0,f=f+Math.imul(v,Vt)|0,E=E+Math.imul(v,Gt)|0,y=y+Math.imul(Pt,jt)|0,f=f+Math.imul(Pt,Zt)|0,f=f+Math.imul(g,jt)|0,E=E+Math.imul(g,Zt)|0,y=y+Math.imul(Mt,Yt)|0,f=f+Math.imul(Mt,Xt)|0,f=f+Math.imul(Ot,Yt)|0,E=E+Math.imul(Ot,Xt)|0,y=y+Math.imul(Ct,Jt)|0,f=f+Math.imul(Ct,Qt)|0,f=f+Math.imul(At,Jt)|0,E=E+Math.imul(At,Qt)|0,y=y+Math.imul(It,te)|0,f=f+Math.imul(It,ee)|0,f=f+Math.imul(Nt,te)|0,E=E+Math.imul(Nt,ee)|0,y=y+Math.imul(Bt,re)|0,f=f+Math.imul(Bt,ne)|0,f=f+Math.imul(Ft,re)|0,E=E+Math.imul(Ft,ne)|0,y=y+Math.imul(xt,ie)|0,f=f+Math.imul(xt,se)|0,f=f+Math.imul(St,ie)|0,E=E+Math.imul(St,se)|0;var pi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(pi>>>26)|0,pi&=67108863,y=Math.imul(U,Vt),f=Math.imul(U,Gt),f=f+Math.imul(P,Vt)|0,E=Math.imul(P,Gt),y=y+Math.imul(l,jt)|0,f=f+Math.imul(l,Zt)|0,f=f+Math.imul(v,jt)|0,E=E+Math.imul(v,Zt)|0,y=y+Math.imul(Pt,Yt)|0,f=f+Math.imul(Pt,Xt)|0,f=f+Math.imul(g,Yt)|0,E=E+Math.imul(g,Xt)|0,y=y+Math.imul(Mt,Jt)|0,f=f+Math.imul(Mt,Qt)|0,f=f+Math.imul(Ot,Jt)|0,E=E+Math.imul(Ot,Qt)|0,y=y+Math.imul(Ct,te)|0,f=f+Math.imul(Ct,ee)|0,f=f+Math.imul(At,te)|0,E=E+Math.imul(At,ee)|0,y=y+Math.imul(It,re)|0,f=f+Math.imul(It,ne)|0,f=f+Math.imul(Nt,re)|0,E=E+Math.imul(Nt,ne)|0,y=y+Math.imul(Bt,ie)|0,f=f+Math.imul(Bt,se)|0,f=f+Math.imul(Ft,ie)|0,E=E+Math.imul(Ft,se)|0;var gi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(gi>>>26)|0,gi&=67108863,y=Math.imul(U,jt),f=Math.imul(U,Zt),f=f+Math.imul(P,jt)|0,E=Math.imul(P,Zt),y=y+Math.imul(l,Yt)|0,f=f+Math.imul(l,Xt)|0,f=f+Math.imul(v,Yt)|0,E=E+Math.imul(v,Xt)|0,y=y+Math.imul(Pt,Jt)|0,f=f+Math.imul(Pt,Qt)|0,f=f+Math.imul(g,Jt)|0,E=E+Math.imul(g,Qt)|0,y=y+Math.imul(Mt,te)|0,f=f+Math.imul(Mt,ee)|0,f=f+Math.imul(Ot,te)|0,E=E+Math.imul(Ot,ee)|0,y=y+Math.imul(Ct,re)|0,f=f+Math.imul(Ct,ne)|0,f=f+Math.imul(At,re)|0,E=E+Math.imul(At,ne)|0,y=y+Math.imul(It,ie)|0,f=f+Math.imul(It,se)|0,f=f+Math.imul(Nt,ie)|0,E=E+Math.imul(Nt,se)|0;var mi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(mi>>>26)|0,mi&=67108863,y=Math.imul(U,Yt),f=Math.imul(U,Xt),f=f+Math.imul(P,Yt)|0,E=Math.imul(P,Xt),y=y+Math.imul(l,Jt)|0,f=f+Math.imul(l,Qt)|0,f=f+Math.imul(v,Jt)|0,E=E+Math.imul(v,Qt)|0,y=y+Math.imul(Pt,te)|0,f=f+Math.imul(Pt,ee)|0,f=f+Math.imul(g,te)|0,E=E+Math.imul(g,ee)|0,y=y+Math.imul(Mt,re)|0,f=f+Math.imul(Mt,ne)|0,f=f+Math.imul(Ot,re)|0,E=E+Math.imul(Ot,ne)|0,y=y+Math.imul(Ct,ie)|0,f=f+Math.imul(Ct,se)|0,f=f+Math.imul(At,ie)|0,E=E+Math.imul(At,se)|0;var yi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(yi>>>26)|0,yi&=67108863,y=Math.imul(U,Jt),f=Math.imul(U,Qt),f=f+Math.imul(P,Jt)|0,E=Math.imul(P,Qt),y=y+Math.imul(l,te)|0,f=f+Math.imul(l,ee)|0,f=f+Math.imul(v,te)|0,E=E+Math.imul(v,ee)|0,y=y+Math.imul(Pt,re)|0,f=f+Math.imul(Pt,ne)|0,f=f+Math.imul(g,re)|0,E=E+Math.imul(g,ne)|0,y=y+Math.imul(Mt,ie)|0,f=f+Math.imul(Mt,se)|0,f=f+Math.imul(Ot,ie)|0,E=E+Math.imul(Ot,se)|0;var wi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(wi>>>26)|0,wi&=67108863,y=Math.imul(U,te),f=Math.imul(U,ee),f=f+Math.imul(P,te)|0,E=Math.imul(P,ee),y=y+Math.imul(l,re)|0,f=f+Math.imul(l,ne)|0,f=f+Math.imul(v,re)|0,E=E+Math.imul(v,ne)|0,y=y+Math.imul(Pt,ie)|0,f=f+Math.imul(Pt,se)|0,f=f+Math.imul(g,ie)|0,E=E+Math.imul(g,se)|0;var bi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(bi>>>26)|0,bi&=67108863,y=Math.imul(U,re),f=Math.imul(U,ne),f=f+Math.imul(P,re)|0,E=Math.imul(P,ne),y=y+Math.imul(l,ie)|0,f=f+Math.imul(l,se)|0,f=f+Math.imul(v,ie)|0,E=E+Math.imul(v,se)|0;var vi=(M+y|0)+((f&8191)<<13)|0;M=(E+(f>>>13)|0)+(vi>>>26)|0,vi&=67108863,y=Math.imul(U,ie),f=Math.imul(U,se),f=f+Math.imul(P,ie)|0,E=Math.imul(P,se);var xi=(M+y|0)+((f&8191)<<13)|0;return M=(E+(f>>>13)|0)+(xi>>>26)|0,xi&=67108863,B[0]=ni,B[1]=ii,B[2]=si,B[3]=oi,B[4]=ai,B[5]=ci,B[6]=ui,B[7]=fi,B[8]=li,B[9]=hi,B[10]=di,B[11]=pi,B[12]=gi,B[13]=mi,B[14]=yi,B[15]=wi,B[16]=bi,B[17]=vi,B[18]=xi,M!==0&&(B[19]=M,p.length++),p};Math.imul||(D=F);function O(m,a,h){h.negative=a.negative^m.negative,h.length=m.length+a.length;for(var p=0,w=0,x=0;x<h.length-1;x++){var B=w;w=0;for(var M=p&67108863,y=Math.min(x,a.length-1),f=Math.max(0,x-m.length+1);f<=y;f++){var E=x-f,V=m.words[E]|0,H=a.words[f]|0,X=V*H,yt=X&67108863;B=B+(X/67108864|0)|0,yt=yt+M|0,M=yt&67108863,B=B+(yt>>>26)|0,w+=B>>>26,B&=67108863}h.words[x]=M,p=B,B=w}return p!==0?h.words[x]=p:h.length--,h._strip()}function K(m,a,h){return O(m,a,h)}i.prototype.mulTo=function(a,h){var p,w=this.length+a.length;return this.length===10&&a.length===10?p=D(this,a,h):w<63?p=F(this,a,h):w<1024?p=O(this,a,h):p=K(this,a,h),p},i.prototype.mul=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},i.prototype.mulf=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),K(this,a,h)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var h=a<0;h&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var p=0,w=0;w<this.length;w++){var x=(this.words[w]|0)*a,B=(x&67108863)+(p&67108863);p>>=26,p+=x/67108864|0,p+=B>>>26,this.words[w]=B&67108863}return p!==0&&(this.words[w]=p,this.length++),this.length=a===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var h=L(a);if(h.length===0)return new i(1);for(var p=this,w=0;w<h.length&&h[w]===0;w++,p=p.sqr());if(++w<h.length)for(var x=p.sqr();w<h.length;w++,x=x.sqr())h[w]!==0&&(p=p.mul(x));return p},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var h=a%26,p=(a-h)/26,w=67108863>>>26-h<<26-h,x;if(h!==0){var B=0;for(x=0;x<this.length;x++){var M=this.words[x]&w,y=(this.words[x]|0)-M<<h;this.words[x]=y|B,B=M>>>26-h}B&&(this.words[x]=B,this.length++)}if(p!==0){for(x=this.length-1;x>=0;x--)this.words[x+p]=this.words[x];for(x=0;x<p;x++)this.words[x]=0;this.length+=p}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,h,p){r(typeof a=="number"&&a>=0);var w;h?w=(h-h%26)/26:w=0;var x=a%26,B=Math.min((a-x)/26,this.length),M=67108863^67108863>>>x<<x,y=p;if(w-=B,w=Math.max(0,w),y){for(var f=0;f<B;f++)y.words[f]=this.words[f];y.length=B}if(B!==0)if(this.length>B)for(this.length-=B,f=0;f<this.length;f++)this.words[f]=this.words[f+B];else this.words[0]=0,this.length=1;var E=0;for(f=this.length-1;f>=0&&(E!==0||f>=w);f--){var V=this.words[f]|0;this.words[f]=E<<26-x|V>>>x,E=V&M}return y&&E!==0&&(y.words[y.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,h,p){return r(this.negative===0),this.iushrn(a,h,p)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,p=(a-h)/26,w=1<<h;if(this.length<=p)return!1;var x=this.words[p];return!!(x&w)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,p=(a-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(h!==0&&p++,this.length=Math.min(p,this.length),h!==0){var w=67108863^67108863>>>h<<h;this.words[this.length-1]&=w}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,h,p){var w=a.length+p,x;this._expand(w);var B,M=0;for(x=0;x<a.length;x++){B=(this.words[x+p]|0)+M;var y=(a.words[x]|0)*h;B-=y&67108863,M=(B>>26)-(y/67108864|0),this.words[x+p]=B&67108863}for(;x<this.length-p;x++)B=(this.words[x+p]|0)+M,M=B>>26,this.words[x+p]=B&67108863;if(M===0)return this._strip();for(r(M===-1),M=0,x=0;x<this.length;x++)B=-(this.words[x]|0)+M,M=B>>26,this.words[x]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,h){var p=this.length-a.length,w=this.clone(),x=a,B=x.words[x.length-1]|0,M=this._countBits(B);p=26-M,p!==0&&(x=x.ushln(p),w.iushln(p),B=x.words[x.length-1]|0);var y=w.length-x.length,f;if(h!=="mod"){f=new i(null),f.length=y+1,f.words=new Array(f.length);for(var E=0;E<f.length;E++)f.words[E]=0}var V=w.clone()._ishlnsubmul(x,1,y);V.negative===0&&(w=V,f&&(f.words[y]=1));for(var H=y-1;H>=0;H--){var X=(w.words[x.length+H]|0)*67108864+(w.words[x.length+H-1]|0);for(X=Math.min(X/B|0,67108863),w._ishlnsubmul(x,X,H);w.negative!==0;)X--,w.negative=0,w._ishlnsubmul(x,1,H),w.isZero()||(w.negative^=1);f&&(f.words[H]=X)}return f&&f._strip(),w._strip(),h!=="div"&&p!==0&&w.iushrn(p),{div:f||null,mod:w}},i.prototype.divmod=function(a,h,p){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var w,x,B;return this.negative!==0&&a.negative===0?(B=this.neg().divmod(a,h),h!=="mod"&&(w=B.div.neg()),h!=="div"&&(x=B.mod.neg(),p&&x.negative!==0&&x.iadd(a)),{div:w,mod:x}):this.negative===0&&a.negative!==0?(B=this.divmod(a.neg(),h),h!=="mod"&&(w=B.div.neg()),{div:w,mod:B.mod}):this.negative&a.negative?(B=this.neg().divmod(a.neg(),h),h!=="div"&&(x=B.mod.neg(),p&&x.negative!==0&&x.isub(a)),{div:B.div,mod:x}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,h)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var p=h.div.negative!==0?h.mod.isub(a):h.mod,w=a.ushrn(1),x=a.andln(1),B=p.cmp(w);return B<0||x===1&&B===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var p=(1<<26)%a,w=0,x=this.length-1;x>=0;x--)w=(p*w+(this.words[x]|0))%a;return h?-w:w},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var p=0,w=this.length-1;w>=0;w--){var x=(this.words[w]|0)+p*67108864;this.words[w]=x/a|0,p=x%a}return this._strip(),h?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var h=this,p=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var w=new i(1),x=new i(0),B=new i(0),M=new i(1),y=0;h.isEven()&&p.isEven();)h.iushrn(1),p.iushrn(1),++y;for(var f=p.clone(),E=h.clone();!h.isZero();){for(var V=0,H=1;!(h.words[0]&H)&&V<26;++V,H<<=1);if(V>0)for(h.iushrn(V);V-- >0;)(w.isOdd()||x.isOdd())&&(w.iadd(f),x.isub(E)),w.iushrn(1),x.iushrn(1);for(var X=0,yt=1;!(p.words[0]&yt)&&X<26;++X,yt<<=1);if(X>0)for(p.iushrn(X);X-- >0;)(B.isOdd()||M.isOdd())&&(B.iadd(f),M.isub(E)),B.iushrn(1),M.iushrn(1);h.cmp(p)>=0?(h.isub(p),w.isub(B),x.isub(M)):(p.isub(h),B.isub(w),M.isub(x))}return{a:B,b:M,gcd:p.iushln(y)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var h=this,p=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var w=new i(1),x=new i(0),B=p.clone();h.cmpn(1)>0&&p.cmpn(1)>0;){for(var M=0,y=1;!(h.words[0]&y)&&M<26;++M,y<<=1);if(M>0)for(h.iushrn(M);M-- >0;)w.isOdd()&&w.iadd(B),w.iushrn(1);for(var f=0,E=1;!(p.words[0]&E)&&f<26;++f,E<<=1);if(f>0)for(p.iushrn(f);f-- >0;)x.isOdd()&&x.iadd(B),x.iushrn(1);h.cmp(p)>=0?(h.isub(p),w.isub(x)):(p.isub(h),x.isub(w))}var V;return h.cmpn(1)===0?V=w:V=x,V.cmpn(0)<0&&V.iadd(a),V},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),p=a.clone();h.negative=0,p.negative=0;for(var w=0;h.isEven()&&p.isEven();w++)h.iushrn(1),p.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;p.isEven();)p.iushrn(1);var x=h.cmp(p);if(x<0){var B=h;h=p,p=B}else if(x===0||p.cmpn(1)===0)break;h.isub(p)}while(!0);return p.iushln(w)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var h=a%26,p=(a-h)/26,w=1<<h;if(this.length<=p)return this._expand(p+1),this.words[p]|=w,this;for(var x=w,B=p;x!==0&&B<this.length;B++){var M=this.words[B]|0;M+=x,x=M>>>26,M&=67108863,this.words[B]=M}return x!==0&&(this.words[B]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var p;if(this.length>1)p=1;else{h&&(a=-a),r(a<=67108863,"Number is too big");var w=this.words[0]|0;p=w===a?0:w<a?-1:1}return this.negative!==0?-p|0:p},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,p=this.length-1;p>=0;p--){var w=this.words[p]|0,x=a.words[p]|0;if(w!==x){w<x?h=-1:w>x&&(h=1);break}}return h},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new Y(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Z={k256:null,p224:null,p192:null,p25519:null};function tt(m,a){this.name=m,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}tt.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},tt.prototype.ireduce=function(a){var h=a,p;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),p=h.bitLength();while(p>this.n);var w=p<this.n?-1:h.ucmp(this.p);return w===0?(h.words[0]=0,h.length=1):w>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},tt.prototype.split=function(a,h){a.iushrn(this.n,0,h)},tt.prototype.imulK=function(a){return a.imul(this.k)};function rt(){tt.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(rt,tt),rt.prototype.split=function(a,h){for(var p=4194303,w=Math.min(a.length,9),x=0;x<w;x++)h.words[x]=a.words[x];if(h.length=w,a.length<=9){a.words[0]=0,a.length=1;return}var B=a.words[9];for(h.words[h.length++]=B&p,x=10;x<a.length;x++){var M=a.words[x]|0;a.words[x-10]=(M&p)<<4|B>>>22,B=M}B>>>=22,a.words[x-10]=B,B===0&&a.length>10?a.length-=10:a.length-=9},rt.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,p=0;p<a.length;p++){var w=a.words[p]|0;h+=w*977,a.words[p]=h&67108863,h=w*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ot(){tt.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ot,tt);function z(){tt.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(z,tt);function et(){tt.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(et,tt),et.prototype.imulK=function(a){for(var h=0,p=0;p<a.length;p++){var w=(a.words[p]|0)*19+h,x=w&67108863;w>>>=26,a.words[p]=x,h=w}return h!==0&&(a.words[a.length++]=h),a},i._prime=function(a){if(Z[a])return Z[a];var h;if(a==="k256")h=new rt;else if(a==="p224")h=new ot;else if(a==="p192")h=new z;else if(a==="p25519")h=new et;else throw new Error("Unknown prime "+a);return Z[a]=h,h};function Y(m){if(typeof m=="string"){var a=i._prime(m);this.m=a.p,this.prime=a}else r(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}Y.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},Y.prototype._verify2=function(a,h){r((a.negative|h.negative)===0,"red works only with positives"),r(a.red&&a.red===h.red,"red works only with red numbers")},Y.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(_(a,a.umod(this.m)._forceRed(this)),a)},Y.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},Y.prototype.add=function(a,h){this._verify2(a,h);var p=a.add(h);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},Y.prototype.iadd=function(a,h){this._verify2(a,h);var p=a.iadd(h);return p.cmp(this.m)>=0&&p.isub(this.m),p},Y.prototype.sub=function(a,h){this._verify2(a,h);var p=a.sub(h);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},Y.prototype.isub=function(a,h){this._verify2(a,h);var p=a.isub(h);return p.cmpn(0)<0&&p.iadd(this.m),p},Y.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},Y.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},Y.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},Y.prototype.isqr=function(a){return this.imul(a,a.clone())},Y.prototype.sqr=function(a){return this.mul(a,a)},Y.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var p=this.m.add(new i(1)).iushrn(2);return this.pow(a,p)}for(var w=this.m.subn(1),x=0;!w.isZero()&&w.andln(1)===0;)x++,w.iushrn(1);r(!w.isZero());var B=new i(1).toRed(this),M=B.redNeg(),y=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,y).cmp(M)!==0;)f.redIAdd(M);for(var E=this.pow(f,w),V=this.pow(a,w.addn(1).iushrn(1)),H=this.pow(a,w),X=x;H.cmp(B)!==0;){for(var yt=H,ft=0;yt.cmp(B)!==0;ft++)yt=yt.redSqr();r(ft<X);var ct=this.pow(E,new i(1).iushln(X-ft-1));V=V.redMul(ct),E=ct.redSqr(),H=H.redMul(E),X=ft}return V},Y.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},Y.prototype.pow=function(a,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var p=4,w=new Array(1<<p);w[0]=new i(1).toRed(this),w[1]=a;for(var x=2;x<w.length;x++)w[x]=this.mul(w[x-1],a);var B=w[0],M=0,y=0,f=h.bitLength()%26;for(f===0&&(f=26),x=h.length-1;x>=0;x--){for(var E=h.words[x],V=f-1;V>=0;V--){var H=E>>V&1;if(B!==w[0]&&(B=this.sqr(B)),H===0&&M===0){y=0;continue}M<<=1,M|=H,y++,!(y!==p&&(x!==0||V!==0))&&(B=this.mul(B,w[M]),y=0,M=0)}f=26}return B},Y.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},Y.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},i.mont=function(a){return new Q(a)};function Q(m){Y.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(Q,Y),Q.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},Q.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},Q.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var p=a.imul(h),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},Q.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new i(0)._forceRed(this);var p=a.mul(h),w=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(w).iushrn(this.shift),B=x;return x.cmp(this.m)>=0?B=x.isub(this.m):x.cmpn(0)<0&&(B=x.iadd(this.m)),B._forceRed(this)},Q.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(n,De)})(us);var Yo=us.exports;const Js=qn(Yo);var Hi={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=dt,r=e.Buffer;function s(o,c){for(var d in o)c[d]=o[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,c,d){return r(o,c,d)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,c,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,d)},i.alloc=function(o,c,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var b=r(o);return c!==void 0?typeof d=="string"?b.fill(c,d):b.fill(c):b.fill(0),b},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Hi,Hi.exports);var Xo=Hi.exports,Sn=Xo.Buffer;function bu(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,c=n.charAt(0),d=Math.log(o)/Math.log(256),b=Math.log(256)/Math.log(o);function _(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Sn.from(S)),!Sn.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var A=0,C=0,L=0,F=S.length;L!==F&&S[L]===0;)L++,A++;for(var D=(F-L)*b+1>>>0,O=new Uint8Array(D);L!==F;){for(var K=S[L],Z=0,tt=D-1;(K!==0||Z<C)&&tt!==-1;tt--,Z++)K+=256*O[tt]>>>0,O[tt]=K%o>>>0,K=K/o>>>0;if(K!==0)throw new Error("Non-zero carry");C=Z,L++}for(var rt=D-C;rt!==D&&O[rt]===0;)rt++;for(var ot=c.repeat(A);rt<D;++rt)ot+=n.charAt(O[rt]);return ot}function I(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Sn.alloc(0);for(var A=0,C=0,L=0;S[A]===c;)C++,A++;for(var F=(S.length-A)*d+1>>>0,D=new Uint8Array(F);A<S.length;){var O=S.charCodeAt(A);if(O>255)return;var K=t[O];if(K===255)return;for(var Z=0,tt=F-1;(K!==0||Z<L)&&tt!==-1;tt--,Z++)K+=o*D[tt]>>>0,D[tt]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");L=Z,A++}for(var rt=F-L;rt!==F&&D[rt]===0;)rt++;var ot=Sn.allocUnsafe(C+(F-rt));ot.fill(0,0,C);for(var z=C;rt!==F;)ot[z++]=D[rt++];return ot}function k(S){var A=I(S);if(A)return A;throw new Error("Non-base"+o+" character")}return{encode:_,decodeUnsafe:I,decode:k}}var vu=bu,xu=vu,Eu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Su=xu(Eu);const de=qn(Su),Qs=Mo;var he={},Bn=Xo.Buffer;function Bu(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var s=n.charAt(r),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=r}var o=n.length,c=n.charAt(0),d=Math.log(o)/Math.log(256),b=Math.log(256)/Math.log(o);function _(S){if((Array.isArray(S)||S instanceof Uint8Array)&&(S=Bn.from(S)),!Bn.isBuffer(S))throw new TypeError("Expected Buffer");if(S.length===0)return"";for(var A=0,C=0,L=0,F=S.length;L!==F&&S[L]===0;)L++,A++;for(var D=(F-L)*b+1>>>0,O=new Uint8Array(D);L!==F;){for(var K=S[L],Z=0,tt=D-1;(K!==0||Z<C)&&tt!==-1;tt--,Z++)K+=256*O[tt]>>>0,O[tt]=K%o>>>0,K=K/o>>>0;if(K!==0)throw new Error("Non-zero carry");C=Z,L++}for(var rt=D-C;rt!==D&&O[rt]===0;)rt++;for(var ot=c.repeat(A);rt<D;++rt)ot+=n.charAt(O[rt]);return ot}function I(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return Bn.alloc(0);for(var A=0,C=0,L=0;S[A]===c;)C++,A++;for(var F=(S.length-A)*d+1>>>0,D=new Uint8Array(F);A<S.length;){var O=S.charCodeAt(A);if(O>255)return;var K=t[O];if(K===255)return;for(var Z=0,tt=F-1;(K!==0||Z<L)&&tt!==-1;tt--,Z++)K+=o*D[tt]>>>0,D[tt]=K%256>>>0,K=K/256>>>0;if(K!==0)throw new Error("Non-zero carry");L=Z,A++}for(var rt=F-L;rt!==F&&D[rt]===0;)rt++;var ot=Bn.allocUnsafe(C+(F-rt));ot.fill(0,0,C);for(var z=C;rt!==F;)ot[z++]=D[rt++];return ot}function k(S){var A=I(S);if(A)return A;throw new Error("Non-base"+o+" character")}return{encode:_,decodeUnsafe:I,decode:k}}var _u=Bu,Au=_u,ku="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Iu=Au(ku);function er(n,t,e){return t<=n&&n<=e}function Hn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Mu(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=i&1023,d=o&1023;s.push(65536+(c<<10)+d),r+=1}else s.push(65533)}r+=1}return s}function Ru(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var Un=-1;function fs(n){this.tokens=[].slice.call(n)}fs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():Un},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Wr=-1;function Mi(n,t){if(n)throw TypeError("Decoder error");return t||65533}var Tn="utf-8";function Fn(n,t){if(!(this instanceof Fn))return new Fn(n,t);if(n=n!==void 0?String(n).toLowerCase():Tn,n!==Tn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Hn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}Fn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Hn(e),this._streaming||(this._decoder=new Cu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new fs(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Wr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Wr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Ru(i)}};function Nn(n,t){if(!(this instanceof Nn))return new Nn(n,t);if(n=n!==void 0?String(n).toLowerCase():Tn,n!==Tn)throw new Error("Encoding not supported. Only utf-8 is supported");t=Hn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}Nn.prototype={encode:function(t,e){t=t?String(t):"",e=Hn(e),this._streaming||(this._encoder=new Lu(this._options)),this._streaming=!!e.stream;for(var r=[],s=new fs(Mu(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Wr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Wr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Cu(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(c,d){if(d===Un&&s!==0)return s=0,Mi(t);if(d===Un)return Wr;if(s===0){if(er(d,0,127))return d;if(er(d,194,223))s=1,e=d-192;else if(er(d,224,239))d===224&&(i=160),d===237&&(o=159),s=2,e=d-224;else if(er(d,240,244))d===240&&(i=144),d===244&&(o=143),s=3,e=d-240;else return Mi(t);return e=e<<6*s,null}if(!er(d,i,o))return e=s=r=0,i=128,o=191,c.prepend(d),Mi(t);if(i=128,o=191,r+=1,e+=d-128<<6*(s-r),r!==s)return null;var b=e;return e=s=r=0,b}}function Lu(n){n.fatal,this.handler=function(t,e){if(e===Un)return Wr;if(er(e,0,127))return e;var r,s;er(e,128,2047)?(r=1,s=192):er(e,2048,65535)?(r=2,s=224):er(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const Uu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:Fn,TextEncoder:Nn},Symbol.toStringTag,{value:"Module"})),Tu=es(Uu);var Fu=De&&De.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),Nu=De&&De.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),je=De&&De.__decorate||function(n,t,e,r){var s=arguments.length,i=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},Ou=De&&De.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&Fu(t,n,e);return Nu(t,n),t},Jo=De&&De.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(he,"__esModule",{value:!0});var Qo=he.deserializeUnchecked=sa=he.deserialize=ia=he.serialize=he.BinaryReader=he.BinaryWriter=he.BorshError=he.baseDecode=he.baseEncode=void 0;const lr=Jo(Yo),ta=Jo(Iu),Pu=Ou(Tu),zu=typeof TextDecoder!="function"?Pu.TextDecoder:TextDecoder,Du=new zu("utf-8",{fatal:!0});function qu(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),ta.default.encode(Buffer.from(n))}he.baseEncode=qu;function Ku(n){return Buffer.from(ta.default.decode(n))}he.baseDecode=Ku;const Ri=1024;class Ee extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}he.BorshError=Ee;class ea{constructor(){this.buf=Buffer.alloc(Ri),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Ri)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new lr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Ri)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}he.BinaryWriter=ea;function Ze(n,t,e){const r=e.value;e.value=function(...s){try{return r.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Ee("Reached the end of buffer when deserializing")}throw i}}}class Le{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new lr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new lr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new lr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new lr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Ee(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Du.decode(e)}catch(r){throw new Ee(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let s=0;s<e;++s)r.push(t());return r}}je([Ze],Le.prototype,"readU8",null);je([Ze],Le.prototype,"readU16",null);je([Ze],Le.prototype,"readU32",null);je([Ze],Le.prototype,"readU64",null);je([Ze],Le.prototype,"readU128",null);je([Ze],Le.prototype,"readU256",null);je([Ze],Le.prototype,"readU512",null);je([Ze],Le.prototype,"readString",null);je([Ze],Le.prototype,"readFixedArray",null);je([Ze],Le.prototype,"readArray",null);he.BinaryReader=Le;function ra(n){return n.charAt(0).toUpperCase()+n.slice(1)}function pr(n,t,e,r,s){try{if(typeof r=="string")s[`write${ra(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Ee(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Ee(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)pr(n,null,e[i],r[0],s)}else s.writeArray(e,i=>{pr(n,t,i,r[0],s)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),pr(n,t,e,r.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{pr(n,t,o,r.key,s),pr(n,t,i,r.value,s)});break}default:throw new Ee(`FieldType ${r} unrecognized`)}else na(n,e,s)}catch(i){throw i instanceof Ee&&i.addToFieldPath(t),i}}function na(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new Ee(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([s,i])=>{pr(n,s,t[s],i,e)});else if(r.kind==="enum"){const s=t[r.field];for(let i=0;i<r.values.length;++i){const[o,c]=r.values[i];if(o===s){e.writeU8(i),pr(n,o,t[o],c,e);break}}}else throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function $u(n,t,e=ea){const r=new e;return na(n,t,r),r.toArray()}var ia=he.serialize=$u;function gr(n,t,e,r){try{if(typeof e=="string")return r[`read${ra(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(gr(n,null,e[0],r));return s}else return r.readArray(()=>gr(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?gr(n,t,e.type,r):void 0;if(e.kind==="map"){let s=new Map;const i=r.readU32();for(let o=0;o<i;o++){const c=gr(n,t,e.key,r),d=gr(n,t,e.value,r);s.set(c,d)}return s}return ls(n,e,r)}catch(s){throw s instanceof Ee&&s.addToFieldPath(t),s}}function ls(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new Ee(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const s={};for(const[i,o]of n.get(t).fields)s[i]=gr(n,i,o,e);return new t(s)}if(r.kind==="enum"){const s=e.readU8();if(s>=r.values.length)throw new Ee(`Enum index: ${s} is out of range`);const[i,o]=r.values[s],c=gr(n,i,o,e);return new t({[i]:c})}throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Hu(n,t,e,r=Le){const s=new r(e),i=ls(n,t,s);if(s.offset<e.length)throw new Ee(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var sa=he.deserialize=Hu;function Wu(n,t,e,r=Le){const s=new r(e);return ls(n,t,s)}Qo=he.deserializeUnchecked=Wu;var N={};Object.defineProperty(N,"__esModule",{value:!0});N.s16=N.s8=N.nu64be=N.u48be=N.u40be=N.u32be=N.u24be=N.u16be=fe=N.nu64=N.u48=N.u40=st=N.u32=N.u24=Fe=N.u16=pt=N.u8=vr=N.offset=N.greedy=N.Constant=N.UTF8=N.CString=N.Blob=N.Boolean=N.BitField=N.BitStructure=N.VariantLayout=N.Union=N.UnionLayoutDiscriminator=N.UnionDiscriminator=N.Structure=N.Sequence=N.DoubleBE=N.Double=N.FloatBE=N.Float=N.NearInt64BE=N.NearInt64=N.NearUInt64BE=N.NearUInt64=N.IntBE=N.Int=N.UIntBE=N.UInt=N.OffsetLayout=N.GreedyCount=N.ExternalLayout=N.bindConstructorLayout=N.nameWithProperty=oa=N.Layout=N.uint8ArrayToBuffer=N.checkUint8Array=void 0;N.constant=N.utf8=N.cstr=Et=N.blob=N.unionLayoutDiscriminator=N.union=xe=N.seq=N.bits=J=N.struct=N.f64be=N.f64=N.f32be=N.f32=N.ns64be=N.s48be=N.s40be=N.s32be=N.s24be=N.s16be=Ie=N.ns64=N.s48=N.s40=N.s32=N.s24=void 0;const hs=dt;function Yr(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}N.checkUint8Array=Yr;function bt(n){return Yr(n),hs.Buffer.from(n.buffer,n.byteOffset,n.length)}N.uint8ArrayToBuffer=bt;class vt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var oa=N.Layout=vt;function ds(n,t){return t.property?n+"["+t.property+"]":n}N.nameWithProperty=ds;function Vu(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof vt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}N.bindConstructorLayout=Vu;class Be extends vt{isCount(){throw new Error("ExternalLayout is abstract")}}N.ExternalLayout=Be;class aa extends Be{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Yr(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}N.GreedyCount=aa;class ps extends Be{constructor(t,e=0,r){if(!(t instanceof vt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ne||this.layout instanceof ze}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}N.OffsetLayout=ps;class Ne extends vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readUIntLE(e,this.span)}encode(t,e,r=0){return bt(e).writeUIntLE(t,r,this.span),this.span}}N.UInt=Ne;class ze extends vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readUIntBE(e,this.span)}encode(t,e,r=0){return bt(e).writeUIntBE(t,r,this.span),this.span}}N.UIntBE=ze;class Ar extends vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readIntLE(e,this.span)}encode(t,e,r=0){return bt(e).writeIntLE(t,r,this.span),this.span}}N.Int=Ar;class Xr extends vt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return bt(t).readIntBE(e,this.span)}encode(t,e,r=0){return bt(e).writeIntBE(t,r,this.span),this.span}}N.IntBE=Xr;const Wi=Math.pow(2,32);function Wn(n){const t=Math.floor(n/Wi),e=n-t*Wi;return{hi32:t,lo32:e}}function Vn(n,t){return n*Wi+t}class ca extends vt{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return Vn(i,s)}encode(t,e,r=0){const s=Wn(t),i=bt(e);return i.writeUInt32LE(s.lo32,r),i.writeUInt32LE(s.hi32,r+4),8}}N.NearUInt64=ca;class ua extends vt{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return Vn(s,i)}encode(t,e,r=0){const s=Wn(t),i=bt(e);return i.writeUInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}N.NearUInt64BE=ua;class fa extends vt{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readUInt32LE(e),i=r.readInt32LE(e+4);return Vn(i,s)}encode(t,e,r=0){const s=Wn(t),i=bt(e);return i.writeUInt32LE(s.lo32,r),i.writeInt32LE(s.hi32,r+4),8}}N.NearInt64=fa;class la extends vt{constructor(t){super(8,t)}decode(t,e=0){const r=bt(t),s=r.readInt32BE(e),i=r.readUInt32BE(e+4);return Vn(s,i)}encode(t,e,r=0){const s=Wn(t),i=bt(e);return i.writeInt32BE(s.hi32,r),i.writeUInt32BE(s.lo32,r+4),8}}N.NearInt64BE=la;class ha extends vt{constructor(t){super(4,t)}decode(t,e=0){return bt(t).readFloatLE(e)}encode(t,e,r=0){return bt(e).writeFloatLE(t,r),4}}N.Float=ha;class da extends vt{constructor(t){super(4,t)}decode(t,e=0){return bt(t).readFloatBE(e)}encode(t,e,r=0){return bt(e).writeFloatBE(t,r),4}}N.FloatBE=da;class pa extends vt{constructor(t){super(8,t)}decode(t,e=0){return bt(t).readDoubleLE(e)}encode(t,e,r=0){return bt(e).writeDoubleLE(t,r),8}}N.Double=pa;class ga extends vt{constructor(t){super(8,t)}decode(t,e=0){return bt(t).readDoubleBE(e)}encode(t,e,r=0){return bt(e).writeDoubleBE(t,r),8}}N.DoubleBE=ga;class ma extends vt{constructor(t,e,r){if(!(t instanceof vt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof Be&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof Be)&&0<t.span&&(s=e*t.span),super(s,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,s=this.count;if(s instanceof Be&&(s=s.decode(t,e)),0<this.elementLayout.span)r=s*this.elementLayout.span;else{let i=0;for(;i<s;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let s=0,i=this.count;for(i instanceof Be&&(i=i.decode(t,e));s<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return r}encode(t,e,r=0){const s=this.elementLayout,i=t.reduce((o,c)=>o+s.encode(c,e,r+o),0);return this.count instanceof Be&&this.count.encode(t.length,e,r),i}}N.Sequence=ma;class ya extends vt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof vt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){Yr(t);const r=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(r[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const s=r;let i=0,o=0;for(const c of this.fields){let d=c.span;if(o=0<d?d:0,c.property!==void 0){const b=t[c.property];b!==void 0&&(o=c.encode(b,e,r),0>d&&(d=c.getSpan(e,r)))}i=r,r+=d}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}N.Structure=ya;class gs{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}N.UnionDiscriminator=gs;class On extends gs{constructor(t,e){if(!(t instanceof Be&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}N.UnionLayoutDiscriminator=On;class ms extends vt{constructor(t,e,r){let s;if(t instanceof Ne||t instanceof ze)s=new On(new ps(t));else if(t instanceof Be&&t.isCount())s=new On(t);else if(t instanceof gs)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof vt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Ne||t instanceof ze)&&(i+=s.layout.span)),super(i,r),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof Ne||t instanceof ze,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return o(c)},this.configGetSourceVariant=function(c){o=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const c=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=s.layout.span),r=this.makeDestinationObject(),r[s.property]=i,r[c.property]=c.decode(t,e+d)}else r=o.decode(t,e);return r}encode(t,e,r=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,r),c+o.encode(t[o.property],e,r+c)}return s.encode(t,e,r)}addVariant(t,e,r){const s=new wa(this,t,e,r);return this.registry[t]=s,s}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}N.Union=ms;class wa extends vt{constructor(t,e,r,s){if(!(t instanceof ms))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&s===void 0&&(s=r,r=null),r){if(!(r instanceof vt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+r)),r+s}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+s):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,r+s),i+=this.layout.getSpan(e,r+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}N.VariantLayout=wa;function Fr(n){return 0>n&&(n+=4294967296),n}class ys extends vt{constructor(t,e,r){if(!(t instanceof Ne||t instanceof ze))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Fr(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const r=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const s=this.word.decode(e,r);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new ws(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new ba(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}N.BitStructure=ys;class ws{constructor(t,e,r){if(!(t instanceof ys))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,c)=>o+c.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=Fr(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Fr(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Fr(t&this.valueMask))throw new TypeError(ds("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Fr(t<<this.start);this.container._packedSetValue(Fr(e&~this.wordMask)|r)}}N.BitField=ws;let ba=class extends ws{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};N.Boolean=ba;class va extends vt{constructor(t,e){if(!(t instanceof Be&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof Be||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),bt(t).slice(e,e+r)}encode(t,e,r){let s=this.length;if(this.length instanceof Be&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(ds("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(r+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=bt(t);return bt(e).write(i.toString("hex"),r,s,"hex"),this.length instanceof Be&&this.length.encode(s,e,r),s}}N.Blob=va;class xa extends vt{constructor(t){super(-1,t)}getSpan(t,e=0){Yr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return bt(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=hs.Buffer.from(t,"utf8"),i=s.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const o=bt(e);return s.copy(o,r),o[r+i]=0,i+1}}N.CString=xa;class Ea extends vt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Yr(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return bt(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const s=hs.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(bt(e),r),i}}N.UTF8=Ea;class Sa extends vt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}N.Constant=Sa;N.greedy=(n,t)=>new aa(n,t);var vr=N.offset=(n,t,e)=>new ps(n,t,e),pt=N.u8=n=>new Ne(1,n),Fe=N.u16=n=>new Ne(2,n);N.u24=n=>new Ne(3,n);var st=N.u32=n=>new Ne(4,n);N.u40=n=>new Ne(5,n);N.u48=n=>new Ne(6,n);var fe=N.nu64=n=>new ca(n);N.u16be=n=>new ze(2,n);N.u24be=n=>new ze(3,n);N.u32be=n=>new ze(4,n);N.u40be=n=>new ze(5,n);N.u48be=n=>new ze(6,n);N.nu64be=n=>new ua(n);N.s8=n=>new Ar(1,n);N.s16=n=>new Ar(2,n);N.s24=n=>new Ar(3,n);N.s32=n=>new Ar(4,n);N.s40=n=>new Ar(5,n);N.s48=n=>new Ar(6,n);var Ie=N.ns64=n=>new fa(n);N.s16be=n=>new Xr(2,n);N.s24be=n=>new Xr(3,n);N.s32be=n=>new Xr(4,n);N.s40be=n=>new Xr(5,n);N.s48be=n=>new Xr(6,n);N.ns64be=n=>new la(n);N.f32=n=>new ha(n);N.f32be=n=>new da(n);N.f64=n=>new pa(n);N.f64be=n=>new ga(n);var J=N.struct=(n,t,e)=>new ya(n,t,e);N.bits=(n,t,e)=>new ys(n,t,e);var xe=N.seq=(n,t,e)=>new ma(n,t,e);N.union=(n,t,e)=>new ms(n,t,e);N.unionLayoutDiscriminator=(n,t)=>new On(n,t);var Et=N.blob=(n,t)=>new va(n,t);N.cstr=n=>new xa(n);N.utf8=(n,t)=>new Ea(n,t);N.constant=(n,t)=>new Sa(n,t);var Gu=8078e3,ju=8078001,Zu=8078004,Yu=8078005,Xu=8078006,Ju=8078011;function Ba(n){return Array.isArray(n)?"%5B"+n.map(Ba).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function Qu([n,t]){return`${n}=${Ba(t)}`}function tf(n){const t=Object.entries(n).map(Qu).join("&");return btoa(t)}function ef(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${tf(t)}'`),`${e}\``}}var Dr=class extends Error{constructor(...[t,e]){let r,s;if(e){const{cause:o,...c}=e;o&&(s={cause:o}),Object.keys(c).length>0&&(r=c)}const i=ef(t,r);super(i,s);oe(this,"cause",this.cause);oe(this,"context");this.context={__code:t,...r},this.name="SolanaError"}};function rf(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function nf(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(rf(t,n));return n.write(t,e,0),e}})}function sf(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function Tr(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function of(n,t){if(Tr(n)!==Tr(t))throw new Dr(Zu);if(Tr(n)&&Tr(t)&&n.fixedSize!==t.fixedSize)throw new Dr(Yu,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!Tr(n)&&!Tr(t)&&n.maxSize!==t.maxSize)throw new Dr(Xu,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function af(n,t,e=0){if(t.length-e<=0)throw new Dr(Gu,{codecDescription:n})}function cf(n,t,e,r=0){const s=e.length-r;if(s<t)throw new Dr(ju,{bytesLength:s,codecDescription:n,expected:t})}function uf(n,t,e,r){if(r<t||r>e)throw new Dr(Ju,{codecDescription:n,max:e,min:t,value:r})}function _a(n){return(n==null?void 0:n.endian)!==1}function ff(n){return nf({fixedSize:n.size,write(t,e,r){n.range&&uf(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,_a(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function lf(n){return sf({fixedSize:n.size,read(t,e=0){af(n.name,t,e),cf(n.name,n.size,t,e);const r=new DataView(hf(t,e,n.size));return[n.get(r,_a(n.config)),e+n.size]}})}function hf(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var df=(n={})=>ff({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),pf=(n={})=>lf({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),gf=(n={})=>of(df(n),pf(n));class mf extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:c}=t,d=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function yf(n){return dn(n)&&typeof n[Symbol.iterator]=="function"}function dn(n){return typeof n=="object"&&n!=null}function Pn(n){return dn(n)&&!Array.isArray(n)}function qe(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function wf(n){const{done:t,value:e}=n.next();return t?void 0:e}function bf(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:d=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${qe(r)}\``}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:d}}function*to(n,t,e,r){yf(n)||(n=[n]);for(const s of n){const i=bf(s,t,e,r);i&&(yield i)}}function*bs(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,c={path:r,branch:s,mask:o};i&&(n=t.coercer(n,c));let d="valid";for(const b of t.validator(n,c))b.explanation=e.message,d="not_valid",yield[b,void 0];for(let[b,_,I]of t.entries(n,c)){const k=bs(_,I,{path:b===void 0?r:[...r,b],branch:b===void 0?s:[...s,_],coerce:i,mask:o,message:e.message});for(const S of k)S[0]?(d=S[0].refinement!=null?"not_refined":"not_valid",yield[S[0],void 0]):i&&(_=S[1],b===void 0?n=_:n instanceof Map?n.set(b,_):n instanceof Set?n.add(_):dn(n)&&(_!==void 0||b in n)&&(n[b]=_))}if(d!=="not_valid")for(const b of t.refiner(n,c))b.explanation=e.message,d="not_refined",yield[b,void 0];d==="valid"&&(yield[void 0,n])}let Ye=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=d=>d,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(d,b)=>{const _=s(d,b);return to(_,b,this,d)}:this.validator=()=>[],i?this.refiner=(d,b)=>{const _=i(d,b);return to(_,b,this,d)}:this.refiner=()=>[]}assert(t,e){return vf(t,this,e)}create(t,e){return W(t,this,e)}is(t){return Aa(t,this)}mask(t,e){return xf(t,this,e)}validate(t,e={}){return pn(t,this,e)}};function vf(n,t,e){const r=pn(n,t,{message:e});if(r[0])throw r[0]}function W(n,t,e){const r=pn(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function xf(n,t,e){const r=pn(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Aa(n,t){return!pn(n,t)[0]}function pn(n,t,e={}){const r=bs(n,t,e),s=wf(r);return s[0]?[new mf(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function kr(n,t){return new Ye({type:n,schema:null,validator:t})}function Ef(){return kr("any",()=>!0)}function G(n){return new Ye({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${qe(t)}`}})}function Ve(){return kr("boolean",n=>typeof n=="boolean")}function vs(n){return kr("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${qe(t)}`)}function Lt(n){const t=qe(n),e=typeof n;return new Ye({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${qe(r)}`}})}function Sf(){return kr("never",()=>!1)}function j(n){return new Ye({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function T(){return kr("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${qe(n)}`)}function at(n){return new Ye({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function ka(n,t){return new Ye({type:"record",schema:null,*entries(e){if(dn(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return Pn(e)||`Expected an object, but received: ${qe(e)}`},coercer(e){return Pn(e)?{...e}:e}})}function $(){return kr("string",n=>typeof n=="string"||`Expected a string, but received: ${qe(n)}`)}function xs(n){const t=Sf();return new Ye({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${qe(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function q(n){const t=Object.keys(n);return new Ye({type:"type",schema:n,*entries(e){if(dn(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return Pn(e)||`Expected an object, but received: ${qe(e)}`},coercer(e){return Pn(e)?{...e}:e}})}function Se(n){const t=n.map(e=>e.type).join(" | ");return new Ye({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=bs(e,i,r),[c]=o;if(c[0])for(const[d]of o)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${qe(e)}`,...s]}})}function Jr(){return kr("unknown",()=>!0)}function gn(n,t,e){return new Ye({...n,coercer:(r,s)=>Aa(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var _n,Bf=new Uint8Array(16);function Ia(){if(!_n&&(_n=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!_n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _n(Bf)}const _f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Gn(n){return typeof n=="string"&&_f.test(n)}var ue=[];for(var Ci=0;Ci<256;++Ci)ue.push((Ci+256).toString(16).substr(1));function jn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ue[n[t+0]]+ue[n[t+1]]+ue[n[t+2]]+ue[n[t+3]]+"-"+ue[n[t+4]]+ue[n[t+5]]+"-"+ue[n[t+6]]+ue[n[t+7]]+"-"+ue[n[t+8]]+ue[n[t+9]]+"-"+ue[n[t+10]]+ue[n[t+11]]+ue[n[t+12]]+ue[n[t+13]]+ue[n[t+14]]+ue[n[t+15]]).toLowerCase();if(!Gn(e))throw TypeError("Stringified UUID is invalid");return e}var eo,Li,Ui=0,Ti=0;function Af(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||eo,o=n.clockseq!==void 0?n.clockseq:Li;if(i==null||o==null){var c=n.random||(n.rng||Ia)();i==null&&(i=eo=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=Li=(c[6]<<8|c[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),b=n.nsecs!==void 0?n.nsecs:Ti+1,_=d-Ui+(b-Ti)/1e4;if(_<0&&n.clockseq===void 0&&(o=o+1&16383),(_<0||d>Ui)&&n.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ui=d,Ti=b,Li=o,d+=122192928e5;var I=((d&268435455)*1e4+b)%4294967296;s[r++]=I>>>24&255,s[r++]=I>>>16&255,s[r++]=I>>>8&255,s[r++]=I&255;var k=d/4294967296*1e4&268435455;s[r++]=k>>>8&255,s[r++]=k&255,s[r++]=k>>>24&15|16,s[r++]=k>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var S=0;S<6;++S)s[r+S]=i[S];return t||jn(s)}function Ma(n){if(!Gn(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function kf(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var If="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Mf="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Ra(n,t,e){function r(s,i,o,c){if(typeof s=="string"&&(s=kf(s)),typeof i=="string"&&(i=Ma(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,o){c=c||0;for(var b=0;b<16;++b)o[c+b]=d[b];return o}return jn(d)}try{r.name=n}catch{}return r.DNS=If,r.URL=Mf,r}function Rf(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Cf(Lf(Uf(n),n.length*8))}function Cf(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function Ca(n){return(n+64>>>9<<4)+14+1}function Lf(n,t){n[t>>5]|=128<<t%32,n[Ca(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var c=e,d=r,b=s,_=i;e=me(e,r,s,i,n[o],7,-680876936),i=me(i,e,r,s,n[o+1],12,-389564586),s=me(s,i,e,r,n[o+2],17,606105819),r=me(r,s,i,e,n[o+3],22,-1044525330),e=me(e,r,s,i,n[o+4],7,-176418897),i=me(i,e,r,s,n[o+5],12,1200080426),s=me(s,i,e,r,n[o+6],17,-1473231341),r=me(r,s,i,e,n[o+7],22,-45705983),e=me(e,r,s,i,n[o+8],7,1770035416),i=me(i,e,r,s,n[o+9],12,-1958414417),s=me(s,i,e,r,n[o+10],17,-42063),r=me(r,s,i,e,n[o+11],22,-1990404162),e=me(e,r,s,i,n[o+12],7,1804603682),i=me(i,e,r,s,n[o+13],12,-40341101),s=me(s,i,e,r,n[o+14],17,-1502002290),r=me(r,s,i,e,n[o+15],22,1236535329),e=ye(e,r,s,i,n[o+1],5,-165796510),i=ye(i,e,r,s,n[o+6],9,-1069501632),s=ye(s,i,e,r,n[o+11],14,643717713),r=ye(r,s,i,e,n[o],20,-373897302),e=ye(e,r,s,i,n[o+5],5,-701558691),i=ye(i,e,r,s,n[o+10],9,38016083),s=ye(s,i,e,r,n[o+15],14,-660478335),r=ye(r,s,i,e,n[o+4],20,-405537848),e=ye(e,r,s,i,n[o+9],5,568446438),i=ye(i,e,r,s,n[o+14],9,-1019803690),s=ye(s,i,e,r,n[o+3],14,-187363961),r=ye(r,s,i,e,n[o+8],20,1163531501),e=ye(e,r,s,i,n[o+13],5,-1444681467),i=ye(i,e,r,s,n[o+2],9,-51403784),s=ye(s,i,e,r,n[o+7],14,1735328473),r=ye(r,s,i,e,n[o+12],20,-1926607734),e=we(e,r,s,i,n[o+5],4,-378558),i=we(i,e,r,s,n[o+8],11,-2022574463),s=we(s,i,e,r,n[o+11],16,1839030562),r=we(r,s,i,e,n[o+14],23,-35309556),e=we(e,r,s,i,n[o+1],4,-1530992060),i=we(i,e,r,s,n[o+4],11,1272893353),s=we(s,i,e,r,n[o+7],16,-155497632),r=we(r,s,i,e,n[o+10],23,-1094730640),e=we(e,r,s,i,n[o+13],4,681279174),i=we(i,e,r,s,n[o],11,-358537222),s=we(s,i,e,r,n[o+3],16,-722521979),r=we(r,s,i,e,n[o+6],23,76029189),e=we(e,r,s,i,n[o+9],4,-640364487),i=we(i,e,r,s,n[o+12],11,-421815835),s=we(s,i,e,r,n[o+15],16,530742520),r=we(r,s,i,e,n[o+2],23,-995338651),e=be(e,r,s,i,n[o],6,-198630844),i=be(i,e,r,s,n[o+7],10,1126891415),s=be(s,i,e,r,n[o+14],15,-1416354905),r=be(r,s,i,e,n[o+5],21,-57434055),e=be(e,r,s,i,n[o+12],6,1700485571),i=be(i,e,r,s,n[o+3],10,-1894986606),s=be(s,i,e,r,n[o+10],15,-1051523),r=be(r,s,i,e,n[o+1],21,-2054922799),e=be(e,r,s,i,n[o+8],6,1873313359),i=be(i,e,r,s,n[o+15],10,-30611744),s=be(s,i,e,r,n[o+6],15,-1560198380),r=be(r,s,i,e,n[o+13],21,1309151649),e=be(e,r,s,i,n[o+4],6,-145523070),i=be(i,e,r,s,n[o+11],10,-1120210379),s=be(s,i,e,r,n[o+2],15,718787259),r=be(r,s,i,e,n[o+9],21,-343485551),e=hr(e,c),r=hr(r,d),s=hr(s,b),i=hr(i,_)}return[e,r,s,i]}function Uf(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Ca(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function hr(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Tf(n,t){return n<<t|n>>>32-t}function Zn(n,t,e,r,s,i){return hr(Tf(hr(hr(t,n),hr(r,i)),s),e)}function me(n,t,e,r,s,i,o){return Zn(t&e|~t&r,n,t,s,i,o)}function ye(n,t,e,r,s,i,o){return Zn(t&r|e&~r,n,t,s,i,o)}function we(n,t,e,r,s,i,o){return Zn(t^e^r,n,t,s,i,o)}function be(n,t,e,r,s,i,o){return Zn(e^(t|~r),n,t,s,i,o)}var Ff=Ra("v3",48,Rf);function Nf(n,t,e){n=n||{};var r=n.random||(n.rng||Ia)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return jn(r)}function Of(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function Fi(n,t){return n<<t|n>>>32-t}function Pf(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),c=new Array(o),d=0;d<o;++d){for(var b=new Uint32Array(16),_=0;_<16;++_)b[_]=n[d*64+_*4]<<24|n[d*64+_*4+1]<<16|n[d*64+_*4+2]<<8|n[d*64+_*4+3];c[d]=b}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var I=0;I<o;++I){for(var k=new Uint32Array(80),S=0;S<16;++S)k[S]=c[I][S];for(var A=16;A<80;++A)k[A]=Fi(k[A-3]^k[A-8]^k[A-14]^k[A-16],1);for(var C=e[0],L=e[1],F=e[2],D=e[3],O=e[4],K=0;K<80;++K){var Z=Math.floor(K/20),tt=Fi(C,5)+Of(Z,L,F,D)+O+t[Z]+k[K]>>>0;O=D,D=F,F=Fi(L,30)>>>0,L=C,C=tt}e[0]=e[0]+C>>>0,e[1]=e[1]+L>>>0,e[2]=e[2]+F>>>0,e[3]=e[3]+D>>>0,e[4]=e[4]+O>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var zf=Ra("v5",80,Pf);const Df="00000000-0000-0000-0000-000000000000";function qf(n){if(!Gn(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Kf=Object.freeze(Object.defineProperty({__proto__:null,NIL:Df,parse:Ma,stringify:jn,v1:Af,v3:Ff,v4:Nf,v5:zf,validate:Gn,version:qf},Symbol.toStringTag,{value:"Module"})),La=es(Kf),$f=La.v4,Hf=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const s=typeof r.version=="number"?r.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:n};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof r.generator=="function"?r.generator:function(){return $f()};i.id=o(i,r)}else s===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var Wf=Hf;const Vf=La.v4,Gf=Wf,on=function(n,t){if(!(this instanceof on))return new on(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return Vf()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var jf=on;on.prototype.request=function(n,t,e,r){const s=this;let i=null;const o=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const b=typeof r=="function";try{i=Gf(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(_){if(b){r(_);return}throw _}if(!b)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(b){r(b);return}return this.callServer(d,function(b,_){s._parseResponse(b,_,r)}),i};on.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t){e();return}let r;try{r=JSON.parse(t,this.options.reviver)}catch(s){e(s);return}if(e.length===3)if(Array.isArray(r)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};e(null,r.filter(s),r.filter(i));return}else{e(null,r.error,r.result);return}e(null,r)};const Zf=qn(jf);var Ua={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(d,b,_){this.fn=d,this.context=b,this.once=_||!1}function i(d,b,_,I,k){if(typeof _!="function")throw new TypeError("The listener must be a function");var S=new s(_,I||d,k),A=e?e+b:b;return d._events[A]?d._events[A].fn?d._events[A]=[d._events[A],S]:d._events[A].push(S):(d._events[A]=S,d._eventsCount++),d}function o(d,b){--d._eventsCount===0?d._events=new r:delete d._events[b]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var b=[],_,I;if(this._eventsCount===0)return b;for(I in _=this._events)t.call(_,I)&&b.push(e?I.slice(1):I);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(_)):b},c.prototype.listeners=function(b){var _=e?e+b:b,I=this._events[_];if(!I)return[];if(I.fn)return[I.fn];for(var k=0,S=I.length,A=new Array(S);k<S;k++)A[k]=I[k].fn;return A},c.prototype.listenerCount=function(b){var _=e?e+b:b,I=this._events[_];return I?I.fn?1:I.length:0},c.prototype.emit=function(b,_,I,k,S,A){var C=e?e+b:b;if(!this._events[C])return!1;var L=this._events[C],F=arguments.length,D,O;if(L.fn){switch(L.once&&this.removeListener(b,L.fn,void 0,!0),F){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,_),!0;case 3:return L.fn.call(L.context,_,I),!0;case 4:return L.fn.call(L.context,_,I,k),!0;case 5:return L.fn.call(L.context,_,I,k,S),!0;case 6:return L.fn.call(L.context,_,I,k,S,A),!0}for(O=1,D=new Array(F-1);O<F;O++)D[O-1]=arguments[O];L.fn.apply(L.context,D)}else{var K=L.length,Z;for(O=0;O<K;O++)switch(L[O].once&&this.removeListener(b,L[O].fn,void 0,!0),F){case 1:L[O].fn.call(L[O].context);break;case 2:L[O].fn.call(L[O].context,_);break;case 3:L[O].fn.call(L[O].context,_,I);break;case 4:L[O].fn.call(L[O].context,_,I,k);break;default:if(!D)for(Z=1,D=new Array(F-1);Z<F;Z++)D[Z-1]=arguments[Z];L[O].fn.apply(L[O].context,D)}}return!0},c.prototype.on=function(b,_,I){return i(this,b,_,I,!1)},c.prototype.once=function(b,_,I){return i(this,b,_,I,!0)},c.prototype.removeListener=function(b,_,I,k){var S=e?e+b:b;if(!this._events[S])return this;if(!_)return o(this,S),this;var A=this._events[S];if(A.fn)A.fn===_&&(!k||A.once)&&(!I||A.context===I)&&o(this,S);else{for(var C=0,L=[],F=A.length;C<F;C++)(A[C].fn!==_||k&&!A[C].once||I&&A[C].context!==I)&&L.push(A[C]);L.length?this._events[S]=L.length===1?L[0]:L:o(this,S)}return this},c.prototype.removeAllListeners=function(b){var _;return b?(_=e?e+b:b,this._events[_]&&o(this,_)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(Ua);var Yf=Ua.exports;const Ta=qn(Yf);var Xf=class extends Ta{constructor(t,e){super();oe(this,"socket");this.socket=new window.WebSocket(t,e.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=r=>this.emit("message",r.data),this.socket.onerror=r=>this.emit("error",r),this.socket.onclose=r=>{this.emit("close",r.code,r.reason)}}send(t,e,r){const s=r||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,r){this.socket.addEventListener(t,e,r)}};function Jf(n,t){return new Xf(n,t)}var Qf=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},tl=class extends Ta{constructor(t,e="ws://localhost:8080",{autoconnect:r=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...c}={},d,b){super();oe(this,"address");oe(this,"rpc_id");oe(this,"queue");oe(this,"options");oe(this,"autoconnect");oe(this,"ready");oe(this,"reconnect");oe(this,"reconnect_timer_id");oe(this,"reconnect_interval");oe(this,"max_reconnects");oe(this,"rest_options");oe(this,"current_reconnects");oe(this,"generate_request_id");oe(this,"socket");oe(this,"webSocketFactory");oe(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=r,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=c,this.current_reconnects=0,this.generate_request_id=d||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),b?this.dataPack=b:this.dataPack=new Qf,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,r,s){return!s&&typeof r=="object"&&(s=r,r=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const c=this.generate_request_id(t,e),d={jsonrpc:"2.0",method:t,params:e||void 0,id:c};this.socket.send(this.dataPack.encode(d),s,b=>{if(b)return o(b);this.queue[c]={promise:[i,o]},r&&(this.queue[c].timeout=setTimeout(()=>{delete this.queue[c],o(new Error("reply timeout"))},r))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((r,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);r()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:r})=>{r instanceof ArrayBuffer&&(r=dt.Buffer.from(r).toString());try{r=this.dataPack.decode(r)}catch{return}if(r.notification&&this.listeners(r.notification).length){if(!Object.keys(r.params).length)return this.emit(r.notification);const s=[r.notification];if(r.params.constructor===Object)s.push(r.params);else for(let i=0;i<r.params.length;i++)s.push(r.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[r.id])return r.method?Promise.resolve().then(()=>{this.emit(r.method,r==null?void 0:r.params)}):void 0;"error"in r=="result"in r&&this.queue[r.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[r.id].timeout&&clearTimeout(this.queue[r.id].timeout),r.error?this.queue[r.id].promise[1](r.error):this.queue[r.id].promise[0](r.result),delete this.queue[r.id]}),this.socket.addEventListener("error",r=>this.emit("error",r)),this.socket.addEventListener("close",({code:r,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",r,s),0),this.ready=!1,this.socket=void 0,r!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",r,s),1))})}};class Fa extends _o{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,So(t);const r=ns(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),$r(i)}update(t){return Mn(this),this.iHash.update(t),this}digestInto(t){Mn(this),Br(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Na=(n,t,e)=>new Fa(n,t).update(e).digest();Na.create=(n,t)=>new Fa(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ro=(n,t)=>(n+(n>=0?t:-t)/Oa)/t;function el(n,t,e){const[[r,s],[i,o]]=t,c=ro(o*n,e),d=ro(-s*n,e);let b=n-c*r-d*i,_=-c*s-d*o;const I=b<nr,k=_<nr;I&&(b=-b),k&&(_=-_);const S=ln(Math.ceil(Lo(e)/2))+qr;if(b<nr||b>=S||_<nr||_>=S)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:I,k1:b,k2neg:k,k2:_}}function Vi(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function Ni(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return Er(e.lowS,"lowS"),Er(e.prehash,"prehash"),e.format!==void 0&&Vi(e.format),e}class rl extends Error{constructor(t=""){super(t)}}const tr={Err:rl,_tlv:{encode:(n,t)=>{const{Err:e}=tr;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=En(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?En(s.length/2|128):"";return En(n)+i+s+t},decode(n,t){const{Err:e}=tr;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const d=s&127;if(!d)throw new e("tlv.decode(long): indefinite length not supported");if(d>4)throw new e("tlv.decode(long): byte length is too big");const b=t.subarray(r,r+d);if(b.length!==d)throw new e("tlv.decode: length bytes not complete");if(b[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const _ of b)o=o<<8|_;if(r+=d,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=tr;if(n<nr)throw new t("integer: negative integers are not allowed");let e=En(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=tr;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return $n(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=tr,s=Dt("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:d}=r.decode(2,i),{v:b,l:_}=r.decode(2,d);if(_.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(b)}},hexFromSig(n){const{_tlv:t,_int:e}=tr,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},nr=BigInt(0),qr=BigInt(1),Oa=BigInt(2),An=BigInt(3),nl=BigInt(4);function Or(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=Dt("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function il(n,t={}){const e=jo("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o,n:c}=i;hn(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:d}=t;if(d&&(!r.is0(i.a)||typeof d.beta!="bigint"||!Array.isArray(d.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const b=za(r,s);function _(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function I(Q,m,a){const{x:h,y:p}=m.toAffine(),w=r.toBytes(h);if(Er(a,"isCompressed"),a){_();const x=!r.isOdd(p);return He(Pa(x),w)}else return He(Uint8Array.of(4),w,r.toBytes(p))}function k(Q){Pe(Q,void 0,"Point");const{publicKey:m,publicKeyUncompressed:a}=b,h=Q.length,p=Q[0],w=Q.subarray(1);if(h===m&&(p===2||p===3)){const x=r.fromBytes(w);if(!r.isValid(x))throw new Error("bad point: is not on curve, wrong x");const B=C(x);let M;try{M=r.sqrt(B)}catch(E){const V=E instanceof Error?": "+E.message:"";throw new Error("bad point: is not on curve, sqrt error"+V)}_();const y=r.isOdd(M);return(p&1)===1!==y&&(M=r.neg(M)),{x,y:M}}else if(h===a&&p===4){const x=r.BYTES,B=r.fromBytes(w.subarray(0,x)),M=r.fromBytes(w.subarray(x,x*2));if(!L(B,M))throw new Error("bad point: is not on curve");return{x:B,y:M}}else throw new Error(`bad point: got length ${h}, expected compressed=${m} or uncompressed=${a}`)}const S=t.toBytes||I,A=t.fromBytes||k;function C(Q){const m=r.sqr(Q),a=r.mul(m,Q);return r.add(r.add(a,r.mul(Q,i.a)),i.b)}function L(Q,m){const a=r.sqr(m),h=C(Q);return r.eql(a,h)}if(!L(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const F=r.mul(r.pow(i.a,An),nl),D=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(F,D)))throw new Error("bad curve params: a or b");function O(Q,m,a=!1){if(!r.isValid(m)||a&&r.is0(m))throw new Error(`bad point coordinate ${Q}`);return m}function K(Q){if(!(Q instanceof z))throw new Error("ProjectivePoint expected")}function Z(Q){if(!d||!d.basises)throw new Error("no endo");return el(Q,d.basises,s.ORDER)}const tt=Cn((Q,m)=>{const{X:a,Y:h,Z:p}=Q;if(r.eql(p,r.ONE))return{x:a,y:h};const w=Q.is0();m==null&&(m=w?r.ONE:r.inv(p));const x=r.mul(a,m),B=r.mul(h,m),M=r.mul(p,m);if(w)return{x:r.ZERO,y:r.ZERO};if(!r.eql(M,r.ONE))throw new Error("invZ was invalid");return{x,y:B}}),rt=Cn(Q=>{if(Q.is0()){if(t.allowInfinityPoint&&!r.is0(Q.Y))return;throw new Error("bad point: ZERO")}const{x:m,y:a}=Q.toAffine();if(!r.isValid(m)||!r.isValid(a))throw new Error("bad point: x or y not field elements");if(!L(m,a))throw new Error("bad point: equation left != right");if(!Q.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function ot(Q,m,a,h,p){return a=new z(r.mul(a.X,Q),a.Y,a.Z),m=Ln(h,m),a=Ln(p,a),m.add(a)}class z{constructor(m,a,h){this.X=O("x",m),this.Y=O("y",a,!0),this.Z=O("z",h),Object.freeze(this)}static CURVE(){return i}static fromAffine(m){const{x:a,y:h}=m||{};if(!m||!r.isValid(a)||!r.isValid(h))throw new Error("invalid affine point");if(m instanceof z)throw new Error("projective point not allowed");return r.is0(a)&&r.is0(h)?z.ZERO:new z(a,h,r.ONE)}static fromBytes(m){const a=z.fromAffine(A(Pe(m,void 0,"point")));return a.assertValidity(),a}static fromHex(m){return z.fromBytes(Dt("pointHex",m))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,a=!0){return Y.createCache(this,m),a||this.multiply(An),this}assertValidity(){rt(this)}hasEvenY(){const{y:m}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(m)}equals(m){K(m);const{X:a,Y:h,Z:p}=this,{X:w,Y:x,Z:B}=m,M=r.eql(r.mul(a,B),r.mul(w,p)),y=r.eql(r.mul(h,B),r.mul(x,p));return M&&y}negate(){return new z(this.X,r.neg(this.Y),this.Z)}double(){const{a:m,b:a}=i,h=r.mul(a,An),{X:p,Y:w,Z:x}=this;let B=r.ZERO,M=r.ZERO,y=r.ZERO,f=r.mul(p,p),E=r.mul(w,w),V=r.mul(x,x),H=r.mul(p,w);return H=r.add(H,H),y=r.mul(p,x),y=r.add(y,y),B=r.mul(m,y),M=r.mul(h,V),M=r.add(B,M),B=r.sub(E,M),M=r.add(E,M),M=r.mul(B,M),B=r.mul(H,B),y=r.mul(h,y),V=r.mul(m,V),H=r.sub(f,V),H=r.mul(m,H),H=r.add(H,y),y=r.add(f,f),f=r.add(y,f),f=r.add(f,V),f=r.mul(f,H),M=r.add(M,f),V=r.mul(w,x),V=r.add(V,V),f=r.mul(V,H),B=r.sub(B,f),y=r.mul(V,E),y=r.add(y,y),y=r.add(y,y),new z(B,M,y)}add(m){K(m);const{X:a,Y:h,Z:p}=this,{X:w,Y:x,Z:B}=m;let M=r.ZERO,y=r.ZERO,f=r.ZERO;const E=i.a,V=r.mul(i.b,An);let H=r.mul(a,w),X=r.mul(h,x),yt=r.mul(p,B),ft=r.add(a,h),ct=r.add(w,x);ft=r.mul(ft,ct),ct=r.add(H,X),ft=r.sub(ft,ct),ct=r.add(a,p);let Tt=r.add(w,B);return ct=r.mul(ct,Tt),Tt=r.add(H,yt),ct=r.sub(ct,Tt),Tt=r.add(h,p),M=r.add(x,B),Tt=r.mul(Tt,M),M=r.add(X,yt),Tt=r.sub(Tt,M),f=r.mul(E,ct),M=r.mul(V,yt),f=r.add(M,f),M=r.sub(X,f),f=r.add(X,f),y=r.mul(M,f),X=r.add(H,H),X=r.add(X,H),yt=r.mul(E,yt),ct=r.mul(V,ct),X=r.add(X,yt),yt=r.sub(H,yt),yt=r.mul(E,yt),ct=r.add(ct,yt),H=r.mul(X,ct),y=r.add(y,H),H=r.mul(Tt,ct),M=r.mul(ft,M),M=r.sub(M,H),H=r.mul(ft,X),f=r.mul(Tt,f),f=r.add(f,H),new z(M,y,f)}subtract(m){return this.add(m.negate())}is0(){return this.equals(z.ZERO)}multiply(m){const{endo:a}=t;if(!s.isValidNot0(m))throw new Error("invalid scalar: out of range");let h,p;const w=x=>Y.cached(this,x,B=>wr(z,B));if(a){const{k1neg:x,k1:B,k2neg:M,k2:y}=Z(m),{p:f,f:E}=w(B),{p:V,f:H}=w(y);p=E.add(H),h=ot(a.beta,f,V,x,M)}else{const{p:x,f:B}=w(m);h=x,p=B}return wr(z,[h,p])[0]}multiplyUnsafe(m){const{endo:a}=t,h=this;if(!s.isValid(m))throw new Error("invalid scalar: out of range");if(m===nr||h.is0())return z.ZERO;if(m===qr)return h;if(Y.hasCache(this))return this.multiply(m);if(a){const{k1neg:p,k1:w,k2neg:x,k2:B}=Z(m),{p1:M,p2:y}=tu(z,h,w,B);return ot(a.beta,M,y,p,x)}else return Y.unsafe(h,m)}multiplyAndAddUnsafe(m,a,h){const p=this.multiplyUnsafe(a).add(m.multiplyUnsafe(h));return p.is0()?void 0:p}toAffine(m){return tt(this,m)}isTorsionFree(){const{isTorsionFree:m}=t;return o===qr?!0:m?m(z,this):Y.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:m}=t;return o===qr?this:m?m(z,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(m=!0){return Er(m,"isCompressed"),this.assertValidity(),S(z,this,m)}toHex(m=!0){return br(this.toBytes(m))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(m=!0){return this.toBytes(m)}_setWindowSize(m){this.precompute(m)}static normalizeZ(m){return wr(z,m)}static msm(m,a){return Go(z,s,m,a)}static fromPrivateKey(m){return z.BASE.multiply(Or(s,m))}}z.BASE=new z(i.Gx,i.Gy,r.ONE),z.ZERO=new z(r.ZERO,r.ONE,r.ZERO),z.Fp=r,z.Fn=s;const et=s.BITS,Y=new Vo(z,t.endo?Math.ceil(et/2):et);return z.BASE.precompute(8),z}function Pa(n){return Uint8Array.of(n?2:3)}function za(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function sl(n,t={}){const{Fn:e}=n,r=t.randomBytes||is,s=Object.assign(za(n.Fp,e),{seed:$o(e.ORDER)});function i(S){try{return!!Or(e,S)}catch{return!1}}function o(S,A){const{publicKey:C,publicKeyUncompressed:L}=s;try{const F=S.length;return A===!0&&F!==C||A===!1&&F!==L?!1:!!n.fromBytes(S)}catch{return!1}}function c(S=r(s.seed)){return Xc(Pe(S,s.seed,"seed"),e.ORDER)}function d(S,A=!0){return n.BASE.multiply(Or(e,S)).toBytes(A)}function b(S){const A=c(S);return{secretKey:A,publicKey:d(A)}}function _(S){if(typeof S=="bigint")return!1;if(S instanceof n)return!0;const{secretKey:A,publicKey:C,publicKeyUncompressed:L}=s;if(e.allowedLengths||A===C)return;const F=Dt("key",S).length;return F===C||F===L}function I(S,A,C=!0){if(_(S)===!0)throw new Error("first arg must be private key");if(_(A)===!1)throw new Error("second arg must be public key");const L=Or(e,S);return n.fromHex(A).multiply(L).toBytes(C)}return Object.freeze({getPublicKey:d,getSharedSecret:I,keygen:b,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:S=>Or(e,S),precompute(S=8,A=n.BASE){return A.precompute(S,!1)}},lengths:s})}function ol(n,t,e={}){So(t),hn(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||is,s=e.hmac||((a,...h)=>Na(t,a,He(...h))),{Fp:i,Fn:o}=n,{ORDER:c,BITS:d}=o,{keygen:b,getPublicKey:_,getSharedSecret:I,utils:k,lengths:S}=sl(n,e),A={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},C="compact";function L(a){const h=c>>qr;return a>h}function F(a,h){if(!o.isValidNot0(h))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return h}function D(a,h){Vi(h);const p=S.signature,w=h==="compact"?p:h==="recovered"?p+1:void 0;return Pe(a,w,`${h} signature`)}class O{constructor(h,p,w){this.r=F("r",h),this.s=F("s",p),w!=null&&(this.recovery=w),Object.freeze(this)}static fromBytes(h,p=C){D(h,p);let w;if(p==="der"){const{r:y,s:f}=tr.toSig(Pe(h));return new O(y,f)}p==="recovered"&&(w=h[0],p="compact",h=h.subarray(1));const x=o.BYTES,B=h.subarray(0,x),M=h.subarray(x,x*2);return new O(o.fromBytes(B),o.fromBytes(M),w)}static fromHex(h,p){return this.fromBytes(Rn(h),p)}addRecoveryBit(h){return new O(this.r,this.s,h)}recoverPublicKey(h){const p=i.ORDER,{r:w,s:x,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(c*Oa<p&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");const y=B===2||B===3?w+c:w;if(!i.isValid(y))throw new Error("recovery id 2 or 3 invalid");const f=i.toBytes(y),E=n.fromBytes(He(Pa((B&1)===0),f)),V=o.inv(y),H=Z(Dt("msgHash",h)),X=o.create(-H*V),yt=o.create(x*V),ft=n.BASE.multiplyUnsafe(X).add(E.multiplyUnsafe(yt));if(ft.is0())throw new Error("point at infinify");return ft.assertValidity(),ft}hasHighS(){return L(this.s)}toBytes(h=C){if(Vi(h),h==="der")return Rn(tr.hexFromSig(this));const p=o.toBytes(this.r),w=o.toBytes(this.s);if(h==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return He(Uint8Array.of(this.recovery),p,w)}return He(p,w)}toHex(h){return br(this.toBytes(h))}assertValidity(){}static fromCompact(h){return O.fromBytes(Dt("sig",h),"compact")}static fromDER(h){return O.fromBytes(Dt("sig",h),"der")}normalizeS(){return this.hasHighS()?new O(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return br(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return br(this.toBytes("compact"))}}const K=e.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");const p=$n(h),w=h.length*8-d;return w>0?p>>BigInt(w):p},Z=e.bits2int_modN||function(h){return o.create(K(h))},tt=ln(d);function rt(a){return $i("num < 2^"+d,a,nr,tt),o.toBytes(a)}function ot(a,h){return Pe(a,void 0,"message"),h?Pe(t(a),void 0,"prehashed message"):a}function z(a,h,p){if(["recovered","canonical"].some(X=>X in p))throw new Error("sign() legacy options not supported");const{lowS:w,prehash:x,extraEntropy:B}=Ni(p,A);a=ot(a,x);const M=Z(a),y=Or(o,h),f=[rt(y),rt(M)];if(B!=null&&B!==!1){const X=B===!0?r(S.secretKey):B;f.push(Dt("extraEntropy",X))}const E=He(...f),V=M;function H(X){const yt=K(X);if(!o.isValidNot0(yt))return;const ft=o.inv(yt),ct=n.BASE.multiply(yt).toAffine(),Tt=o.create(ct.x);if(Tt===nr)return;const xt=o.create(ft*o.create(V+Tt*y));if(xt===nr)return;let St=(ct.x===Tt?0:2)|Number(ct.y&qr),Ue=xt;return w&&L(xt)&&(Ue=o.neg(xt),St^=1),new O(Tt,Ue,St)}return{seed:E,k2sig:H}}function et(a,h,p={}){a=Dt("message",a);const{seed:w,k2sig:x}=z(a,h,p);return qc(t.outputLen,o.BYTES,s)(w,x)}function Y(a){let h;const p=typeof a=="string"||fn(a),w=!p&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!p&&!w)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(w)h=new O(a.r,a.s);else if(p){try{h=O.fromBytes(Dt("sig",a),"der")}catch(x){if(!(x instanceof tr.Err))throw x}if(!h)try{h=O.fromBytes(Dt("sig",a),"compact")}catch{return!1}}return h||!1}function Q(a,h,p,w={}){const{lowS:x,prehash:B,format:M}=Ni(w,A);if(p=Dt("publicKey",p),h=ot(Dt("message",h),B),"strict"in w)throw new Error("options.strict was renamed to lowS");const y=M===void 0?Y(a):O.fromBytes(Dt("sig",a),M);if(y===!1)return!1;try{const f=n.fromBytes(p);if(x&&y.hasHighS())return!1;const{r:E,s:V}=y,H=Z(h),X=o.inv(V),yt=o.create(H*X),ft=o.create(E*X),ct=n.BASE.multiplyUnsafe(yt).add(f.multiplyUnsafe(ft));return ct.is0()?!1:o.create(ct.x)===E}catch{return!1}}function m(a,h,p={}){const{prehash:w}=Ni(p,A);return h=ot(h,w),O.fromBytes(a,"recovered").recoverPublicKey(h).toBytes()}return Object.freeze({keygen:b,getPublicKey:_,getSharedSecret:I,utils:k,lengths:S,Point:n,sign:et,verify:Q,recoverPublicKey:m,Signature:O,hash:t})}function al(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=_r(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function cl(n){const{CURVE:t,curveOpts:e}=al(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function ul(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,qo(e.Fn.ORDER,e.Fn.BITS))})}function fl(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=cl(n),i=il(t,e),o=ol(i,r,s);return ul(n,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ll(n,t){const e=r=>fl({...n,hash:r});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Es={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},hl={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},no=BigInt(2);function dl(n){const t=Es.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),d=BigInt(88),b=n*n*n%t,_=b*b*n%t,I=zt(_,e,t)*_%t,k=zt(I,e,t)*_%t,S=zt(k,no,t)*b%t,A=zt(S,s,t)*S%t,C=zt(A,i,t)*A%t,L=zt(C,c,t)*C%t,F=zt(L,d,t)*L%t,D=zt(F,c,t)*C%t,O=zt(D,e,t)*_%t,K=zt(O,o,t)*A%t,Z=zt(K,r,t)*b%t,tt=zt(Z,no,t);if(!Gi.eql(Gi.sqr(tt),n))throw new Error("Cannot find square root");return tt}const Gi=_r(Es.p,{sqrt:dl}),pl=ll({...Es,Fp:Gi,lowS:!0,endo:hl},Mo);Zr.utils.randomPrivateKey;const io=()=>{const n=Zr.utils.randomPrivateKey(),t=ji(n),e=new Uint8Array(64);return e.set(n),e.set(t,32),{publicKey:t,secretKey:e}},ji=Zr.getPublicKey;function so(n){try{return Zr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const Da=(n,t)=>Zr.sign(n,t.slice(0,32)),gl=Zr.verify,le=n=>dt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?dt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):dt.Buffer.from(n);class qa{constructor(t){Object.assign(this,t)}encode(){return dt.Buffer.from(ia(rn,this))}static decode(t){return sa(rn,this,t)}static decodeUnchecked(t){return Qo(rn,this,t)}}const rn=new Map;var Ka;const $a=32,ir=32;function ml(n){return n._bn!==void 0}let oo=1;class nt extends qa{constructor(t){if(super({}),this._bn=void 0,ml(t))this._bn=t._bn;else{if(typeof t=="string"){const e=de.decode(t);if(e.length!=ir)throw new Error("Invalid public key input");this._bn=new Js(e)}else this._bn=new Js(t);if(this._bn.byteLength()>ir)throw new Error("Invalid public key input")}}static unique(){const t=new nt(oo);return oo+=1,new nt(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return de.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(dt.Buffer);if(t.length===ir)return t;const e=dt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=dt.Buffer.concat([t.toBuffer(),dt.Buffer.from(e),r.toBuffer()]),i=Qs(s);return new nt(i)}static createProgramAddressSync(t,e){let r=dt.Buffer.alloc(0);t.forEach(function(i){if(i.length>$a)throw new TypeError("Max seed length exceeded");r=dt.Buffer.concat([r,le(i)])}),r=dt.Buffer.concat([r,e.toBuffer(),dt.Buffer.from("ProgramDerivedAddress")]);const s=Qs(r);if(so(s))throw new Error("Invalid seeds, address must fall off the curve");return new nt(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(dt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new nt(t);return so(e.toBytes())}}Ka=nt;nt.default=new Ka("11111111111111111111111111111111");rn.set(nt,{kind:"struct",fields:[["_bn","u256"]]});new nt("BPFLoader1111111111111111111111111111111111");const xr=1232,Yn=127,an=64;class Ss extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ss.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Bs extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Bs.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Pr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Pr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class cn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const wt=(n="publicKey")=>Et(32,n),yl=(n="signature")=>Et(64,n),zr=(n="string")=>{const t=J([st("length"),st("lengthPadding"),Et(vr(st(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const d={chars:dt.Buffer.from(i,"utf8")};return r(d,o,c)},s.alloc=i=>st().span+st().span+dt.Buffer.from(i,"utf8").length,s},wl=(n="authorized")=>J([wt("staker"),wt("withdrawer")],n),bl=(n="lockup")=>J([Ie("unixTimestamp"),Ie("epoch"),wt("custodian")],n),vl=(n="voteInit")=>J([wt("nodePubkey"),wt("authorizedVoter"),wt("authorizedWithdrawer"),pt("commission")],n),xl=(n="voteAuthorizeWithSeedArgs")=>J([st("voteAuthorizationType"),wt("currentAuthorityDerivedKeyOwnerPubkey"),zr("currentAuthorityDerivedKeySeed"),wt("newAuthorized")],n);function Ha(n,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return Ha({layout:s},t[s.property]);return 0};let r=0;return n.layout.fields.forEach(s=>{r+=e(s)}),r}function Me(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Re(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function Rt(n,t){if(!n)throw new Error(t||"Assertion failed")}class Xn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const c=o.toBase58();let d=r.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,d)),d},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const d=s(c.pubkey);d.isSigner||(d.isSigner=c.isSigner),d.isWritable||(d.isWritable=c.isWritable)}}return new Xn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];Rt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),s=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{Rt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];Rt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([d])=>new nt(d)),...r.map(([d])=>new nt(d)),...s.map(([d])=>new nt(d)),...i.map(([d])=>new nt(d))];return[o,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new nt(i),d=t.findIndex(b=>b.equals(c));d>=0&&(Rt(d<256,"Max lookup table index exceeded"),r.push(d),s.push(c),this.keyMetaMap.delete(i))}return[r,s]}}const Wa="Reached end of buffer unexpectedly";function rr(n){if(n.length===0)throw new Error(Wa);return n.shift()}function Ce(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(Wa);return n.splice(...t)}class Ge{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new nt(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:de.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new cn(this.staticAccountKeys)}static compile(t){const e=Xn.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new cn(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:de.encode(c.data)}));return new Ge({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Re(e,t);const r=this.instructions.map(I=>{const{accounts:k,programIdIndex:S}=I,A=Array.from(de.decode(I.data));let C=[];Re(C,k.length);let L=[];return Re(L,A.length),{programIdIndex:S,keyIndicesCount:dt.Buffer.from(C),keyIndices:k,dataLength:dt.Buffer.from(L),data:A}});let s=[];Re(s,r.length);let i=dt.Buffer.alloc(xr);dt.Buffer.from(s).copy(i);let o=s.length;r.forEach(I=>{const S=J([pt("programIdIndex"),Et(I.keyIndicesCount.length,"keyIndicesCount"),xe(pt("keyIndex"),I.keyIndices.length,"keyIndices"),Et(I.dataLength.length,"dataLength"),xe(pt("userdatum"),I.data.length,"data")]).encode(I,i,o);o+=S}),i=i.slice(0,o);const c=J([Et(1,"numRequiredSignatures"),Et(1,"numReadonlySignedAccounts"),Et(1,"numReadonlyUnsignedAccounts"),Et(e.length,"keyCount"),xe(wt("key"),t,"keys"),wt("recentBlockhash")]),d={numRequiredSignatures:dt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:dt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:dt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:dt.Buffer.from(e),keys:this.accountKeys.map(I=>le(I.toBytes())),recentBlockhash:de.decode(this.recentBlockhash)};let b=dt.Buffer.alloc(2048);const _=c.encode(d,b);return i.copy(b,_),b.slice(0,_+i.length)}static from(t){let e=[...t];const r=rr(e);if(r!==(r&Yn))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=rr(e),i=rr(e),o=Me(e);let c=[];for(let k=0;k<o;k++){const S=Ce(e,0,ir);c.push(new nt(dt.Buffer.from(S)))}const d=Ce(e,0,ir),b=Me(e);let _=[];for(let k=0;k<b;k++){const S=rr(e),A=Me(e),C=Ce(e,0,A),L=Me(e),F=Ce(e,0,L),D=de.encode(dt.Buffer.from(F));_.push({programIdIndex:S,accounts:C,data:D})}const I={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:de.encode(dt.Buffer.from(d)),accountKeys:c,instructions:_};return new Ge(I)}}class Vr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new cn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Xn.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const _ of i){const I=e.extractTableLookup(_);if(I!==void 0){const[k,{writable:S,readonly:A}]=I;r.push(k),s.writable.push(...S),s.readonly.push(...A)}}const[o,c]=e.getMessageComponents(),b=new cn(c,s).compileInstructions(t.instructions);return new Vr({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:r})}serialize(){const t=Array();Re(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Re(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Re(i,this.addressTableLookups.length);const o=J([pt("prefix"),J([pt("numRequiredSignatures"),pt("numReadonlySignedAccounts"),pt("numReadonlyUnsignedAccounts")],"header"),Et(t.length,"staticAccountKeysLength"),xe(wt(),this.staticAccountKeys.length,"staticAccountKeys"),wt("recentBlockhash"),Et(r.length,"instructionsLength"),Et(e.length,"serializedInstructions"),Et(i.length,"addressTableLookupsLength"),Et(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(xr),b=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(_=>_.toBytes()),recentBlockhash:de.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,b)}serializeInstructions(){let t=0;const e=new Uint8Array(xr);for(const r of this.compiledInstructions){const s=Array();Re(s,r.accountKeyIndexes.length);const i=Array();Re(i,r.data.length);const o=J([pt("programIdIndex"),Et(s.length,"encodedAccountKeyIndexesLength"),xe(pt(),r.accountKeyIndexes.length,"accountKeyIndexes"),Et(i.length,"encodedDataLength"),Et(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(xr);for(const r of this.addressTableLookups){const s=Array();Re(s,r.writableIndexes.length);const i=Array();Re(i,r.readonlyIndexes.length);const o=J([wt("accountKey"),Et(s.length,"encodedWritableIndexesLength"),xe(pt(),r.writableIndexes.length,"writableIndexes"),Et(i.length,"encodedReadonlyIndexesLength"),xe(pt(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=rr(e),s=r&Yn;Rt(r!==s,"Expected versioned message but received legacy message");const i=s;Rt(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:rr(e),numReadonlySignedAccounts:rr(e),numReadonlyUnsignedAccounts:rr(e)},c=[],d=Me(e);for(let A=0;A<d;A++)c.push(new nt(Ce(e,0,ir)));const b=de.encode(Ce(e,0,ir)),_=Me(e),I=[];for(let A=0;A<_;A++){const C=rr(e),L=Me(e),F=Ce(e,0,L),D=Me(e),O=new Uint8Array(Ce(e,0,D));I.push({programIdIndex:C,accountKeyIndexes:F,data:O})}const k=Me(e),S=[];for(let A=0;A<k;A++){const C=new nt(Ce(e,0,ir)),L=Me(e),F=Ce(e,0,L),D=Me(e),O=Ce(e,0,D);S.push({accountKey:C,writableIndexes:F,readonlyIndexes:O})}return new Vr({header:o,staticAccountKeys:c,recentBlockhash:b,compiledInstructions:I,addressTableLookups:S})}}const _s={deserializeMessageVersion(n){const t=n[0],e=t&Yn;return e===t?"legacy":e},deserialize:n=>{const t=_s.deserializeMessageVersion(n);if(t==="legacy")return Ge.from(n);if(t===0)return Vr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let Qe=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const El=dt.Buffer.alloc(an).fill(0);class qt{constructor(t){this.keys=void 0,this.programId=void 0,this.data=dt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class We{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new qt(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let C=0;C<e.length;C++)if(e[C].programId===void 0)throw new Error(`Transaction instruction index ${C} has undefined program id`);const s=[],i=[];e.forEach(C=>{C.keys.forEach(F=>{i.push({...F})});const L=C.programId.toString();s.includes(L)||s.push(L)}),s.forEach(C=>{i.push({pubkey:new nt(C),isSigner:!1,isWritable:!1})});const o=[];i.forEach(C=>{const L=C.pubkey.toString(),F=o.findIndex(D=>D.pubkey.toString()===L);F>-1?(o[F].isWritable=o[F].isWritable||C.isWritable,o[F].isSigner=o[F].isSigner||C.isSigner):o.push(C)}),o.sort(function(C,L){if(C.isSigner!==L.isSigner)return C.isSigner?-1:1;if(C.isWritable!==L.isWritable)return C.isWritable?-1:1;const F={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return C.pubkey.toBase58().localeCompare(L.pubkey.toBase58(),"en",F)});const c=o.findIndex(C=>C.pubkey.equals(r));if(c>-1){const[C]=o.splice(c,1);C.isSigner=!0,C.isWritable=!0,o.unshift(C)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const C of this.signatures){const L=o.findIndex(F=>F.pubkey.equals(C.publicKey));if(L>-1)o[L].isSigner||(o[L].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${C.publicKey.toString()}`)}let d=0,b=0,_=0;const I=[],k=[];o.forEach(({pubkey:C,isSigner:L,isWritable:F})=>{L?(I.push(C.toString()),d+=1,F||(b+=1)):(k.push(C.toString()),F||(_+=1))});const S=I.concat(k),A=e.map(C=>{const{data:L,programId:F}=C;return{programIdIndex:S.indexOf(F.toString()),accounts:C.keys.map(D=>S.indexOf(D.pubkey.toString())),data:de.encode(L)}});return A.forEach(C=>{Rt(C.programIdIndex>=0),C.accounts.forEach(L=>Rt(L>=0))}),new Ge({header:{numRequiredSignatures:d,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:_},accountKeys:S,recentBlockhash:t,instructions:A})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=Da(r,s.secretKey);this._addSignature(s.publicKey,le(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){Rt(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=dt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||(r.missing=[])).push(i):gl(s,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Re(r,e.length);const s=r.length+e.length*64+t.length,i=dt.Buffer.alloc(s);return Rt(e.length<256),dt.Buffer.from(r).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(Rt(o.length===64,"signature has invalid length"),dt.Buffer.from(o).copy(i,r.length+c*64))}),t.copy(i,r.length+e.length*64),Rt(i.length<=xr,`Transaction too large: ${i.length} > ${xr}`),i}get keys(){return Rt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return Rt(this.instructions.length===1),this.instructions[0].programId}get data(){return Rt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Me(e);let s=[];for(let i=0;i<r;i++){const o=Ce(e,0,an);s.push(de.encode(dt.Buffer.from(o)))}return We.populate(Ge.from(e),s)}static populate(t,e=[]){const r=new We;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==de.encode(El)?null:de.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(d=>d.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new qt({keys:i,programId:t.accountKeys[s.programIdIndex],data:de.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}class As{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)Rt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let s=0;s<t.header.numRequiredSignatures;s++)r.push(new Uint8Array(an));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Re(e,this.signatures.length);const r=J([Et(e.length,"encodedSignaturesLength"),xe(yl(),this.signatures.length,"signatures"),Et(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const r=[],s=Me(e);for(let o=0;o<s;o++)r.push(new Uint8Array(Ce(e,0,an)));const i=_s.deserialize(new Uint8Array(e));return new As(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=r.findIndex(o=>o.equals(s.publicKey));Rt(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Da(e,s.secretKey)}}addSignature(t,e){Rt(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));Rt(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const Sl=160,Bl=64,_l=Sl/Bl,Al=1e3/_l;new nt("SysvarC1ock11111111111111111111111111111111");new nt("SysvarEpochSchedu1e111111111111111111111111");new nt("Sysvar1nstructions1111111111111111111111111");const In=new nt("SysvarRecentB1ockHashes11111111111111111111"),zn=new nt("SysvarRent111111111111111111111111111111111");new nt("SysvarRewards111111111111111111111111111111");new nt("SysvarS1otHashes111111111111111111111111111");new nt("SysvarS1otHistory11111111111111111111111111");new nt("SysvarStakeHistory1111111111111111111111111");class Zi extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:c=`Unknown action '${(d=>d)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class it extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function Nr(n){return new Promise(t=>setTimeout(t,n))}function ve(n,t){const e=n.layout.span>=0?n.layout.span:Ha(n,t),r=dt.Buffer.alloc(e),s=Object.assign({instruction:n.index},t);return n.layout.encode(s,r),r}const Va=fe("lamportsPerSignature"),Ga=J([st("version"),st("state"),wt("authorizedPubkey"),wt("nonce"),J([Va],"feeCalculator")]),Yi=Ga.span;class Jn{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ga.decode(le(t),0);return new Jn({authorizedPubkey:new nt(e.authorizedPubkey),nonce:new nt(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function Gr(n){const t=Et(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=gf();return s.decode=(o,c)=>{const d=e(o,c);return i.decode(d)},s.encode=(o,c,d)=>{const b=i.encode(o);return r(b,c,d)},s}const ke=Object.freeze({Create:{index:0,layout:J([st("instruction"),Ie("lamports"),Ie("space"),wt("programId")])},Assign:{index:1,layout:J([st("instruction"),wt("programId")])},Transfer:{index:2,layout:J([st("instruction"),Gr("lamports")])},CreateWithSeed:{index:3,layout:J([st("instruction"),wt("base"),zr("seed"),Ie("lamports"),Ie("space"),wt("programId")])},AdvanceNonceAccount:{index:4,layout:J([st("instruction")])},WithdrawNonceAccount:{index:5,layout:J([st("instruction"),Ie("lamports")])},InitializeNonceAccount:{index:6,layout:J([st("instruction"),wt("authorized")])},AuthorizeNonceAccount:{index:7,layout:J([st("instruction"),wt("authorized")])},Allocate:{index:8,layout:J([st("instruction"),Ie("space")])},AllocateWithSeed:{index:9,layout:J([st("instruction"),wt("base"),zr("seed"),Ie("space"),wt("programId")])},AssignWithSeed:{index:10,layout:J([st("instruction"),wt("base"),zr("seed"),wt("programId")])},TransferWithSeed:{index:11,layout:J([st("instruction"),Gr("lamports"),zr("seed"),wt("programId")])},UpgradeNonceAccount:{index:12,layout:J([st("instruction")])}});class jr{constructor(){}static createAccount(t){const e=ke.Create,r=ve(e,{lamports:t.lamports,space:t.space,programId:le(t.programId.toBuffer())});return new qt({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:r})}static transfer(t){let e,r;if("basePubkey"in t){const s=ke.TransferWithSeed;e=ve(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:le(t.programId.toBuffer())}),r=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=ke.Transfer;e=ve(s,{lamports:BigInt(t.lamports)}),r=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new qt({keys:r,programId:this.programId,data:e})}static assign(t){let e,r;if("basePubkey"in t){const s=ke.AssignWithSeed;e=ve(s,{base:le(t.basePubkey.toBuffer()),seed:t.seed,programId:le(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ke.Assign;e=ve(s,{programId:le(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new qt({keys:r,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=ke.CreateWithSeed,r=ve(e,{base:le(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:le(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new qt({keys:s,programId:this.programId,data:r})}static createNonceAccount(t){const e=new We;"basePubkey"in t&&"seed"in t?e.add(jr.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Yi,programId:this.programId})):e.add(jr.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Yi,programId:this.programId}));const r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(r)),e}static nonceInitialize(t){const e=ke.InitializeNonceAccount,r=ve(e,{authorized:le(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:zn,isSigner:!1,isWritable:!1}],programId:this.programId,data:r};return new qt(s)}static nonceAdvance(t){const e=ke.AdvanceNonceAccount,r=ve(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r};return new qt(s)}static nonceWithdraw(t){const e=ke.WithdrawNonceAccount,r=ve(e,{lamports:t.lamports});return new qt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:In,isSigner:!1,isWritable:!1},{pubkey:zn,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static nonceAuthorize(t){const e=ke.AuthorizeNonceAccount,r=ve(e,{authorized:le(t.newAuthorizedPubkey.toBuffer())});return new qt({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}static allocate(t){let e,r;if("basePubkey"in t){const s=ke.AllocateWithSeed;e=ve(s,{base:le(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:le(t.programId.toBuffer())}),r=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=ke.Allocate;e=ve(s,{space:t.space}),r=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new qt({keys:r,programId:this.programId,data:e})}}jr.programId=new nt("11111111111111111111111111111111");new nt("BPFLoader2111111111111111111111111111111111");function kl(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Oi,ao;function Il(){if(ao)return Oi;ao=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,c,d,b,_,I;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(I=n.call(r),I==="[object Array]"){for(c="[",o=r.length-1,i=0;i<o;i++)c+=e(r[i],!0)+",";return o>-1&&(c+=e(r[i],!0)),c+"]"}else if(I==="[object Object]"){for(d=t(r).sort(),o=d.length,c="",i=0;i<o;)b=d[i],_=e(r[b],!1),_!==void 0&&(c&&(c+=","),c+=JSON.stringify(b)+":"+_),i++;return"{"+c+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Oi=function(r){var s=e(r,!1);if(s!==void 0)return""+s},Oi}var Ml=Il(),co=kl(Ml);const tn=32;function Pi(n){let t=0;for(;n>1;)n/=2,t++;return t}function Rl(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class ja{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Pi(Rl(t+tn+1))-Pi(tn)-1,r=this.getSlotsInEpoch(e),s=t-(r-tn);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*tn:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Pi(tn)):this.slotsPerEpoch}}var Cl=globalThis.fetch;class Ll extends tl{constructor(t,e,r){const s=i=>{const o=Jf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function Ul(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const uo=56;class Xi{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=Ul(Tl,t),r=t.length-uo;Rt(r>=0,"lookup table is invalid"),Rt(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=J([xe(wt(),s,"addresses")]).decode(t.slice(uo));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new nt(e.authority[0]):void 0,addresses:i.map(o=>new nt(o))}}}const Tl={index:1,layout:J([st("typeIndex"),Gr("deactivationSlot"),fe("lastExtendedSlot"),pt("lastExtendedStartIndex"),pt(),xe(wt(),vr(pt(),-1),"authority")])},Fl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Nl(n){const t=n.match(Fl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),d=c==null?"":`:${c+1}`;return`${o}//${r}${d}${i}`}const Ut=gn(vs(nt),$(),n=>new nt(n)),Za=xs([$(),Lt("base64")]),ks=gn(vs(dt.Buffer),Za,n=>dt.Buffer.from(n[0],"base64")),Ya=30*1e3;function Ol(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function _t(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function fo(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Xa(n){return Se([q({jsonrpc:Lt("2.0"),id:$(),result:n}),q({jsonrpc:Lt("2.0"),id:$(),error:q({code:Jr(),message:$(),data:at(Ef())})})])}const Pl=Xa(Jr());function mt(n){return gn(Xa(n),Pl,t=>"error"in t?t:{...t,result:W(t.result,n)})}function Kt(n){return mt(q({context:q({slot:T()}),value:n}))}function Qn(n){return q({context:q({slot:T()}),value:n})}function zi(n,t){return n===0?new Vr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new nt(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:de.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Ge(t)}const zl=q({foundation:T(),foundationTerm:T(),initial:T(),taper:T(),terminal:T()}),Dl=mt(G(j(q({epoch:T(),effectiveSlot:T(),amount:T(),postBalance:T(),commission:at(j(T()))})))),ql=G(q({slot:T(),prioritizationFee:T()})),Kl=q({total:T(),validator:T(),foundation:T(),epoch:T()}),$l=q({epoch:T(),slotIndex:T(),slotsInEpoch:T(),absoluteSlot:T(),blockHeight:at(T()),transactionCount:at(T())}),Hl=q({slotsPerEpoch:T(),leaderScheduleSlotOffset:T(),warmup:Ve(),firstNormalEpoch:T(),firstNormalSlot:T()}),Wl=ka($(),G(T())),Ir=j(Se([q({}),$()])),Vl=q({err:Ir}),Gl=Lt("receivedSignature"),jl=q({"solana-core":$(),"feature-set":at(T())}),Zl=q({program:$(),programId:Ut,parsed:Jr()}),Yl=q({programId:Ut,accounts:G(Ut),data:$()}),lo=Kt(q({err:j(Se([q({}),$()])),logs:j(G($())),accounts:at(j(G(j(q({executable:Ve(),owner:$(),lamports:T(),data:G($()),rentEpoch:at(T())}))))),unitsConsumed:at(T()),returnData:at(j(q({programId:$(),data:xs([$(),Lt("base64")])}))),innerInstructions:at(j(G(q({index:T(),instructions:G(Se([Zl,Yl]))}))))})),Xl=Kt(q({byIdentity:ka($(),G(T())),range:q({firstSlot:T(),lastSlot:T()})}));function Jl(n,t,e,r,s,i){const o=e||Cl;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(_,I)=>{const k=await new Promise((S,A)=>{try{r(_,I,(C,L)=>S([C,L]))}catch(C){A(C)}});return await o(...k)}),new Zf(async(_,I)=>{const k={method:"POST",body:_,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},Jh)};try{let S=5,A,C=500;for(;d?A=await d(n,k):A=await o(n,k),!(A.status!==429||s===!0||(S-=1,S===0));)console.error(`Server responded with ${A.status} ${A.statusText}.  Retrying after ${C}ms delay...`),await Nr(C),C*=2;const L=await A.text();A.ok?I(null,L):I(new Error(`${A.status} ${A.statusText}: ${L}`))}catch(S){S instanceof Error&&I(S)}},{})}function Ql(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function th(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const eh=mt(zl),rh=mt(Kl),nh=mt(ql),ih=mt($l),sh=mt(Hl),oh=mt(Wl),ah=mt(T()),ch=Kt(q({total:T(),circulating:T(),nonCirculating:T(),nonCirculatingAccounts:G(Ut)})),Ji=q({amount:$(),uiAmount:j(T()),decimals:T(),uiAmountString:at($())}),uh=Kt(G(q({address:Ut,amount:$(),uiAmount:j(T()),decimals:T(),uiAmountString:at($())}))),fh=Kt(G(q({pubkey:Ut,account:q({executable:Ve(),owner:Ut,lamports:T(),data:ks,rentEpoch:T()})}))),Qi=q({program:$(),parsed:Jr(),space:T()}),lh=Kt(G(q({pubkey:Ut,account:q({executable:Ve(),owner:Ut,lamports:T(),data:Qi,rentEpoch:T()})}))),hh=Kt(G(q({lamports:T(),address:Ut}))),un=q({executable:Ve(),owner:Ut,lamports:T(),data:ks,rentEpoch:T()}),dh=q({pubkey:Ut,account:un}),ph=gn(Se([vs(dt.Buffer),Qi]),Se([Za,Qi]),n=>Array.isArray(n)?W(n,ks):n),ts=q({executable:Ve(),owner:Ut,lamports:T(),data:ph,rentEpoch:T()}),gh=q({pubkey:Ut,account:ts}),mh=q({state:Se([Lt("active"),Lt("inactive"),Lt("activating"),Lt("deactivating")]),active:T(),inactive:T()}),yh=mt(G(q({signature:$(),slot:T(),err:Ir,memo:j($()),blockTime:at(j(T()))}))),wh=mt(G(q({signature:$(),slot:T(),err:Ir,memo:j($()),blockTime:at(j(T()))}))),bh=q({subscription:T(),result:Qn(un)}),vh=q({pubkey:Ut,account:un}),xh=q({subscription:T(),result:Qn(vh)}),Eh=q({parent:T(),slot:T(),root:T()}),Sh=q({subscription:T(),result:Eh}),Bh=Se([q({type:Se([Lt("firstShredReceived"),Lt("completed"),Lt("optimisticConfirmation"),Lt("root")]),slot:T(),timestamp:T()}),q({type:Lt("createdBank"),parent:T(),slot:T(),timestamp:T()}),q({type:Lt("frozen"),slot:T(),timestamp:T(),stats:q({numTransactionEntries:T(),numSuccessfulTransactions:T(),numFailedTransactions:T(),maxTransactionsPerEntry:T()})}),q({type:Lt("dead"),slot:T(),timestamp:T(),err:$()})]),_h=q({subscription:T(),result:Bh}),Ah=q({subscription:T(),result:Qn(Se([Vl,Gl]))}),kh=q({subscription:T(),result:T()}),Ih=q({pubkey:$(),gossip:j($()),tpu:j($()),rpc:j($()),version:j($())}),ho=q({votePubkey:$(),nodePubkey:$(),activatedStake:T(),epochVoteAccount:Ve(),epochCredits:G(xs([T(),T(),T()])),commission:T(),lastVote:T(),rootSlot:j(T())}),Mh=mt(q({current:G(ho),delinquent:G(ho)})),Rh=Se([Lt("processed"),Lt("confirmed"),Lt("finalized")]),Ch=q({slot:T(),confirmations:j(T()),err:Ir,confirmationStatus:at(Rh)}),Lh=Kt(G(j(Ch))),Uh=mt(T()),Ja=q({accountKey:Ut,writableIndexes:G(T()),readonlyIndexes:G(T())}),Is=q({signatures:G($()),message:q({accountKeys:G($()),header:q({numRequiredSignatures:T(),numReadonlySignedAccounts:T(),numReadonlyUnsignedAccounts:T()}),instructions:G(q({accounts:G(T()),data:$(),programIdIndex:T()})),recentBlockhash:$(),addressTableLookups:at(G(Ja))})}),Qa=q({pubkey:Ut,signer:Ve(),writable:Ve(),source:at(Se([Lt("transaction"),Lt("lookupTable")]))}),tc=q({accountKeys:G(Qa),signatures:G($())}),ec=q({parsed:Jr(),program:$(),programId:Ut}),rc=q({accounts:G(Ut),data:$(),programId:Ut}),Th=Se([rc,ec]),Fh=Se([q({parsed:Jr(),program:$(),programId:$()}),q({accounts:G($()),data:$(),programId:$()})]),nc=gn(Th,Fh,n=>"accounts"in n?W(n,rc):W(n,ec)),ic=q({signatures:G($()),message:q({accountKeys:G(Qa),instructions:G(nc),recentBlockhash:$(),addressTableLookups:at(j(G(Ja)))})}),Dn=q({accountIndex:T(),mint:$(),owner:at($()),programId:at($()),uiTokenAmount:Ji}),sc=q({writable:G(Ut),readonly:G(Ut)}),ti=q({err:Ir,fee:T(),innerInstructions:at(j(G(q({index:T(),instructions:G(q({accounts:G(T()),data:$(),programIdIndex:T()}))})))),preBalances:G(T()),postBalances:G(T()),logMessages:at(j(G($()))),preTokenBalances:at(j(G(Dn))),postTokenBalances:at(j(G(Dn))),loadedAddresses:at(sc),computeUnitsConsumed:at(T()),costUnits:at(T())}),Ms=q({err:Ir,fee:T(),innerInstructions:at(j(G(q({index:T(),instructions:G(nc)})))),preBalances:G(T()),postBalances:G(T()),logMessages:at(j(G($()))),preTokenBalances:at(j(G(Dn))),postTokenBalances:at(j(G(Dn))),loadedAddresses:at(sc),computeUnitsConsumed:at(T()),costUnits:at(T())}),Qr=Se([Lt(0),Lt("legacy")]),Mr=q({pubkey:$(),lamports:T(),postBalance:j(T()),rewardType:j($()),commission:at(j(T()))}),Nh=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),transactions:G(q({transaction:Is,meta:j(ti),version:at(Qr)})),rewards:at(G(Mr)),blockTime:j(T()),blockHeight:j(T())}))),Oh=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),rewards:at(G(Mr)),blockTime:j(T()),blockHeight:j(T())}))),Ph=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),transactions:G(q({transaction:tc,meta:j(ti),version:at(Qr)})),rewards:at(G(Mr)),blockTime:j(T()),blockHeight:j(T())}))),zh=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),transactions:G(q({transaction:ic,meta:j(Ms),version:at(Qr)})),rewards:at(G(Mr)),blockTime:j(T()),blockHeight:j(T())}))),Dh=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),transactions:G(q({transaction:tc,meta:j(Ms),version:at(Qr)})),rewards:at(G(Mr)),blockTime:j(T()),blockHeight:j(T())}))),qh=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),rewards:at(G(Mr)),blockTime:j(T()),blockHeight:j(T())}))),Kh=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),transactions:G(q({transaction:Is,meta:j(ti)})),rewards:at(G(Mr)),blockTime:j(T())}))),po=mt(j(q({blockhash:$(),previousBlockhash:$(),parentSlot:T(),signatures:G($()),blockTime:j(T())}))),Di=mt(j(q({slot:T(),meta:j(ti),blockTime:at(j(T())),transaction:Is,version:at(Qr)}))),kn=mt(j(q({slot:T(),transaction:ic,meta:j(Ms),blockTime:at(j(T())),version:at(Qr)}))),$h=Kt(q({blockhash:$(),lastValidBlockHeight:T()})),Hh=Kt(Ve()),Wh=q({slot:T(),numTransactions:T(),numSlots:T(),samplePeriodSecs:T()}),Vh=mt(G(Wh)),Gh=Kt(j(q({feeCalculator:q({lamportsPerSignature:T()})}))),jh=mt($()),Zh=mt($()),Yh=q({err:Ir,logs:G($()),signature:$()}),Xh=q({result:Qn(Yh),subscription:T()}),Jh={"solana-client":"js/1.0.0-maintenance"};class Qh{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const b={};return async _=>{const{commitment:I,config:k}=_t(_),S=this._buildArgs([],I,void 0,k),A=co(S);return b[A]=b[A]??(async()=>{try{const C=await this._rpcRequest("getBlockHeight",S),L=W(C,mt(T()));if("error"in L)throw new it(L.error,"failed to get block height information");return L.result}finally{delete b[A]}})(),await b[A]}})();let r,s,i,o,c,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=Ol(t),this._rpcWsEndpoint=r||Nl(t),this._rpcClient=Jl(t,s,i,o,c,d),this._rpcRequest=Ql(this._rpcClient),this._rpcBatchRequest=th(this._rpcClient),this._rpcWebSocket=new Ll(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),c=W(o,Kt(T()));if("error"in c)throw new it(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=W(e,mt(j(T())));if("error"in r)throw new it(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=W(t,mt(T()));if("error"in e)throw new it(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=W(t,ah);if("error"in e)throw new it(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=W(r,ch);if("error"in s)throw new it(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=W(s,Kt(Ji));if("error"in i)throw new it(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=W(s,Kt(Ji));if("error"in i)throw new it(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=_t(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",c),b=W(d,fh);if("error"in b)throw new it(b.error,`failed to get token accounts owned by account ${t.toBase58()}`);return b.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=W(o,lh);if("error"in c)throw new it(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=W(s,hh);if("error"in i)throw new it(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=W(s,uh);if("error"in i)throw new it(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=W(o,Kt(j(un)));if("error"in c)throw new it(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=W(o,Kt(j(ts)));if("error"in c)throw new it(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=_t(e),i=t.map(b=>b.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),d=W(c,Kt(G(j(ts))));if("error"in d)throw new it(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=_t(e),i=t.map(b=>b.toBase58()),o=this._buildArgs([i],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),d=W(c,Kt(G(j(un))));if("error"in d)throw new it(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=_t(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getStakeActivation",o),d=W(c,mt(mh));if("error"in d)throw new it(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=_t(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:fo(o.filters)}:null}),d=await this._rpcRequest("getProgramAccounts",c),b=G(dh),_=o.withContext===!0?W(d,Kt(b)):W(d,mt(b));if("error"in _)throw new it(_.error,`failed to get accounts owned by program ${t.toBase58()}`);return _.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=W(o,mt(G(gh)));if("error"in c)throw new it(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);r=o.signature}let s;try{s=de.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return Rt(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((d,b)=>{try{r=this.onSignature(e,(I,k)=>{r=void 0;const S={context:k,value:I};d({__type:Qe.PROCESSED,response:S})},t);const _=new Promise(I=>{r==null?I():s=this._onSubscriptionStateChange(r,k=>{k==="subscribed"&&I()})});(async()=>{if(await _,i)return;const I=await this.getSignatureStatus(e);if(i||I==null)return;const{context:k,value:S}=I;if(S!=null)if(S!=null&&S.err)b(S.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(S.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(S.confirmationStatus==="processed"||S.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:Qe.PROCESSED,response:{context:k,value:S}})}})()}catch(_){b(_)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(I=>{const k=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let S=await k();if(!i){for(;S<=r;)if(await Nr(1e3),i||(S=await k(),i))return;I({__type:Qe.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),b=this.getCancellationPromise(e);let _;try{const I=await Promise.race([b,d,o]);if(I.__type===Qe.PROCESSED)_=I.response;else throw new Ss(s)}finally{i=!0,c()}return _}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const d=new Promise(S=>{let A=i,C=null;const L=async()=>{try{const{context:F,value:D}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return C=F.slot,D==null?void 0:D.nonce}catch{return A}};(async()=>{if(A=await L(),!c)for(;;){if(i!==A){S({__type:Qe.NONCE_INVALID,slotInWhichNonceDidAdvance:C});return}if(await Nr(2e3),c||(A=await L(),c))return}})()}),{abortConfirmation:b,confirmationPromise:_}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),I=this.getCancellationPromise(e);let k;try{const S=await Promise.race([I,_,d]);if(S.__type===Qe.PROCESSED)k=S.response;else{let A;for(;;){const C=await this.getSignatureStatus(o);if(C==null)break;if(C.context.slot<(S.slotInWhichNonceDidAdvance??r)){await Nr(400);continue}A=C;break}if(A!=null&&A.value){const C=t||"finalized",{confirmationStatus:L}=A.value;switch(C){case"processed":case"recent":if(L!=="processed"&&L!=="confirmed"&&L!=="finalized")throw new Pr(o);break;case"confirmed":case"single":case"singleGossip":if(L!=="confirmed"&&L!=="finalized")throw new Pr(o);break;case"finalized":case"max":case"root":if(L!=="finalized")throw new Pr(o);break;default:}k={context:A.context,value:{err:A.value.err}}}else throw new Pr(o)}}finally{c=!0,b()}return k}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(d=>{let b=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{b=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:Qe.TIMED_OUT,timeoutMs:b}),b)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const d=await Promise.race([o,s]);if(d.__type===Qe.PROCESSED)c=d.response;else throw new Bs(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=W(t,mt(G(Ih)));if("error"in e)throw new it(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=W(r,Mh);if("error"in s)throw new it(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=W(i,mt(T()));if("error"in o)throw new it(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=W(i,mt($()));if("error"in o)throw new it(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=W(s,mt(G(Ut)));if("error"in i)throw new it(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);Rt(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=W(s,Lh);if("error"in i)throw new it(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=W(i,mt(T()));if("error"in o)throw new it(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=W(r,eh);if("error"in s)throw new it(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=_t(r),o=this._buildArgs([t.map(b=>b.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getInflationReward",o),d=W(c,Dl);if("error"in d)throw new it(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=W(t,rh);if("error"in e)throw new it(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=W(i,ih);if("error"in o)throw new it(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=W(t,sh);if("error"in e)throw new it(e.error,"failed to get epoch schedule");const r=e.result;return new ja(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=W(t,oh);if("error"in e)throw new it(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=W(s,Uh);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=W(e,Vh);if("error"in r)throw new it(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=W(s,Gh);if("error"in i)throw new it(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=le(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=W(i,Kt(j(T())));if("error"in o)throw new it(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(c=>c.toBase58()),r=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=W(s,nh);if("error"in i)throw new it(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=W(i,$h);if("error"in o)throw new it(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=W(o,Hh);if("error"in c)throw new it(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=W(t,mt(jl));if("error"in e)throw new it(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=W(t,mt($()));if("error"in e)throw new it(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=W(o,Ph);if("error"in c)throw c.error;return c.result}case"none":{const c=W(o,Oh);if("error"in c)throw c.error;return c.result}default:{const c=W(o,Nh);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:b,meta:_,version:I})=>({meta:_,transaction:{...b,message:zi(I,b.message)},version:I}))}:null}}}catch(c){throw new it(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const c=W(o,Dh);if("error"in c)throw c.error;return c.result}case"none":{const c=W(o,qh);if("error"in c)throw c.error;return c.result}default:{const c=W(o,zh);if("error"in c)throw c.error;return c.result}}}catch(c){throw new it(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...d}=t;r=c,e=d}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=W(i,Xl);if("error"in o)throw new it(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),c=W(o,Di);if("error"in c)throw new it(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:zi(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=_t(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=W(o,kn);if("error"in c)throw new it(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=_t(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(d=>{const b=W(d,kn);if("error"in b)throw new it(b.error,"failed to get transactions");return b.result})}async getTransactions(t,e){const{commitment:r,config:s}=_t(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(d=>{const b=W(d,Di);if("error"in b)throw new it(b.error,"failed to get transactions");const _=b.result;return _&&{..._,transaction:{..._.transaction,message:zi(_.version,_.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=W(s,Kh);if("error"in i)throw new it(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:d,meta:b})=>{const _=new Ge(d.message);return{meta:b,transaction:{...d,message:_}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:b})=>({meta:b,transaction:We.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=W(i,mt(G(T())));if("error"in o)throw new it(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=W(s,po);if("error"in i)throw new it(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=W(s,po);if("error"in i)throw new it(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=W(s,Di);if("error"in i)throw new it(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new Ge(o.transaction.message),d=o.transaction.signatures;return{...o,transaction:We.populate(c,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=W(s,kn);if("error"in i)throw new it(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=W(o,kn);if("error"in c)throw new it(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(s.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(s.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=W(i,yh);if("error"in o)throw new it(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=W(i,wh);if("error"in o)throw new it(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Xi({key:t,state:Xi.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Jn.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=W(r,jh);if("error"in s)throw new it(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Nr(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Ya;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Nr(Al/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=_t(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=W(i,Kt(T()));if("error"in o)throw new it(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const C=t.serialize(),L=dt.Buffer.from(C).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const F=e||{};F.encoding="base64","commitment"in F||(F.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(F.innerInstructions=e.innerInstructions);const D=[L,F],O=await this._rpcRequest("simulateTransaction",D),K=W(O,lo);if("error"in K)throw new Error("failed to simulate transaction: "+K.error.message);return K.result}let s;if(t instanceof We){let A=t;s=new We,s.feePayer=A.feePayer,s.instructions=t.instructions,s.nonceInfo=A.nonceInfo,s.signatures=A.signatures}else s=We.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let A=this._disableBlockhashCaching;for(;;){const C=await this._blockhashWithExpiryBlockHeight(A);if(s.lastValidBlockHeight=C.lastValidBlockHeight,s.recentBlockhash=C.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const L=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(L)&&!this._blockhashInfo.transactionSignatures.includes(L)){this._blockhashInfo.simulatedSignatures.push(L);break}else A=!0}}const o=s._compile(),c=o.serialize(),b=s._serialize(c).toString("base64"),_={encoding:"base64",commitment:this.commitment};if(r){const A=(Array.isArray(r)?r:o.nonProgramIds()).map(C=>C.toBase58());_.accounts={encoding:"base64",addresses:A}}i&&(_.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(_.innerInstructions=e.innerInstructions);const I=[b,_],k=await this._rpcRequest("simulateTransaction",I),S=W(k,lo);if("error"in S){let A;if("data"in S.error&&(A=S.error.data.logs,A&&Array.isArray(A))){const C=`
    `,L=C+A.join(C);console.error(S.error.message,L)}throw new Zi({action:"simulate",signature:"",transactionMessage:S.error.message,logs:A})}return S.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))o=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=le(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],c=await this._rpcRequest("sendTransaction",o),d=W(c,Zh);if("error"in d){let b;throw"data"in d.error&&(b=d.error.data.logs),new Zi({action:s?"send":"simulate",signature:"",transactionMessage:d.error.message,logs:b})}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var s;const r=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=W(t,bh);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=co([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];Rt(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=_t(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=W(t,xh);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=_t(r),c=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:fo(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=W(t,Xh);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=W(t,Sh);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=W(t,_h);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=W(t,Ah);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(d,b)=>{e(d,b);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=W(t,kh);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class nn{constructor(t){this._keypair=void 0,this._keypair=t??io()}static generate(){return new nn(io())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const r=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=ji(s);for(let o=0;o<32;o++)if(r[o]!==i[o])throw new Error("provided secretKey is invalid")}return new nn({publicKey:r,secretKey:t})}static fromSeed(t){const e=ji(t),r=new Uint8Array(64);return r.set(t),r.set(e,32),new nn({publicKey:e,secretKey:r})}get publicKey(){return new nt(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:J([st("instruction"),Gr("recentSlot"),pt("bumpSeed")])},FreezeLookupTable:{index:1,layout:J([st("instruction")])},ExtendLookupTable:{index:2,layout:J([st("instruction"),Gr(),xe(wt(),vr(st(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:J([st("instruction")])},CloseLookupTable:{index:4,layout:J([st("instruction")])}});new nt("AddressLookupTab1e1111111111111111111111111");const en=Object.freeze({RequestUnits:{index:0,layout:J([pt("instruction"),st("units"),st("additionalFee")])},RequestHeapFrame:{index:1,layout:J([pt("instruction"),st("bytes")])},SetComputeUnitLimit:{index:2,layout:J([pt("instruction"),st("units")])},SetComputeUnitPrice:{index:3,layout:J([pt("instruction"),Gr("microLamports")])}});class oc{constructor(){}static requestUnits(t){const e=en.RequestUnits,r=ve(e,t);return new qt({keys:[],programId:this.programId,data:r})}static requestHeapFrame(t){const e=en.RequestHeapFrame,r=ve(e,t);return new qt({keys:[],programId:this.programId,data:r})}static setComputeUnitLimit(t){const e=en.SetComputeUnitLimit,r=ve(e,t);return new qt({keys:[],programId:this.programId,data:r})}static setComputeUnitPrice(t){const e=en.SetComputeUnitPrice,r=ve(e,{microLamports:BigInt(t.microLamports)});return new qt({keys:[],programId:this.programId,data:r})}}oc.programId=new nt("ComputeBudget111111111111111111111111111111");J([pt("numSignatures"),pt("padding"),Fe("signatureOffset"),Fe("signatureInstructionIndex"),Fe("publicKeyOffset"),Fe("publicKeyInstructionIndex"),Fe("messageDataOffset"),Fe("messageDataSize"),Fe("messageInstructionIndex")]);new nt("Ed25519SigVerify111111111111111111111111111");pl.utils.isValidPrivateKey;J([pt("numSignatures"),Fe("signatureOffset"),pt("signatureInstructionIndex"),Fe("ethAddressOffset"),pt("ethAddressInstructionIndex"),Fe("messageDataOffset"),Fe("messageDataSize"),pt("messageInstructionIndex"),Et(20,"ethAddress"),Et(64,"signature"),pt("recoveryId")]);new nt("KeccakSecp256k11111111111111111111111111111");var ac;new nt("StakeConfig11111111111111111111111111111111");class Rs{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}ac=Rs;Rs.default=new ac(0,0,nt.default);Object.freeze({Initialize:{index:0,layout:J([st("instruction"),wl(),bl()])},Authorize:{index:1,layout:J([st("instruction"),wt("newAuthorized"),st("stakeAuthorizationType")])},Delegate:{index:2,layout:J([st("instruction")])},Split:{index:3,layout:J([st("instruction"),Ie("lamports")])},Withdraw:{index:4,layout:J([st("instruction"),Ie("lamports")])},Deactivate:{index:5,layout:J([st("instruction")])},Merge:{index:7,layout:J([st("instruction")])},AuthorizeWithSeed:{index:8,layout:J([st("instruction"),wt("newAuthorized"),st("stakeAuthorizationType"),zr("authoritySeed"),wt("authorityOwner")])}});new nt("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:J([st("instruction"),vl()])},Authorize:{index:1,layout:J([st("instruction"),wt("newAuthorized"),st("voteAuthorizationType")])},Withdraw:{index:3,layout:J([st("instruction"),Ie("lamports")])},UpdateValidatorIdentity:{index:4,layout:J([st("instruction")])},AuthorizeWithSeed:{index:10,layout:J([st("instruction"),xl()])}});new nt("Vote111111111111111111111111111111111111111");new nt("Va1idator1nfo111111111111111111111111111111");q({name:$(),website:at($()),details:at($()),iconUrl:at($()),keybaseUsername:at($())});new nt("Vote111111111111111111111111111111111111111");J([wt("nodePubkey"),wt("authorizedWithdrawer"),pt("commission"),fe(),xe(J([fe("slot"),st("confirmationCount")]),vr(st(),-8),"votes"),pt("rootSlotValid"),fe("rootSlot"),fe(),xe(J([fe("epoch"),wt("authorizedVoter")]),vr(st(),-8),"authorizedVoters"),J([xe(J([wt("authorizedPubkey"),fe("epochOfLastAuthorizedSwitch"),fe("targetEpoch")]),32,"buf"),fe("idx"),pt("isEmpty")],"priorVoters"),fe(),xe(J([fe("epoch"),fe("credits"),fe("prevCredits")]),vr(st(),-8),"epochCredits"),J([fe("slot"),fe("timestamp")],"lastTimestamp")]);const md=Object.freeze(Object.defineProperty({__proto__:null,AddressLookupTableAccount:Xi,BLOCKHASH_CACHE_TIMEOUT_MS:Ya,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:en,ComputeBudgetProgram:oc,Connection:Qh,EpochSchedule:ja,FeeCalculatorLayout:Va,Keypair:nn,Lockup:Rs,MAX_SEED_LENGTH:$a,Message:Ge,MessageAccountKeys:cn,MessageV0:Vr,NONCE_ACCOUNT_LENGTH:Yi,NonceAccount:Jn,PACKET_DATA_SIZE:xr,PUBLIC_KEY_LENGTH:ir,PublicKey:nt,SIGNATURE_LENGTH_IN_BYTES:an,SOLANA_SCHEMA:rn,SYSTEM_INSTRUCTION_LAYOUTS:ke,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:In,SYSVAR_RENT_PUBKEY:zn,SendTransactionError:Zi,SolanaJSONRPCError:it,Struct:qa,SystemProgram:jr,Transaction:We,TransactionExpiredBlockheightExceededError:Ss,TransactionExpiredNonceInvalidError:Pr,TransactionExpiredTimeoutError:Bs,TransactionInstruction:qt,TransactionStatus:Qe,VERSION_PREFIX_MASK:Yn,VersionedMessage:_s,VersionedTransaction:As},Symbol.toStringTag,{value:"Module"})),sr=new nt("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),yd=new nt("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),ei=new nt("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new nt("So11111111111111111111111111111111111111112");new nt("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const Cs=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}};var mn={};Object.defineProperty(mn,"__esModule",{value:!0});function td(n){{const t=Buffer.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var ed=mn.toBigIntLE=td;function rd(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}mn.toBigIntBE=rd;function nd(n,t){{const e=n.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var id=mn.toBufferLE=nd;function sd(n,t){{const e=n.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}mn.toBufferBE=sd;const od=n=>t=>{const e=Et(n,t),{encode:r,decode:s}=Cs(e),i=e;return i.decode=(o,c)=>{const d=s(o,c);return ed(Buffer.from(d))},i.encode=(o,c,d)=>{const b=id(o,n);return r(b,c,d)},i},Kr=od(8),ad=n=>{const t=pt(n),{encode:e,decode:r}=Cs(t),s=t;return s.decode=(i,o)=>!!r(i,o),s.encode=(i,o,c)=>{const d=Number(i);return e(d,o,c)},s},dr=n=>{const t=Et(32,n),{encode:e,decode:r}=Cs(t),s=t;return s.decode=(i,o)=>{const c=r(i,o);return new nt(c)},s.encode=(i,o,c)=>{const d=i.toBuffer();return e(d,o,c)},s};class cd extends Error{constructor(t){super(t)}}class cc extends cd{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}var Sr;(function(n){n[n.InitializeMint=0]="InitializeMint",n[n.InitializeAccount=1]="InitializeAccount",n[n.InitializeMultisig=2]="InitializeMultisig",n[n.Transfer=3]="Transfer",n[n.Approve=4]="Approve",n[n.Revoke=5]="Revoke",n[n.SetAuthority=6]="SetAuthority",n[n.MintTo=7]="MintTo",n[n.Burn=8]="Burn",n[n.CloseAccount=9]="CloseAccount",n[n.FreezeAccount=10]="FreezeAccount",n[n.ThawAccount=11]="ThawAccount",n[n.TransferChecked=12]="TransferChecked",n[n.ApproveChecked=13]="ApproveChecked",n[n.MintToChecked=14]="MintToChecked",n[n.BurnChecked=15]="BurnChecked",n[n.InitializeAccount2=16]="InitializeAccount2",n[n.SyncNative=17]="SyncNative",n[n.InitializeAccount3=18]="InitializeAccount3",n[n.InitializeMultisig2=19]="InitializeMultisig2",n[n.InitializeMint2=20]="InitializeMint2",n[n.GetAccountDataSize=21]="GetAccountDataSize",n[n.InitializeImmutableOwner=22]="InitializeImmutableOwner",n[n.AmountToUiAmount=23]="AmountToUiAmount",n[n.UiAmountToAmount=24]="UiAmountToAmount",n[n.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",n[n.TransferFeeExtension=26]="TransferFeeExtension",n[n.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",n[n.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",n[n.Reallocate=29]="Reallocate",n[n.MemoTransferExtension=30]="MemoTransferExtension",n[n.CreateNativeMint=31]="CreateNativeMint",n[n.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",n[n.InterestBearingMintExtension=33]="InterestBearingMintExtension",n[n.CpiGuardExtension=34]="CpiGuardExtension",n[n.InitializePermanentDelegate=35]="InitializePermanentDelegate",n[n.TransferHookExtension=36]="TransferHookExtension",n[n.MetadataPointerExtension=39]="MetadataPointerExtension",n[n.GroupPointerExtension=40]="GroupPointerExtension",n[n.GroupMemberPointerExtension=41]="GroupMemberPointerExtension",n[n.ScaledUiAmountExtension=43]="ScaledUiAmountExtension",n[n.PausableExtension=44]="PausableExtension"})(Sr||(Sr={}));var go;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initialized=1]="Initialized",n[n.Frozen=2]="Frozen"})(go||(go={}));const ud=J([dr("mint"),dr("owner"),Kr("amount"),st("delegateOption"),dr("delegate"),pt("state"),st("isNativeOption"),Kr("isNative"),Kr("delegatedAmount"),st("closeAuthorityOption"),dr("closeAuthority")]),wd=ud.span;function ri(n,t,e){if(e.length){n.push({pubkey:t,isSigner:!1,isWritable:!1});for(const r of e)n.push({pubkey:r instanceof nt?r:r.publicKey,isSigner:!0,isWritable:!1})}else n.push({pubkey:t,isSigner:!0,isWritable:!1});return n}class uc extends oa{constructor(t){super(-1,t),this.publicKeyLayout=dr()}decode(t,e=0){return t[e]===0?null:this.publicKeyLayout.decode(t,e+1)}encode(t,e,r=0){return t===null?(e[r]=0,1):(e[r]=1,this.publicKeyLayout.encode(t,e,r+1),33)}getSpan(t,e=0){if(t)return t[e]===0?1:1+this.publicKeyLayout.span;throw new RangeError("Buffer must be provided")}}const mo=J([pt("instruction"),Kr("amount"),pt("decimals")]);function bd(n,t,e,r,s,i,o=[],c=sr){const d=ri([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!1,isWritable:!0}],r,o),b=Buffer.alloc(mo.span);return mo.encode({instruction:Sr.TransferChecked,amount:BigInt(s),decimals:i},b),new qt({keys:d,programId:c,data:b})}const fd=J([st("mintAuthorityOption"),dr("mintAuthority"),Kr("supply"),pt("decimals"),ad("isInitialized"),st("freezeAuthorityOption"),dr("freezeAuthority")]),vd=fd.span;async function xd(n,t,e=!1,r=sr,s=ei){if(!e&&!nt.isOnCurve(t.toBuffer()))throw new cc;const[i]=await nt.findProgramAddress([t.toBuffer(),r.toBuffer(),n.toBuffer()],s);return i}function Ed(n,t,e=!1,r=sr,s=ei){if(!e&&!nt.isOnCurve(t.toBuffer()))throw new cc;const[i]=nt.findProgramAddressSync([t.toBuffer(),r.toBuffer(),n.toBuffer()],s);return i}const yo=J([pt("instruction")]);function Sd(n,t,e,r=[],s=sr){const i=ri([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],e,r),o=Buffer.alloc(yo.span);return yo.encode({instruction:Sr.CloseAccount},o),new qt({keys:i,programId:s,data:o})}function Bd(n,t,e,r,s=sr,i=ei){return ld(n,t,e,r,Buffer.alloc(0),s,i)}function ld(n,t,e,r,s,i=sr,o=ei){const c=[{pubkey:n,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:jr.programId,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}];return new qt({keys:c,programId:o,data:s})}const wo=J([pt("instruction"),Kr("amount"),pt("decimals")]);function _d(n,t,e,r,s,i=[],o=sr){const c=ri([{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],e,i),d=Buffer.alloc(wo.span);return wo.encode({instruction:Sr.MintToChecked,amount:BigInt(r),decimals:s},d),new qt({keys:c,programId:o,data:d})}var bo;(function(n){n[n.MintTokens=0]="MintTokens",n[n.FreezeAccount=1]="FreezeAccount",n[n.AccountOwner=2]="AccountOwner",n[n.CloseAccount=3]="CloseAccount",n[n.TransferFeeConfig=4]="TransferFeeConfig",n[n.WithheldWithdraw=5]="WithheldWithdraw",n[n.CloseMint=6]="CloseMint",n[n.InterestRate=7]="InterestRate",n[n.PermanentDelegate=8]="PermanentDelegate",n[n.ConfidentialTransferMint=9]="ConfidentialTransferMint",n[n.TransferHookProgramId=10]="TransferHookProgramId",n[n.ConfidentialTransferFeeConfig=11]="ConfidentialTransferFeeConfig",n[n.MetadataPointer=12]="MetadataPointer",n[n.GroupPointer=13]="GroupPointer",n[n.GroupMemberPointer=14]="GroupMemberPointer",n[n.ScaledUiAmountConfig=15]="ScaledUiAmountConfig",n[n.PausableConfig=16]="PausableConfig"})(bo||(bo={}));const vo=J([pt("instruction"),pt("authorityType"),new uc("newAuthority")]);function Ad(n,t,e,r,s=[],i=sr){const o=ri([{pubkey:n,isSigner:!1,isWritable:!0}],t,s),c=Buffer.alloc(35);return vo.encode({instruction:Sr.SetAuthority,authorityType:e,newAuthority:r},c),new qt({keys:o,programId:i,data:c.subarray(0,vo.getSpan(c))})}const xo=J([pt("instruction"),pt("decimals"),dr("mintAuthority"),new uc("freezeAuthority")]);function kd(n,t,e,r,s=sr){const i=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:zn,isSigner:!1,isWritable:!1}],o=Buffer.alloc(67);return xo.encode({instruction:Sr.InitializeMint,decimals:t,mintAuthority:e,freezeAuthority:r},o),new qt({keys:i,programId:s,data:o.subarray(0,xo.getSpan(o))})}export{wd as A,Qh as C,Ta as E,nn as K,vd as M,nt as P,jr as S,We as T,_s as V,As as a,dt as b,oc as c,Sd as d,sr as e,yd as f,qn as g,qt as h,Ed as i,Bd as j,bd as k,kd as l,xd as m,ei as n,_d as o,Ad as p,bo as q,md as r};
