class ni{constructor(){this.subscribable=new ha(this),this.subscribers=new Set}subscribe(t){return this.subscribers.add(t),()=>this.unsubscribe(t)}unsubscribe(t){this.subscribers.delete(t)}clear(){this.subscribers.clear()}notifySubscribers(t){return[...this.subscribers].map(e=>e(t))}}class ha{constructor(t){this.dispatcher=t}subscribe(t){return this.dispatcher.subscribe(t)}unsubscribe(t){this.dispatcher.unsubscribe(t)}}class ne extends ni{dispatch(t){this.notifySubscribers(t)}}class Ac extends ni{constructor(){super(...arguments),this.value=!1}raise(){this.value||(this.value=!0,this.notifySubscribers())}reset(){this.value=!1}isRaised(){return this.value}subscribe(t){const e=super.subscribe(t);return this.value&&t(),e}}class Nt extends ni{get current(){return this.value}set current(t){this.value=t,this.notifySubscribers(t)}constructor(t){super(),this.value=t,this.subscribable=new Ec(this)}subscribe(t,e=!0){const r=super.subscribe(t);return e&&t(this.value),r}}class Ec extends ha{get current(){return this.dispatcher.current}subscribe(t,e=!0){return this.dispatcher.subscribe(t,e)}}class jt{get onChanged(){return this.value.subscribable}get onDisabled(){return this.disabled.subscribable}constructor(t,e){this.name=t,this.initial=e,this.type=void 0,this.spacing=!1,this.description="",this.disabled=new Nt(!1),this.value=new Nt(e)}get(){return this.value.current}set(t){this.value.current=this.parse(t)}parse(t){return t}serialize(){return this.value.current}clone(){return new this.constructor(this.name,this.get())}disable(t=!0){return this.disabled.current=t,this}space(t=!0){return this.spacing=t,this}describe(t){return this.description=t,this}}class Oc extends jt{get onFieldsChanged(){return this.event.subscribable}constructor(t,e){const r=new Map(Object.entries(e));super(t,Object.fromEntries(Array.from(r,([i,a])=>[i,a.get()]))),this.type=Object,this.ignoreChange=!1,this.customFields={},this.handleChange=()=>{this.ignoreChange||(this.value.current={...this.transform("get"),...this.customFields})},this.event=new Nt([...r.values()]),this.fields=r;for(const[i,a]of this.fields)Object.defineProperty(this,i,{value:a}),a.onChanged.subscribe(this.handleChange)}set(t){this.ignoreChange=!0;for(const[e,r]of Object.entries(t)){const i=this.fields.get(e);i?i.set(r):this.customFields[e]=r}this.ignoreChange=!1,this.handleChange()}serialize(){return{...this.transform("serialize"),...this.customFields}}clone(){const t=new this.constructor(this.name,this.transform("clone"));return t.set(structuredClone(this.customFields)),t}transform(t){return Object.fromEntries(Array.from(this.fields,([r,i])=>[r,i[t]()]))}}const Me=Oc;class Zs extends jt{constructor(){super(...arguments),this.type=Boolean}parse(t){return!!t}}class ca extends Error{constructor(t,e){typeof t=="string"?(super(t),this.remarks=e):(super(t.message),this.remarks=t.remarks,this.object=t.object,this.durationMs=t.durationMs,this.inspect=t.inspect)}}class _c{constructor(){this.resolveCurrent=null,this.current=null}async acquire(){for(;this.current;)await this.current;this.current=new Promise(t=>{this.resolveCurrent=t})}release(){var t;this.current=null,(t=this.resolveCurrent)==null||t.call(this),this.resolveCurrent=null}}const cn=[];function ii(){const n=cn.at(-1);if(!n)throw new Error("The scene is not available in the current context.");return n}function Wc(n){cn.push(n)}function Dc(n){if(cn.pop()!==n)throw new Error("startScene/endScene were called out of order.")}function zt(){var n;return((n=cn.at(-1))==null?void 0:n.logger)??console}const si=[];function un(){const n=si.at(-1);if(!n)throw new ca("The thread is not available in the current context.",`<p><code>useThread()</code> can only be called from within generator functions.
      It&#39;s not available during rendering.</p>
`);return n}function Vs(n){si.push(n)}function Js(n){if(si.pop()!==n)throw new Error("startThread/endThread was called out of order.")}function Ze(n){return n[0].toUpperCase()+n.slice(1)}function P(){let n;return e=>{if(e!==void 0)n=e;else return n}}function ua(n){return{message:n.message,stack:n.stack,remarks:n.remarks}}const Qs=[{value:.25,text:"0.25x (Quarter)"},{value:.5,text:"0.5x (Half)"},{value:1,text:"1.0x (Full)"},{value:2,text:"2.0x (Double)"}],Bc=[{value:"srgb",text:"sRGB"},{value:"display-p3",text:"DCI-P3"}],Ks=[{value:30,text:"30 FPS"},{value:60,text:"60 FPS"}];var Vt;(function(n){n.Error="error",n.Warn="warn",n.Info="info",n.Http="http",n.Verbose="verbose",n.Debug="debug",n.Silly="silly"})(Vt||(Vt={}));class jc{constructor(){this.logged=new ne,this.history=[],this.profilers={}}get onLogged(){return this.logged.subscribable}log(t){this.logged.dispatch(t),this.history.push(t)}error(t){this.logLevel(Vt.Error,t)}warn(t){this.logLevel(Vt.Warn,t)}info(t){this.logLevel(Vt.Info,t)}http(t){this.logLevel(Vt.Http,t)}verbose(t){this.logLevel(Vt.Verbose,t)}debug(t){this.logLevel(Vt.Debug,t)}silly(t){this.logLevel(Vt.Silly,t)}logLevel(t,e){const r=typeof e=="string"?{message:e}:e;r.level=t,this.log(r)}profile(t,e){const r=performance.now();if(this.profilers[t]){const i=this.profilers[t];delete this.profilers[t];const a=e??{message:t};a.level??(a.level=Vt.Debug),a.durationMs=r-i,this.log(a);return}this.profilers[t]=r}}var Fr;(function(n){n[n.Playing=0]="Playing",n[n.Rendering=1]="Rendering",n[n.Paused=2]="Paused",n[n.Presenting=3]="Presenting"})(Fr||(Fr={}));function Nc(n){const t={version:new jt("version",1),shared:new Me("General",{background:new Qn("background",null),range:new dn("range",[0,1/0]),size:new xa("resolution",new y(1920,1080)),audioOffset:new Zn("audio offset",0)}),preview:new Me("Preview",{fps:new Zn("frame rate",30).setPresets(Ks).setRange(1),resolutionScale:new Je("scale",Qs,1)}),rendering:new Me("Rendering",{fps:new Zn("frame rate",60).setPresets(Ks).setRange(1),resolutionScale:new Je("scale",Qs,1),colorSpace:new Je("color space",Bc),exporter:new Su("exporter",n)})};return t.shared.audioOffset.disable(!n.audio),t}class Uc extends Me{constructor(t){super("project",Nc(t))}getFullPreviewSettings(){return{...this.shared.get(),...this.preview.get()}}getFullRenderingSettings(){return{...this.shared.get(),...this.rendering.get()}}}function Gc(){return new Me("Application Settings",{version:new jt("version",1),appearance:new Me("Appearance",{color:new Qn("accent color",new $e("#33a6ff")).describe("The accent color for the user interface. (Leave empty to use the default color)"),font:new Zs("legacy font",!1).describe("Use the 'JetBrains Mono' font for the user interface."),coordinates:new Zs("coordinates",!0).describe("Display mouse coordinates within the preview window.")}),defaults:new Me("Defaults",{background:new Qn("background",null).describe("The default background color used in new projects."),size:new xa("resolution",new y(1920,1080)).describe("The default resolution used in new projects.")})})}function qc(n,t,e,r,i,a,l=r.logger??new jc){const c=Gc();a.attach(c);const d={name:n,...r,plugins:e,versions:t,settings:c,logger:l};return d.meta=new Uc(d),d.meta.shared.set(c.defaults.get()),d.experimentalFeatures??(d.experimentalFeatures=!1),i.attach(d.meta),d}function Xc(n,t){return{level:Vt.Error,message:n,remarks:`<p>This feature requires enabling the <code>experimentalFeatures</code> flag in your project
configuration:</p>
<pre class=""><code class="language-ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">makeProject</span>({
  <span class="hljs-attr">experimentalFeatures</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-comment">// ...</span>
});</code></pre><p><a href='https://motioncanvas.io/docs/experimental' target='_blank'>Learn more</a> about experimental
features.</p>
`}}const Hc=180/Math.PI,Fe=Math.PI/180;function ta(n,t,e){let r=0,i=n;e=e===void 0?r<i?1:-1:e;const a=[];let l=Math.max(Math.ceil((i-r)/e),0),c=0;for(;l--;)a[c++]=r,r+=e;return a}function Yc(n){const t=ii(),e=un();return t.timeEvents.register(n,e.time())}const ai=[];function fa(){const n=ai.at(-1);if(!n)throw new Error("The playback is not available in the current context.");return n}function Zc(n){ai.push(n)}function Vc(n){if(ai.pop()!==n)throw new Error("startPlayback/endPlayback were called out of order.")}function me(n,...t){const e={[n.name]:n},r=Object.getOwnPropertyDescriptor(e,n.name);if(r)for(let i=t.length-1;i>=0;i--)t[i](e,n.name,r)}const ea=Symbol.for("@motion-canvas/core/decorators/UNINITIALIZED");function Mr(n){return(t,e)=>{let r=ea;Object.defineProperty(t,e,{get(){return r===ea&&(r=n.call(this)),r}})}}function bt(n){return function(t,e,r){r.value.prototype.name=n??e,r.value.prototype.threadable=!0}}me(Q,bt());function*Q(...n){for(const t of n)yield t;yield*oi(...n)}me(Jc,bt());function*Jc(n,t){yield*G(Yc(n)),t&&(yield*t)}me(G,bt());function*G(n=0,t){const e=un(),r=fa().framesToSeconds(1),i=e.time()+n;for(;i-r>e.fixed;)yield;e.time(i),t&&(yield*t)}me(da,bt());function*da(){}function ra(n,t){let e;return typeof n=="string"?(e=t(),hn(e,n)):(e=n(),hn(e,e)),e}me(Lr,bt());function*Lr(n,...t){for(const e of t)yield e,yield*G(n);yield*oi(...t)}function Qc(n){return n&&(typeof n=="object"||typeof n=="function")&&"toPromise"in n}function pa(n){return n!==null&&typeof n=="object"&&Symbol.iterator in n&&"next"in n}function hn(n,t){const e=Object.getPrototypeOf(n);e.threadable||(e.threadable=!0,e.name=typeof t=="string"?t:ga(t))}function ga(n){return Object.getPrototypeOf(n).name??null}class Yn{get onDeferred(){return this.deferred.subscribable}get fixed(){return this.fixedTime}get canceled(){var t;return this.isCanceled||(((t=this.parent)==null?void 0:t.canceled)??!1)}get paused(){var t;return this.isPaused||(((t=this.parent)==null?void 0:t.paused)??!1)}get root(){var t;return((t=this.parent)==null?void 0:t.root)??this}constructor(t){this.runner=t,this.deferred=new ne,this.children=[],this.time=It(0),this.parent=null,this.isCanceled=!1,this.isPaused=!1,this.fixedTime=0,this.queue=[],this.runner.task&&(zt().error({message:`The generator "${ga(this.runner)}" is already being executed by another thread.`,remarks:`<p>This usually happens when you mistakenly reuse a generator that is already
running.</p>
<p>For example, using <code>yield</code> here will run the opacity generator concurrently and
store it in the <code>task</code> variable (in case you want to cancel or await it later):</p>
<pre class=""><code class="language-ts"><span class="hljs-keyword">const</span> task = <span class="hljs-keyword">yield</span> <span class="hljs-title function_">rect</span>().<span class="hljs-title function_">opacity</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);</code></pre><p>Trying to <code>yield</code> this task again will cause the current error:</p>
<pre class=""><code class="language-ts"><span class="hljs-keyword">yield</span> task;</code></pre><p>Passing it to other flow functions will also cause the error:</p>
<pre class=""><code class="language-ts"><span class="hljs-keyword">yield</span>* <span class="hljs-title function_">all</span>(task);</code></pre><p>Try to investigate your code looking for <code>yield</code> statements whose return value
is reused in this way. Here&#39;s an example of a common mistake:</p>
<pre class="wrong"><code class="language-ts"><span class="hljs-keyword">yield</span>* <span class="hljs-title function_">all</span>(
  <span class="hljs-keyword">yield</span> <span class="hljs-title function_">rect</span>().<span class="hljs-title function_">opacity</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), 
  <span class="hljs-keyword">yield</span> <span class="hljs-title function_">rect</span>().<span class="hljs-title function_">x</span>(<span class="hljs-number">200</span>, <span class="hljs-number">1</span>),
);</code></pre><pre class="correct"><code class="language-ts"><span class="hljs-keyword">yield</span>* <span class="hljs-title function_">all</span>(
  <span class="hljs-title function_">rect</span>().<span class="hljs-title function_">opacity</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>), 
  <span class="hljs-title function_">rect</span>().<span class="hljs-title function_">x</span>(<span class="hljs-number">200</span>, <span class="hljs-number">1</span>),
);</code></pre>`}),this.runner=da()),this.runner.task=this}next(){if(this.paused)return{value:null,done:!1};Vs(this);const t=this.runner.next(this.value);return Js(this),this.value=null,t}update(t){this.paused||(this.time(this.time()+t),this.fixedTime+=t),this.children=this.children.filter(e=>!e.canceled)}spawn(t){return pa(t)||(t=t()),this.queue.push(t),t}add(t){t.parent=this,t.isCanceled=!1,t.time(this.time()),t.fixedTime=this.fixedTime,this.children.push(t),hn(t.runner,`unknown ${this.children.length}`)}drain(t){this.queue.forEach(t),this.queue=[]}cancel(){this.deferred.clear(),this.runner.return(),this.isCanceled=!0,this.parent=null,this.drain(t=>t.return())}pause(t){this.isPaused=t}runDeferred(){Vs(this),this.deferred.dispatch(),Js(this)}}me(oi,bt());function*oi(n,...t){let e=!0;typeof n=="boolean"?e=n:t.push(n);const r=un(),i=t.map(c=>r.children.find(d=>d.runner===c)).filter(c=>c),a=r.time();let l;if(e){for(;i.find(c=>!c.canceled);)yield;l=Math.max(...i.map(c=>c.time()))}else{for(;!i.find(d=>d.canceled);)yield;const c=i.filter(d=>d.canceled);l=Math.min(...c.map(d=>d.time()))}r.time(Math.max(a,l))}function Kc(n){return typeof(n==null?void 0:n.then)=="function"}me(ya,bt());function*ya(n,t){const e=fa(),r=n();hn(r,"root");const i=new Yn(r);t==null||t(i);let a=[i];for(;a.length>0;){const l=[],c=[...a],d=e.deltaTime;for(;c.length>0;){const v=c.pop();if(!v||v.canceled)continue;const x=v.next();if(x.done){v.cancel();continue}if(pa(x.value)){const z=new Yn(x.value);v.value=x.value,v.add(z),c.push(v),c.push(z)}else x.value?(v.value=yield x.value,c.push(v)):(v.update(d),v.drain(z=>{const A=new Yn(z);v.add(A),l.unshift(A)}),l.unshift(v))}a=[];for(const v of l)v.canceled||(a.push(v),v.runDeferred());a.length>0&&(yield)}}var ie;(function(n){n[n.BeforeRender=0]="BeforeRender",n[n.BeginRender=1]="BeginRender",n[n.FinishRender=2]="FinishRender",n[n.AfterRender=3]="AfterRender"})(ie||(ie={}));class tu{get onBeforeRender(){return this.beforeRender.subscribable}get onBeginRender(){return this.beginRender.subscribable}get onFinishRender(){return this.finishRender.subscribable}get onAfterRender(){return this.afterRender.subscribable}constructor(t){this.scene=t,this.beforeRender=new ne,this.beginRender=new ne,this.finishRender=new ne,this.afterRender=new ne,this.scene.onRenderLifecycle.subscribe(([e,r])=>{switch(e){case ie.BeforeRender:return this.beforeRender.dispatch(r);case ie.BeginRender:return this.beginRender.dispatch(r);case ie.FinishRender:return this.finishRender.dispatch(r);case ie.AfterRender:return this.afterRender.dispatch(r)}}),this.scene.onReset.subscribe(()=>{this.beforeRender.clear(),this.beginRender.clear(),this.finishRender.clear(),this.afterRender.clear()})}}class zr{constructor(t){this.state=t,this.nextGauss=null}static createSeed(){return Math.floor(Math.random()*4294967296)}nextFloat(t=0,e=1){return dt(t,e,this.next())}nextInt(t=0,e=4294967296){let r=Math.floor(dt(t,e,this.next()));return r===e&&(r=t),r}gauss(t=0,e=1){let r=this.nextGauss;if(this.nextGauss=null,r===null){const i=this.next()*2*Math.PI,a=Math.sqrt(-2*Math.log(1-this.next()));r=Math.cos(i)*a,this.nextGauss=Math.sin(i)*a}return t+r*e}floatArray(t,e=0,r=1){return ta(t).map(()=>this.nextFloat(e,r))}intArray(t,e=0,r=4294967296){return ta(t).map(()=>this.nextInt(e,r))}spawn(){return new zr(this.nextInt())}next(){this.state|=0,this.state=this.state+1831565813|0;let t=Math.imul(this.state^this.state>>>15,1|this.state);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296}}var Lt;(function(n){n[n.Initial=0]="Initial",n[n.AfterTransitionIn=1]="AfterTransitionIn",n[n.CanTransitionOut=2]="CanTransitionOut",n[n.Finished=3]="Finished"})(Lt||(Lt={}));const eu="resolution",ru="destinationTexture",nu="sourceTexture",na="time",iu="deltaTime",su="framerate",au="sourceMatrix",ou="destinationMatrix",lu=`#version 300 es

in vec2 position;

out vec2 screenUV;
out vec2 sourceUV;
out vec2 destinationUV;

uniform mat4 sourceMatrix;
uniform mat4 destinationMatrix;

void main() {
    vec2 position_source = position * 0.5 + 0.5;
    vec4 position_screen = sourceMatrix * vec4(position_source, 0, 1);

    screenUV = position_screen.xy;
    sourceUV = position_source;
    destinationUV = (destinationMatrix * position_screen).xy;

    gl_Position = (position_screen - 0.5) * 2.0;
}
`;class hu{constructor(t,e){this.scene=t,this.sharedContext=e,this.gl=null,this.positionBuffer=null,this.sourceTexture=null,this.destinationTexture=null,this.positionLocation=0,this.quadPositions=new Float32Array([-1,1,-1,-1,1,1,1,-1]),this.handleReload=()=>{this.gl&&this.updateViewport()},t.onReloaded.subscribe(this.handleReload)}setup(t){this.gl=t,this.updateViewport(),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),t.bufferData(t.ARRAY_BUFFER,this.quadPositions,t.STATIC_DRAW),t.vertexAttribPointer(this.positionLocation,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(this.positionLocation),this.sourceTexture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.sourceTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.destinationTexture=t.createTexture(),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,this.destinationTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}teardown(t){t.deleteBuffer(this.positionBuffer),t.disableVertexAttribArray(this.positionLocation),t.deleteTexture(this.sourceTexture),t.deleteTexture(this.destinationTexture),this.positionBuffer=null,this.sourceTexture=null,this.destinationTexture=null,this.gl=null}updateViewport(){if(this.gl){const t=this.scene.getRealSize();this.gl.canvas.width=t.width,this.gl.canvas.height=t.height,this.gl.viewport(0,0,t.width,t.height)}}getGL(){return this.gl??this.sharedContext.borrow(this)}getProgram(t){const e=this.sharedContext.getProgram(t,lu);if(!e)return null;const r=this.scene.getRealSize(),i=this.getGL();return i.useProgram(e),i.uniform1i(i.getUniformLocation(e,nu),0),i.uniform1i(i.getUniformLocation(e,ru),1),i.uniform2f(i.getUniformLocation(e,eu),r.x,r.y),i.uniform1f(i.getUniformLocation(e,iu),this.scene.playback.deltaTime),i.uniform1f(i.getUniformLocation(e,su),this.scene.playback.fps),e}copyTextures(t,e){this.copyTexture(e,this.sourceTexture),this.copyTexture(t,this.destinationTexture)}clear(){const t=this.getGL();t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)}render(){const t=this.getGL();t.drawArrays(t.TRIANGLE_STRIP,0,4)}copyTexture(t,e){const r=this.getGL();r.bindTexture(r.TEXTURE_2D,e),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.generateMipmap(r.TEXTURE_2D)}}class cu{get onChanged(){return this.slides.subscribable}constructor(t){this.scene=t,this.slides=new Nt([]),this.lookup=new Map,this.collisionLookup=new Set,this.current=null,this.canResume=!1,this.waitsForId=null,this.targetId=null,this.handleReload=()=>{this.lookup.clear(),this.collisionLookup.clear(),this.current=null,this.waitsForId=null,this.targetId=null},this.handleReset=()=>{this.collisionLookup.clear(),this.current=null,this.waitsForId=null},this.handleRecalculated=()=>{this.slides.current=[...this.lookup.values()]},this.scene.onReloaded.subscribe(this.handleReload),this.scene.onReset.subscribe(this.handleReset),this.scene.onRecalculated.subscribe(this.handleRecalculated)}setTarget(t){this.targetId=t}resume(){this.canResume=!0}isWaitingFor(t){return this.waitsForId===t}isWaiting(){return this.waitsForId!==null}didHappen(t){var e;if(this.current===null)return!1;for(const r of this.lookup.keys()){if(r===t)return!0;if(r===((e=this.current)==null?void 0:e.id))return!1}return!1}getCurrent(){return this.current}register(t,e){if(this.waitsForId!==null)throw new Error(`The animation already waits for a slide: ${this.waitsForId}.`);const r=this.toId(t);this.scene.playback.state!==Fr.Presenting&&(this.lookup.has(r)||this.lookup.set(r,{id:r,name:t,time:e,scene:this.scene,stack:new Error().stack}),this.collisionLookup.has(t)?this.scene.logger.warn({message:`A slide named "${t}" already exists.`,stack:new Error().stack}):this.collisionLookup.add(t)),this.waitsForId=r,this.current=this.lookup.get(r)??null,this.canResume=!1}shouldWait(t){const e=this.toId(t);if(this.waitsForId!==e)throw new Error(`The animation waits for a different slide: ${this.waitsForId}.`);if(!this.lookup.get(e))throw new Error(`Could not find the "${t}" slide.`);let i=this.canResume;return this.scene.playback.state!==Fr.Presenting&&(i=e!==this.targetId),i&&(this.waitsForId=null),!i}toId(t){return`${this.scene.name}:${t}`}}class uu{constructor(t){this.scene=t,this.signals={},this.variables={},this.handleReset=()=>{this.signals={}},t.onReset.subscribe(this.handleReset)}get(t,e){var r;return(r=this.signals)[t]??(r[t]=It(this.variables[t]??e)),()=>this.signals[t]()}updateSignals(t){this.variables=t,Object.keys(t).map(e=>{e in this.signals&&this.signals[e](t[e])})}}class fu{get firstFrame(){return this.cache.current.firstFrame}get lastFrame(){return this.firstFrame+this.cache.current.duration}get onCacheChanged(){return this.cache.subscribable}get onReloaded(){return this.reloaded.subscribable}get onRecalculated(){return this.recalculated.subscribable}get onThreadChanged(){return this.thread.subscribable}get onRenderLifecycle(){return this.renderLifecycle.subscribable}get onReset(){return this.afterReset.subscribable}get LifecycleEvents(){return this.logger.warn("LifecycleEvents is deprecated. Use lifecycleEvents instead."),this.lifecycleEvents}get previous(){return this.previousScene}constructor(t){this.cache=new Nt({firstFrame:0,transitionDuration:0,duration:0,lastFrame:0}),this.reloaded=new ne,this.recalculated=new ne,this.thread=new Nt(null),this.renderLifecycle=new ne,this.afterReset=new ne,this.lifecycleEvents=new tu(this),this.previousScene=null,this.runner=null,this.state=Lt.Initial,this.cached=!1,this.counters={},this.name=t.name,this.size=t.size,this.resolutionScale=t.resolutionScale,this.logger=t.logger,this.playback=t.playback,this.meta=t.meta,this.runnerFactory=t.config,this.creationStack=t.stack,this.experimentalFeatures=t.experimentalFeatures??!1,me(this.runnerFactory,bt(this.name)),this.timeEvents=new t.timeEventsClass(this),this.variables=new uu(this),this.shaders=new hu(this,t.sharedWebGLContext),this.slides=new cu(this),this.random=new zr(this.meta.seed.get()),this.previousOnTop=!1}update(){}async render(t){let e=0;do e++,await Tt.consumePromises(),t.save(),t.clearRect(0,0,t.canvas.width,t.canvas.height),this.execute(()=>this.draw(t)),t.restore();while(Tt.hasPromises()&&e<10);e>1&&this.logger.debug(`render iterations: ${e}`)}reload({config:t,size:e,stack:r,resolutionScale:i}={}){t&&(this.runnerFactory=t),e&&(this.size=e),i&&(this.resolutionScale=i),r&&(this.creationStack=r),this.cached=!1,this.reloaded.dispatch()}async recalculate(t){const e=this.cache.current;if(e.firstFrame=this.playback.frame,e.lastFrame=e.firstFrame+e.duration,this.isCached()){t(e.lastFrame),this.cache.current={...e};return}for(e.transitionDuration=-1,await this.reset();!this.canTransitionOut();)e.transitionDuration<0&&this.state===Lt.AfterTransitionIn&&(e.transitionDuration=this.playback.frame-e.firstFrame),t(this.playback.frame+1),await this.next();e.transitionDuration===-1&&(e.transitionDuration=0),e.lastFrame=this.playback.frame,e.duration=e.lastFrame-e.firstFrame,await new Promise(r=>setTimeout(r,0)),this.cached=!0,this.cache.current={...e},this.recalculated.dispatch()}async next(){var e;if(!this.runner)return;let t=this.execute(()=>this.runner.next());for(this.update();t.value;){if(Qc(t.value)){const r=await t.value.toPromise();t=this.execute(()=>this.runner.next(r))}else if(Kc(t.value)){const r=await t.value;t=this.execute(()=>this.runner.next(r))}else this.logger.warn({message:"Invalid value yielded by the scene.",object:t.value}),t=this.execute(()=>this.runner.next(t.value));this.update()}if(Tt.hasPromises()){const r=await Tt.consumePromises();this.logger.error({message:"Tried to access an asynchronous property before the node was ready. Make sure to yield the node before accessing the property.",stack:r[0].stack,inspect:((e=r[0].owner)==null?void 0:e.key)??void 0})}t.done&&(this.state=Lt.Finished)}async reset(t=null){this.counters={},this.previousScene=t,this.previousOnTop=!1,this.random=new zr(this.meta.seed.get()),this.runner=ya(()=>this.runnerFactory(this.getView()),e=>{this.thread.current=e}),this.state=Lt.AfterTransitionIn,this.afterReset.dispatch(),await this.next()}getSize(){return this.size}getRealSize(){return this.size.mul(this.resolutionScale)}isAfterTransitionIn(){return this.state===Lt.AfterTransitionIn}canTransitionOut(){return this.state===Lt.CanTransitionOut||this.state===Lt.Finished}isFinished(){return this.state===Lt.Finished}enterInitial(){this.state===Lt.AfterTransitionIn?this.state=Lt.Initial:this.logger.warn(`Scene ${this.name} entered initial in an unexpected state: ${this.state}`)}enterAfterTransitionIn(){this.state===Lt.Initial?this.state=Lt.AfterTransitionIn:this.logger.warn(`Scene ${this.name} transitioned in an unexpected state: ${this.state}`)}enterCanTransitionOut(){this.state===Lt.AfterTransitionIn||this.state===Lt.Initial?this.state=Lt.CanTransitionOut:this.logger.warn(`Scene ${this.name} was marked as finished in an unexpected state: ${this.state}`)}isCached(){return this.cached}execute(t){let e;Wc(this),Zc(this.playback);try{e=t()}finally{Vc(this.playback),Dc(this)}return e}}function du(){return new Me("scene",{version:new jt("version",1),timeEvents:new jt("time events",[]),seed:new jt("seed",zr.createSeed())})}function va(n,t,e){const r=[...n],i=[...t];if(i.length>=r.length){const a=Math.floor(i.length*e),l=Math.floor(dt(r.length-1,i.length,e));let c="";for(let d=0;d<i.length;d++)d<a?c+=i[d]:(r[d]||d<=l)&&(c+=r[d]??i[d]);return c}else{const a=Math.round(r.length*(1-e)),l=Math.floor(dt(r.length+1,i.length,e)),c=[];for(let d=r.length-1;d>=0;d--)d<a?c.unshift(r[d]):(i[d]||d<l)&&c.unshift(i[d]??r[d]);return c.join("")}}function mr(n,t,e,r=!1){if(e===0)return n;if(e===1)return t;if(n==null||t==null){r||zt().warn(`Attempting to lerp ${n} -> ${t} may result in unexpected behavior.`);return}if(typeof n=="number"&&typeof t=="number")return dt(n,t,e);if(typeof n=="string"&&typeof t=="string")return va(n,t,e);if(typeof n=="boolean"&&typeof t=="boolean")return e<.5?n:t;if("lerp"in n)return n.lerp(t,e);if(n&&t&&typeof n=="object"&&typeof t=="object")if(Array.isArray(n)&&Array.isArray(t)){if(n.length===t.length)return n.map((i,a)=>mr(i,t[a],e))}else{let i=!1;if(!(n instanceof Map)&&!(t instanceof Map)&&(i=!0,n=new Map(Object.entries(n)),t=new Map(Object.entries(t))),n instanceof Map&&t instanceof Map){const a=new Map;for(const l of new Set([...n.keys(),...t.keys()])){const c=mr(n.get(l),t.get(l),e,!0);c!==void 0&&a.set(l,c)}return i?Object.fromEntries(a):a}}return t}function pu(n,t,e){return e<.5?n:t}function dt(n,t,e){return n+(t-n)*e}function gu(n,t,e,r,i){return e+(i-n)*(r-e)/(t-n)}function Et(n,t,e){return e<n?n:e>t?t:e}function ma(n,t,e){let r=t;e>1?e=1/e:r=!r;const i=r?Math.acos(Et(-1,1,1-n)):Math.asin(n),a=dt(i,dt(0,Math.PI/2,n),e);let l=Math.sin(a),c=1-Math.cos(a);return t&&([l,c]=[c,l]),new y(l,c)}function re(n,t=0,e=1){return n=n<.5?4*n*n*n:1-Math.pow(-2*n+2,3)/2,dt(t,e,n)}function br(n,t=0,e=1){return n=n===1?1:1-Math.pow(2,-10*n),dt(t,e,n)}function yu(n,t=0,e=1){return dt(t,e,n)}me(Qt,bt());function*Qt(n,t,e){const r=un(),i=r.time(),a=r.time()+n;for(t(0,0);a>r.fixed;){const l=r.fixed-i,c=l/n;l>0&&t(c,l),yield}r.time(a),t(1,n),e==null||e(1,n)}class Tt{static collectPromise(t,e=null){const r={promise:t,value:e,stack:new Error().stack},i=this.collectionStack.at(-1);return i&&(r.owner=i.owner),t.then(a=>{r.value=a,i==null||i.markDirty()}),this.promises.push(r),r}static hasPromises(){return this.promises.length>0}static async consumePromises(){const t=[...this.promises];return await Promise.all(t.map(e=>e.promise)),this.promises=this.promises.filter(e=>!t.includes(e)),t}constructor(t){this.owner=t,this.dependencies=new Set,this.event=new Ac,this.markDirty=()=>this.event.raise(),this.invokable=this.invoke.bind(this),Object.defineProperty(this.invokable,"context",{value:this}),Object.defineProperty(this.invokable,"toPromise",{value:this.toPromise.bind(this)})}invoke(){}startCollecting(){if(Tt.collectionSet.has(this))throw new ca("A circular dependency occurred between signals.",`This can happen when signals reference each other in a loop.
        Try using the attached stack trace to locate said loop.`);Tt.collectionSet.add(this),Tt.collectionStack.push(this)}finishCollecting(){if(Tt.collectionSet.delete(this),Tt.collectionStack.pop()!==this)throw new Error("collectStart/collectEnd was called out of order.")}clearDependencies(){this.dependencies.forEach(t=>t.unsubscribe(this.markDirty)),this.dependencies.clear()}collect(){const t=Tt.collectionStack.at(-1);t&&(t.dependencies.add(this.event.subscribable),this.event.subscribe(t.markDirty))}dispose(){this.clearDependencies(),this.event.clear(),this.owner=null}async toPromise(){do await Tt.consumePromises(),this.invokable();while(Tt.hasPromises());return this.invokable}}Tt.collectionSet=new Set;Tt.collectionStack=[];Tt.promises=[];const yr=Symbol.for("@motion-canvas/core/signals/default");function ye(n){return typeof n=="function"}function Ve(n,t){return ye(n)?()=>t(n()):t(n)}function ae(n){return ye(n)?n():n}class Qe extends Tt{constructor(t,e,r=void 0,i=l=>l,a={}){super(r),this.initial=t,this.interpolation=e,this.parser=i,this.tweening=!1,Object.defineProperty(this.invokable,"reset",{value:this.reset.bind(this)}),Object.defineProperty(this.invokable,"save",{value:this.save.bind(this)}),Object.defineProperty(this.invokable,"isInitial",{value:this.isInitial.bind(this)}),this.initial!==void 0&&(this.current=this.initial,this.markDirty(),ye(this.initial)||(this.last=this.parse(this.initial))),this.extensions={getter:this.getter.bind(this),setter:this.setter.bind(this),tweener:this.tweener.bind(this),...a}}toSignal(){return this.invokable}parse(t){return this.parser(t)}set(t){return this.extensions.setter(t),this.owner}setter(t){return t===yr&&(t=this.initial),this.current===t?this.owner:(this.current=t,this.clearDependencies(),ye(t)||(this.last=this.parse(t)),this.markDirty(),this.owner)}get(){return this.extensions.getter()}getter(){var t;if(this.event.isRaised()&&ye(this.current)){this.clearDependencies(),this.startCollecting();try{this.last=this.parse(this.current())}catch(e){zt().error({...ua(e),inspect:(t=this.owner)==null?void 0:t.key})}this.finishCollecting()}return this.event.reset(),this.collect(),this.last}invoke(t,e,r=re,i=this.interpolation){return t===void 0?this.get():e===void 0?this.set(t):this.createQueue(r,i).to(t,e)}createQueue(t,e){const r=this.get(),i=[],a=ra("animation chain",function*(){for(;i.length>0;)yield*i.shift()});return a.to=(l,c,d=t,v=e)=>(t=d,e=v,i.push(this.tween(l,c,d,v)),a),a.back=(l,c=t,d=e)=>(t=c,e=d,i.push(this.tween(r,l,t,e)),a),a.wait=l=>(i.push(G(l)),a),a.run=l=>(i.push(l),a),a.do=l=>(i.push(ra(function*(){l()})),a),a}*tween(t,e,r,i){t===yr&&(t=this.initial),this.tweening=!0,yield*this.extensions.tweener(t,e,r,i),this.set(t),this.tweening=!1}*tweener(t,e,r,i){const a=this.get();yield*Qt(e,l=>{this.set(i(a,this.parse(ae(t)),r(l)))})}dispose(){super.dispose(),this.initial=void 0,this.current=void 0,this.last=void 0}reset(){return this.initial!==void 0&&this.set(this.initial),this.owner}save(){return this.set(this.get())}isInitial(){return this.collect(),this.current===this.initial}getInitial(){return this.initial}raw(){return this.current}isTweening(){return this.tweening}}class fn extends Qe{constructor(t,e,r,i,a=void 0,l={}){var c;super(void 0,i,a,e,l),this.entries=t,this.signals=[],this.parser=e;for(const d of t){let v,x;Array.isArray(d)?([v,x]=d,(c=x.context).owner??(c.owner=this)):(v=d,x=new Qe(Ve(r,z=>e(z)[d]),dt,a??this.invokable).toSignal()),this.signals.push([v,x]),Object.defineProperty(this.invokable,v,{value:x})}}toSignal(){return this.invokable}parse(t){return this.parser(t)}getter(){return this.parse(Object.fromEntries(this.signals.map(([t,e])=>[t,e()])))}setter(t){if(ye(t))for(const[e,r]of this.signals)r(()=>this.parser(t())[e]);else{const e=this.parse(t);for(const[r,i]of this.signals)i(e[r])}return this.owner}reset(){for(const[,t]of this.signals)t.reset();return this.owner}save(){for(const[,t]of this.signals)t.save();return this.owner}isInitial(){for(const[,t]of this.signals)if(!t.isInitial())return!1;return!0}raw(){return Object.fromEntries(this.signals.map(([t,e])=>[t,e.context.raw()]))}}class vu extends Tt{constructor(t,e){super(e),this.factory=t,this.markDirty()}toSignal(){return this.invokable}dispose(){super.dispose(),this.last=void 0}invoke(...t){var e;if(this.event.isRaised()){this.clearDependencies(),this.startCollecting();try{this.last=this.factory(...t)}catch(r){zt().error({...ua(r),inspect:(e=this.owner)==null?void 0:e.key})}this.finishCollecting()}return this.event.reset(),this.collect(),this.last}}class ba extends fn{constructor(t,e,r,i,a=void 0,l={}){super(t,e,r,i,a,l),Object.defineProperty(this.invokable,"edit",{value:this.edit.bind(this)}),Object.defineProperty(this.invokable,"mul",{value:this.mul.bind(this)}),Object.defineProperty(this.invokable,"div",{value:this.div.bind(this)}),Object.defineProperty(this.invokable,"add",{value:this.add.bind(this)}),Object.defineProperty(this.invokable,"sub",{value:this.sub.bind(this)}),Object.defineProperty(this.invokable,"dot",{value:this.dot.bind(this)}),Object.defineProperty(this.invokable,"cross",{value:this.cross.bind(this)}),Object.defineProperty(this.invokable,"mod",{value:this.mod.bind(this)})}toSignal(){return this.invokable}edit(t,e,r,i){const a=t(this.get());return this.invoke(a,e,r,i)}mul(t,e,r,i){const a=l=>l.mul(t);return e===void 0?this.edit(a):this.edit(a,e,r,i)}div(t,e,r,i){const a=l=>l.div(t);return e===void 0?this.edit(a):this.edit(a,e,r,i)}add(t,e,r,i){const a=l=>l.add(t);return e===void 0?this.edit(a):this.edit(a,e,r,i)}sub(t,e,r,i){const a=l=>l.sub(t);return e===void 0?this.edit(a):this.edit(a,e,r,i)}dot(t,e,r,i){const a=l=>l.dot(t);return e===void 0?this.edit(a):this.edit(a,e,r,i)}cross(t,e,r,i){const a=l=>l.cross(t);return e===void 0?this.edit(a):this.edit(a,e,r,i)}mod(t,e,r,i){const a=l=>l.mod(t);return e===void 0?this.edit(a):this.edit(a,e,r,i)}}function mu(n,t){return new vu(n,t).toSignal()}function It(n,t=mr,e){return new Qe(n,t,e).toSignal()}class Jt{static createSignal(t,e=Jt.lerp){return new fn(["top","right","bottom","left"],r=>new Jt(r),t,e).toSignal()}static lerp(t,e,r){return new Jt(dt(t.top,e.top,r),dt(t.right,e.right,r),dt(t.bottom,e.bottom,r),dt(t.left,e.left,r))}get x(){return this.left+this.right}get y(){return this.top+this.bottom}constructor(t=0,e,r,i){if(this.top=0,this.right=0,this.bottom=0,this.left=0,t!=null){if(Array.isArray(t)&&(i=t[3],r=t[2],e=t[1],t=t[0]),typeof t=="number"){this.top=t,this.right=e!==void 0?e:t,this.bottom=r!==void 0?r:t,this.left=i!==void 0?i:e!==void 0?e:t;return}this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left}}lerp(t,e){return Jt.lerp(this,t,e)}scale(t){return new Jt(this.top*t,this.right*t,this.bottom*t,this.left*t)}addScalar(t){return new Jt(this.top+t,this.right+t,this.bottom+t,this.left+t)}toSymbol(){return Jt.symbol}toString(){return`Spacing(${this.top}, ${this.right}, ${this.bottom}, ${this.left})`}toUniform(t,e){t.uniform4f(e,this.top,this.right,this.bottom,this.left)}serialize(){return{top:this.top,right:this.right,bottom:this.bottom,left:this.left}}}Jt.symbol=Symbol.for("@motion-canvas/core/types/Spacing");const Rr=1e-6;class gt{static fromRotation(t){return gt.identity.rotate(t)}static fromTranslation(t){return gt.identity.translate(new y(t))}static fromScaling(t){return gt.identity.scale(new y(t))}get x(){return new y(this.values[0],this.values[1])}get y(){return new y(this.values[2],this.values[3])}get scaleX(){return this.values[0]}set scaleX(t){this.values[0]=this.x.normalized.scale(t).x}get skewX(){return this.values[1]}set skewX(t){this.values[1]=t}get scaleY(){return this.values[3]}set scaleY(t){this.values[3]=this.y.normalized.scale(t).y}get skewY(){return this.values[2]}set skewY(t){this.values[2]=t}get translateX(){return this.values[4]}set translateX(t){this.values[4]=t}get translateY(){return this.values[5]}set translateY(t){this.values[5]=t}get rotation(){return y.degrees(this.values[0],this.values[1])}set rotation(t){const e=this.rotate(t-this.rotation);this.values[0]=e.values[0],this.values[1]=e.values[1],this.values[2]=e.values[2],this.values[3]=e.values[3]}get translation(){return new y(this.values[4],this.values[5])}set translation(t){const e=new y(t);this.values[4]=e.x,this.values[5]=e.y}get scaling(){return new y(this.values[0],this.values[3])}set scaling(t){const e=new y(t),r=new y(this.values[0],this.values[1]).normalized,i=new y(this.values[2],this.values[3]).normalized;this.values[0]=r.x*e.x,this.values[1]=r.y*e.y,this.values[2]=i.x*e.x,this.values[3]=i.y*e.y}get inverse(){const t=this.values[0],e=this.values[1],r=this.values[2],i=this.values[3],a=this.values[4],l=this.values[5];let c=t*i-e*r;return c?(c=1/c,new gt(i*c,-e*c,-r*c,t*c,(r*l-i*a)*c,(e*a-t*l)*c)):null}get determinant(){return this.values[0]*this.values[3]-this.values[1]*this.values[2]}get domMatrix(){return new DOMMatrix([this.values[0],this.values[1],this.values[2],this.values[3],this.values[4],this.values[5]])}constructor(t,e,r,i,a,l){if(this.values=new Float32Array(6),arguments.length===0){this.values=new Float32Array([1,0,0,1,0,0]);return}if(arguments.length===6){this.values[0]=t,this.values[1]=e,this.values[2]=r,this.values[3]=i,this.values[4]=a,this.values[5]=l;return}if(t instanceof DOMMatrix){this.values[0]=t.m11,this.values[1]=t.m12,this.values[2]=t.m21,this.values[3]=t.m22,this.values[4]=t.m41,this.values[5]=t.m42;return}if(t instanceof gt){this.values=t.values;return}if(Array.isArray(t)){if(t.length===2){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=e[0],this.values[3]=e[1],this.values[4]=r[0],this.values[5]=r[1];return}if(t.length===3){const x=new y(t[0]),z=new y(t[1]),A=new y(t[2]);this.values[0]=x.x,this.values[1]=x.y,this.values[2]=z.x,this.values[3]=z.y,this.values[4]=A.x,this.values[5]=A.y;return}this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.values[3]=t[3],this.values[4]=t[4],this.values[5]=t[5];return}const c=new y(t),d=new y(e),v=new y(r);this.values[0]=c.x,this.values[1]=c.y,this.values[2]=d.x,this.values[3]=d.y,this.values[4]=v.x,this.values[5]=v.y}column(t){return new y(this.values[t*2],this.values[t*2+1])}row(t){return[this.values[t],this.values[t+2],this.values[t+4]]}mul(t){const e=this.values[0],r=this.values[1],i=this.values[2],a=this.values[3],l=this.values[4],c=this.values[5],d=t.values[0],v=t.values[1],x=t.values[2],z=t.values[3],A=t.values[4],B=t.values[5];return new gt(e*d+i*v,r*d+a*v,e*x+i*z,r*x+a*z,e*A+i*B+l,r*A+a*B+c)}rotate(t,e=!0){e&&(t*=Fe);const r=this.values[0],i=this.values[1],a=this.values[2],l=this.values[3],c=this.values[4],d=this.values[5],v=Math.sin(t),x=Math.cos(t);return new gt(r*x+a*v,i*x+l*v,r*-v+a*x,i*-v+l*x,c,d)}scale(t){const e=new y(t);return new gt(this.values[0]*e.x,this.values[1]*e.x,this.values[2]*e.y,this.values[3]*e.y,this.values[4],this.values[5])}mulScalar(t){return new gt(this.values[0]*t,this.values[1]*t,this.values[2]*t,this.values[3]*t,this.values[4]*t,this.values[5]*t)}translate(t){const e=new y(t);return new gt(this.values[0],this.values[1],this.values[2],this.values[3],this.values[0]*e.x+this.values[2]*e.y+this.values[4],this.values[1]*e.x+this.values[3]*e.y+this.values[5])}add(t){return new gt(this.values[0]+t.values[0],this.values[1]+t.values[1],this.values[2]+t.values[2],this.values[3]+t.values[3],this.values[4]+t.values[4],this.values[5]+t.values[5])}sub(t){return new gt(this.values[0]-t.values[0],this.values[1]-t.values[1],this.values[2]-t.values[2],this.values[3]-t.values[3],this.values[4]-t.values[4],this.values[5]-t.values[5])}toSymbol(){return gt.symbol}toUniform(t,e){t.uniformMatrix3fv(e,!1,[this.values[0],this.values[1],0,this.values[2],this.values[3],0,this.values[4],this.values[5],1])}equals(t,e=Rr){return Math.abs(this.values[0]-t.values[0])<=e+Number.EPSILON&&Math.abs(this.values[1]-t.values[1])<=e+Number.EPSILON&&Math.abs(this.values[2]-t.values[2])<=e+Number.EPSILON&&Math.abs(this.values[3]-t.values[3])<=e+Number.EPSILON&&Math.abs(this.values[4]-t.values[4])<=e+Number.EPSILON&&Math.abs(this.values[5]-t.values[5])<=e+Number.EPSILON}exactlyEquals(t){return this.values[0]===t.values[0]&&this.values[1]===t.values[1]&&this.values[2]===t.values[2]&&this.values[3]===t.values[3]&&this.values[4]===t.values[4]&&this.values[5]===t.values[5]}}gt.symbol=Symbol.for("@motion-canvas/core/types/Matrix2D");gt.identity=new gt(1,0,0,1,0,0);gt.zero=new gt(0,0,0,0,0,0);var ia;(function(n){n[n.Vertical=1]="Vertical",n[n.Horizontal=2]="Horizontal"})(ia||(ia={}));var Wt;(function(n){n[n.Top=4]="Top",n[n.Bottom=8]="Bottom",n[n.Left=16]="Left",n[n.Right=32]="Right"})(Wt||(Wt={}));var mt;(function(n){n[n.Middle=3]="Middle",n[n.Top=5]="Top",n[n.Bottom=9]="Bottom",n[n.Left=18]="Left",n[n.Right=34]="Right",n[n.TopLeft=20]="TopLeft",n[n.TopRight=36]="TopRight",n[n.BottomLeft=24]="BottomLeft",n[n.BottomRight=40]="BottomRight"})(mt||(mt={}));function bu(n){if(n===mt.Middle)return y.zero;let t=0;n&Wt.Left?t=-1:n&Wt.Right&&(t=1);let e=0;return n&Wt.Top?e=-1:n&Wt.Bottom&&(e=1),new y(t,e)}class y{static createSignal(t,e=y.lerp,r){return new ba(["x","y"],i=>new y(i),t,e,r).toSignal()}static lerp(t,e,r){let i,a;return typeof r=="number"?i=a=r:(i=r.x,a=r.y),new y(dt(t.x,e.x,i),dt(t.y,e.y,a))}static arcLerp(t,e,r,i=!1,a){return a??(a=t.sub(e).ctg),y.lerp(t,e,ma(r,i,a))}static createArcLerp(t,e){return(r,i,a)=>y.arcLerp(r,i,a,t,e)}static polarLerp(t,e,r,i=!1,a=y.zero){t=t.sub(a),e=e.sub(a);const l=t.degrees;let c=e.degrees;l>c!==i&&(c=c+(i?-360:360));const v=dt(l,c,r)*Fe,x=dt(t.magnitude,e.magnitude,r);return new y(x*Math.cos(v)+a.x,x*Math.sin(v)+a.y)}static createPolarLerp(t=!1,e=y.zero){return(r,i,a)=>y.polarLerp(r,i,a,t,new y(e))}static fromOrigin(t){const e=new y;return t===mt.Middle||(t&Wt.Left?e.x=-1:t&Wt.Right&&(e.x=1),t&Wt.Top?e.y=-1:t&Wt.Bottom&&(e.y=1)),e}static fromScalar(t){return new y(t,t)}static fromRadians(t){return new y(Math.cos(t),Math.sin(t))}static fromDegrees(t){return y.fromRadians(t*Fe)}static radians(t,e){return Math.atan2(e,t)}static degrees(t,e){return y.radians(t,e)*Hc}static magnitude(t,e){return Math.sqrt(t*t+e*e)}static squaredMagnitude(t,e){return t*t+e*e}static angleBetween(t,e){return Math.acos(Et(-1,1,t.dot(e)/(t.magnitude*e.magnitude)))*(t.cross(e)>=0?1:-1)}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}get magnitude(){return y.magnitude(this.x,this.y)}get squaredMagnitude(){return y.squaredMagnitude(this.x,this.y)}get normalized(){return this.scale(1/y.magnitude(this.x,this.y))}get safe(){return new y(isNaN(this.x)?0:this.x,isNaN(this.y)?0:this.y)}get flipped(){return new y(-this.x,-this.y)}get floored(){return new y(Math.floor(this.x),Math.floor(this.y))}get rounded(){return new y(Math.round(this.x),Math.round(this.y))}get ceiled(){return new y(Math.ceil(this.x),Math.ceil(this.y))}get perpendicular(){return new y(this.y,-this.x)}get radians(){return y.radians(this.x,this.y)}get degrees(){return y.degrees(this.x,this.y)}get ctg(){return this.x/this.y}constructor(t,e){if(this.x=0,this.y=0,t!=null){if(typeof t!="object"){this.x=t,this.y=e??t;return}if(Array.isArray(t)){this.x=t[0],this.y=t[1];return}if("width"in t){this.x=t.width,this.y=t.height;return}this.x=t.x,this.y=t.y}}lerp(t,e){return y.lerp(this,t,e)}getOriginOffset(t){const e=y.fromOrigin(t);return e.x*=this.x/2,e.y*=this.y/2,e}scale(t){return new y(this.x*t,this.y*t)}transformAsPoint(t){const e=new gt(t);return new y(this.x*e.scaleX+this.y*e.skewY+e.translateX,this.x*e.skewX+this.y*e.scaleY+e.translateY)}transform(t){const e=new gt(t);return new y(this.x*e.scaleX+this.y*e.skewY,this.x*e.skewX+this.y*e.scaleY)}mul(t){const e=new y(t);return new y(this.x*e.x,this.y*e.y)}div(t){const e=new y(t);return new y(this.x/e.x,this.y/e.y)}add(t){const e=new y(t);return new y(this.x+e.x,this.y+e.y)}sub(t){const e=new y(t);return new y(this.x-e.x,this.y-e.y)}dot(t){const e=new y(t);return this.x*e.x+this.y*e.y}cross(t){const e=new y(t);return this.x*e.y-this.y*e.x}mod(t){const e=new y(t);return new y(this.x%e.x,this.y%e.y)}rotate(t,e=y.zero){const r=new y(e),i=gt.fromTranslation(r).rotate(t).translate(r.flipped);return this.transformAsPoint(i)}addX(t){return new y(this.x+t,this.y)}addY(t){return new y(this.x,this.y+t)}map(t){return new y(t(this.x,0),t(this.y,1))}toSymbol(){return y.symbol}toString(){return`Vector2(${this.x}, ${this.y})`}toArray(){return[this.x,this.y]}toUniform(t,e){t.uniform2f(e,this.x,this.y)}serialize(){return{x:this.x,y:this.y}}exactlyEquals(t){return this.x===t.x&&this.y===t.y}equals(t,e=Rr){return Math.abs(this.x-t.x)<=e+Number.EPSILON&&Math.abs(this.y-t.y)<=e+Number.EPSILON}*[Symbol.iterator](){yield this.x,yield this.y}}y.symbol=Symbol.for("@motion-canvas/core/types/Vector2");y.zero=new y;y.one=new y(1,1);y.right=new y(1,0);y.left=new y(-1,0);y.up=new y(0,1);y.down=new y(0,-1);y.top=new y(0,-1);y.bottom=new y(0,1);y.topLeft=new y(-1,-1);y.topRight=new y(1,-1);y.bottomLeft=new y(-1,1);y.bottomRight=new y(1,1);class nt{static createSignal(t,e=nt.lerp){return new fn(["x","y","width","height"],r=>new nt(r),t,e).toSignal()}static lerp(t,e,r){let i,a,l,c;return typeof r=="number"?i=a=l=c=r:r instanceof y?(i=l=r.x,a=c=r.y):(i=r.x,a=r.y,l=r.width,c=r.height),new nt(dt(t.x,e.x,i),dt(t.y,e.y,a),dt(t.width,e.width,l),dt(t.height,e.height,c))}static arcLerp(t,e,r,i=!1,a){return a??(a=(t.position.sub(e.position).ctg+t.size.sub(e.size).ctg)/2),nt.lerp(t,e,ma(r,i,a))}static fromSizeCentered(t){return new nt(-t.width/2,-t.height/2,t.width,t.height)}static fromPoints(...t){let e=1/0,r=1/0,i=-1/0,a=-1/0;for(const l of t)l.x>i&&(i=l.x),l.x<e&&(e=l.x),l.y>a&&(a=l.y),l.y<r&&(r=l.y);return new nt(e,r,i-e,a-r)}static fromBBoxes(...t){let e=1/0,r=1/0,i=-1/0,a=-1/0;for(const l of t){const c=l.x+l.width;c>i&&(i=c),l.x<e&&(e=l.x);const d=l.y+l.height;d>a&&(a=d),l.y<r&&(r=l.y)}return new nt(e,r,i-e,a-r)}lerp(t,e){return nt.lerp(this,t,e)}get position(){return new y(this.x,this.y)}set position(t){this.x=t.x,this.y=t.y}get size(){return new y(this.width,this.height)}get center(){return new y(this.x+this.width/2,this.y+this.height/2)}get left(){return this.x}set left(t){this.width+=this.x-t,this.x=t}get right(){return this.x+this.width}set right(t){this.width=t-this.x}get top(){return this.y}set top(t){this.height+=this.y-t,this.y=t}get bottom(){return this.y+this.height}set bottom(t){this.height=t-this.y}get topLeft(){return this.position}get topRight(){return new y(this.x+this.width,this.y)}get bottomLeft(){return new y(this.x,this.y+this.height)}get bottomRight(){return new y(this.x+this.width,this.y+this.height)}get corners(){return[this.topLeft,this.topRight,this.bottomRight,this.bottomLeft]}get pixelPerfect(){return new nt(Math.floor(this.x),Math.floor(this.y),Math.ceil(this.width+1),Math.ceil(this.height+1))}constructor(t,e=0,r=0,i=0){if(this.x=0,this.y=0,this.width=0,this.height=0,t!=null){if(typeof t=="number"){this.x=t,this.y=e,this.width=r,this.height=i;return}if(t instanceof y){this.x=t.x,this.y=t.y,e instanceof y&&(this.width=e.x,this.height=e.y);return}if(Array.isArray(t)){this.x=t[0],this.y=t[1],this.width=t[2],this.height=t[3];return}this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}}transform(t){return new nt(this.position.transformAsPoint(t),this.size.transform(t))}transformCorners(t){return this.corners.map(e=>e.transformAsPoint(t))}expand(t){const e=new Jt(t),r=new nt(this);return r.left-=e.left,r.top-=e.top,r.right+=e.right,r.bottom+=e.bottom,r}addSpacing(t){return this.expand(t)}includes(t){return t.x>=this.x&&t.x<=this.x+this.width&&t.y>=this.y&&t.y<=this.y+this.height}intersects(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top}intersection(t){const e=new nt;return this.intersects(t)&&(e.left=Math.max(this.left,t.left),e.top=Math.max(this.top,t.top),e.right=Math.min(this.right,t.right),e.bottom=Math.min(this.bottom,t.bottom)),e}union(t){const e=new nt;return e.left=Math.min(this.left,t.left),e.top=Math.min(this.top,t.top),e.right=Math.max(this.right,t.right),e.bottom=Math.max(this.bottom,t.bottom),e}toSymbol(){return nt.symbol}toString(){return`BBox(${this.x}, ${this.y}, ${this.width}, ${this.height})`}toUniform(t,e){t.uniform4f(e,this.x,this.y,this.width,this.height)}serialize(){return{x:this.x,y:this.y,width:this.width,height:this.height}}}nt.symbol=Symbol.for("@motion-canvas/core/types/Rect");var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wa={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(n,t){(function(e,r){n.exports=r()})(wu,function(){for(var e=function(s,o,h){return o===void 0&&(o=0),h===void 0&&(h=1),s<o?o:s>h?h:s},r=e,i=function(s){s._clipped=!1,s._unclipped=s.slice(0);for(var o=0;o<=3;o++)o<3?((s[o]<0||s[o]>255)&&(s._clipped=!0),s[o]=r(s[o],0,255)):o===3&&(s[o]=r(s[o],0,1));return s},a={},l=0,c=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];l<c.length;l+=1){var d=c[l];a["[object "+d+"]"]=d.toLowerCase()}var v=function(s){return a[Object.prototype.toString.call(s)]||"object"},x=v,z=function(s,o){return o===void 0&&(o=null),s.length>=3?Array.prototype.slice.call(s):x(s[0])=="object"&&o?o.split("").filter(function(h){return s[0][h]!==void 0}).map(function(h){return s[0][h]}):s[0]},A=v,B=function(s){if(s.length<2)return null;var o=s.length-1;return A(s[o])=="string"?s[o].toLowerCase():null},X=Math.PI,T={clip_rgb:i,limit:e,type:v,unpack:z,last:B,TWOPI:X*2,PITHIRD:X/3,DEG2RAD:X/180,RAD2DEG:180/X},N={format:{},autodetect:[]},it=T.last,K=T.clip_rgb,yt=T.type,ht=N,ut=function(){for(var o=[],h=arguments.length;h--;)o[h]=arguments[h];var u=this;if(yt(o[0])==="object"&&o[0].constructor&&o[0].constructor===this.constructor)return o[0];var p=it(o),g=!1;if(!p){g=!0,ht.sorted||(ht.autodetect=ht.autodetect.sort(function(C,M){return M.p-C.p}),ht.sorted=!0);for(var f=0,m=ht.autodetect;f<m.length;f+=1){var b=m[f];if(p=b.test.apply(b,o),p)break}}if(ht.format[p]){var S=ht.format[p].apply(null,g?o:o.slice(0,-1));u._rgb=K(S)}else throw new Error("unknown format: "+o);u._rgb.length===3&&u._rgb.push(1)};ut.prototype.toString=function(){return yt(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var _=ut,xt=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(xt.Color,[null].concat(s)))};xt.Color=_,xt.version="2.4.2";var ct=xt,Rt=T.unpack,qt=Math.max,_e=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Rt(s,"rgb"),u=h[0],p=h[1],g=h[2];u=u/255,p=p/255,g=g/255;var f=1-qt(u,qt(p,g)),m=f<1?1/(1-f):0,b=(1-u-f)*m,S=(1-p-f)*m,C=(1-g-f)*m;return[b,S,C,f]},ee=_e,Dt=T.unpack,rr=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=Dt(s,"cmyk");var h=s[0],u=s[1],p=s[2],g=s[3],f=s.length>4?s[4]:1;return g===1?[0,0,0,f]:[h>=1?0:255*(1-h)*(1-g),u>=1?0:255*(1-u)*(1-g),p>=1?0:255*(1-p)*(1-g),f]},nr=rr,xe=ct,wt=_,Xt=N,jr=T.unpack,ce=T.type,yn=ee;wt.prototype.cmyk=function(){return yn(this._rgb)},xe.cmyk=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(wt,[null].concat(s,["cmyk"])))},Xt.format.cmyk=nr,Xt.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=jr(s,"cmyk"),ce(s)==="array"&&s.length===4)return"cmyk"}});var vn=T.unpack,Nr=T.last,ir=function(s){return Math.round(s*100)/100},Ur=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=vn(s,"hsla"),u=Nr(s)||"lsa";return h[0]=ir(h[0]||0),h[1]=ir(h[1]*100)+"%",h[2]=ir(h[2]*100)+"%",u==="hsla"||h.length>3&&h[3]<1?(h[3]=h.length>3?h[3]:1,u="hsla"):h.length=3,u+"("+h.join(",")+")"},Gr=Ur,We=T.unpack,mn=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=We(s,"rgba");var h=s[0],u=s[1],p=s[2];h/=255,u/=255,p/=255;var g=Math.min(h,u,p),f=Math.max(h,u,p),m=(f+g)/2,b,S;return f===g?(b=0,S=Number.NaN):b=m<.5?(f-g)/(f+g):(f-g)/(2-f-g),h==f?S=(u-p)/(f-g):u==f?S=2+(p-h)/(f-g):p==f&&(S=4+(h-u)/(f-g)),S*=60,S<0&&(S+=360),s.length>3&&s[3]!==void 0?[S,b,m,s[3]]:[S,b,m]},qr=mn,xr=T.unpack,vt=T.last,ue=Gr,Xr=qr,bn=Math.round,La=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=xr(s,"rgba"),u=vt(s)||"rgb";return u.substr(0,3)=="hsl"?ue(Xr(h),u):(h[0]=bn(h[0]),h[1]=bn(h[1]),h[2]=bn(h[2]),(u==="rgba"||h.length>3&&h[3]<1)&&(h[3]=h.length>3?h[3]:1,u="rgba"),u+"("+h.slice(0,u==="rgb"?3:4).join(",")+")")},za=La,Ma=T.unpack,wn=Math.round,$a=function(){for(var s,o=[],h=arguments.length;h--;)o[h]=arguments[h];o=Ma(o,"hsl");var u=o[0],p=o[1],g=o[2],f,m,b;if(p===0)f=m=b=g*255;else{var S=[0,0,0],C=[0,0,0],M=g<.5?g*(1+p):g+p-g*p,R=2*g-M,I=u/360;S[0]=I+1/3,S[1]=I,S[2]=I-1/3;for(var $=0;$<3;$++)S[$]<0&&(S[$]+=1),S[$]>1&&(S[$]-=1),6*S[$]<1?C[$]=R+(M-R)*6*S[$]:2*S[$]<1?C[$]=M:3*S[$]<2?C[$]=R+(M-R)*(2/3-S[$])*6:C[$]=R;s=[wn(C[0]*255),wn(C[1]*255),wn(C[2]*255)],f=s[0],m=s[1],b=s[2]}return o.length>3?[f,m,b,o[3]]:[f,m,b,1]},Si=$a,Ti=Si,Pi=N,Ci=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Ri=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,ki=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Fi=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Li=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,zi=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Mi=Math.round,$i=function(s){s=s.toLowerCase().trim();var o;if(Pi.format.named)try{return Pi.format.named(s)}catch{}if(o=s.match(Ci)){for(var h=o.slice(1,4),u=0;u<3;u++)h[u]=+h[u];return h[3]=1,h}if(o=s.match(Ri)){for(var p=o.slice(1,5),g=0;g<4;g++)p[g]=+p[g];return p}if(o=s.match(ki)){for(var f=o.slice(1,4),m=0;m<3;m++)f[m]=Mi(f[m]*2.55);return f[3]=1,f}if(o=s.match(Fi)){for(var b=o.slice(1,5),S=0;S<3;S++)b[S]=Mi(b[S]*2.55);return b[3]=+b[3],b}if(o=s.match(Li)){var C=o.slice(1,4);C[1]*=.01,C[2]*=.01;var M=Ti(C);return M[3]=1,M}if(o=s.match(zi)){var R=o.slice(1,4);R[1]*=.01,R[2]*=.01;var I=Ti(R);return I[3]=+o[4],I}};$i.test=function(s){return Ci.test(s)||Ri.test(s)||ki.test(s)||Fi.test(s)||Li.test(s)||zi.test(s)};var Ia=$i,Aa=ct,Ii=_,Ai=N,Ea=T.type,Oa=za,Ei=Ia;Ii.prototype.css=function(s){return Oa(this._rgb,s)},Aa.css=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Ii,[null].concat(s,["css"])))},Ai.format.css=Ei,Ai.autodetect.push({p:5,test:function(s){for(var o=[],h=arguments.length-1;h-- >0;)o[h]=arguments[h+1];if(!o.length&&Ea(s)==="string"&&Ei.test(s))return"css"}});var Oi=_,_a=ct,Wa=N,Da=T.unpack;Wa.format.gl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Da(s,"rgba");return h[0]*=255,h[1]*=255,h[2]*=255,h},_a.gl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Oi,[null].concat(s,["gl"])))},Oi.prototype.gl=function(){var s=this._rgb;return[s[0]/255,s[1]/255,s[2]/255,s[3]]};var Ba=T.unpack,ja=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Ba(s,"rgb"),u=h[0],p=h[1],g=h[2],f=Math.min(u,p,g),m=Math.max(u,p,g),b=m-f,S=b*100/255,C=f/(255-b)*100,M;return b===0?M=Number.NaN:(u===m&&(M=(p-g)/b),p===m&&(M=2+(g-u)/b),g===m&&(M=4+(u-p)/b),M*=60,M<0&&(M+=360)),[M,S,C]},Na=ja,Ua=T.unpack,Ga=Math.floor,qa=function(){for(var s,o,h,u,p,g,f=[],m=arguments.length;m--;)f[m]=arguments[m];f=Ua(f,"hcg");var b=f[0],S=f[1],C=f[2],M,R,I;C=C*255;var $=S*255;if(S===0)M=R=I=C;else{b===360&&(b=0),b>360&&(b-=360),b<0&&(b+=360),b/=60;var H=Ga(b),J=b-H,et=C*(1-S),st=et+$*(1-J),kt=et+$*J,Ct=et+$;switch(H){case 0:s=[Ct,kt,et],M=s[0],R=s[1],I=s[2];break;case 1:o=[st,Ct,et],M=o[0],R=o[1],I=o[2];break;case 2:h=[et,Ct,kt],M=h[0],R=h[1],I=h[2];break;case 3:u=[et,st,Ct],M=u[0],R=u[1],I=u[2];break;case 4:p=[kt,et,Ct],M=p[0],R=p[1],I=p[2];break;case 5:g=[Ct,et,st],M=g[0],R=g[1],I=g[2];break}}return[M,R,I,f.length>3?f[3]:1]},Xa=qa,Ha=T.unpack,Ya=T.type,Za=ct,_i=_,Wi=N,Va=Na;_i.prototype.hcg=function(){return Va(this._rgb)},Za.hcg=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(_i,[null].concat(s,["hcg"])))},Wi.format.hcg=Xa,Wi.autodetect.push({p:1,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=Ha(s,"hcg"),Ya(s)==="array"&&s.length===3)return"hcg"}});var Ja=T.unpack,Qa=T.last,Hr=Math.round,Ka=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Ja(s,"rgba"),u=h[0],p=h[1],g=h[2],f=h[3],m=Qa(s)||"auto";f===void 0&&(f=1),m==="auto"&&(m=f<1?"rgba":"rgb"),u=Hr(u),p=Hr(p),g=Hr(g);var b=u<<16|p<<8|g,S="000000"+b.toString(16);S=S.substr(S.length-6);var C="0"+Hr(f*255).toString(16);switch(C=C.substr(C.length-2),m.toLowerCase()){case"rgba":return"#"+S+C;case"argb":return"#"+C+S;default:return"#"+S}},Di=Ka,to=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,eo=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,ro=function(s){if(s.match(to)){(s.length===4||s.length===7)&&(s=s.substr(1)),s.length===3&&(s=s.split(""),s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]);var o=parseInt(s,16),h=o>>16,u=o>>8&255,p=o&255;return[h,u,p,1]}if(s.match(eo)){(s.length===5||s.length===9)&&(s=s.substr(1)),s.length===4&&(s=s.split(""),s=s[0]+s[0]+s[1]+s[1]+s[2]+s[2]+s[3]+s[3]);var g=parseInt(s,16),f=g>>24&255,m=g>>16&255,b=g>>8&255,S=Math.round((g&255)/255*100)/100;return[f,m,b,S]}throw new Error("unknown hex color: "+s)},Bi=ro,no=ct,ji=_,io=T.type,Ni=N,so=Di;ji.prototype.hex=function(s){return so(this._rgb,s)},no.hex=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(ji,[null].concat(s,["hex"])))},Ni.format.hex=Bi,Ni.autodetect.push({p:4,test:function(s){for(var o=[],h=arguments.length-1;h-- >0;)o[h]=arguments[h+1];if(!o.length&&io(s)==="string"&&[3,4,5,6,7,8,9].indexOf(s.length)>=0)return"hex"}});var ao=T.unpack,Ui=T.TWOPI,oo=Math.min,lo=Math.sqrt,ho=Math.acos,co=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=ao(s,"rgb"),u=h[0],p=h[1],g=h[2];u/=255,p/=255,g/=255;var f,m=oo(u,p,g),b=(u+p+g)/3,S=b>0?1-m/b:0;return S===0?f=NaN:(f=(u-p+(u-g))/2,f/=lo((u-p)*(u-p)+(u-g)*(p-g)),f=ho(f),g>p&&(f=Ui-f),f/=Ui),[f*360,S,b]},uo=co,fo=T.unpack,xn=T.limit,sr=T.TWOPI,Sn=T.PITHIRD,ar=Math.cos,po=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=fo(s,"hsi");var h=s[0],u=s[1],p=s[2],g,f,m;return isNaN(h)&&(h=0),isNaN(u)&&(u=0),h>360&&(h-=360),h<0&&(h+=360),h/=360,h<1/3?(m=(1-u)/3,g=(1+u*ar(sr*h)/ar(Sn-sr*h))/3,f=1-(m+g)):h<2/3?(h-=1/3,g=(1-u)/3,f=(1+u*ar(sr*h)/ar(Sn-sr*h))/3,m=1-(g+f)):(h-=2/3,f=(1-u)/3,m=(1+u*ar(sr*h)/ar(Sn-sr*h))/3,g=1-(f+m)),g=xn(p*g*3),f=xn(p*f*3),m=xn(p*m*3),[g*255,f*255,m*255,s.length>3?s[3]:1]},go=po,yo=T.unpack,vo=T.type,mo=ct,Gi=_,qi=N,bo=uo;Gi.prototype.hsi=function(){return bo(this._rgb)},mo.hsi=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Gi,[null].concat(s,["hsi"])))},qi.format.hsi=go,qi.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=yo(s,"hsi"),vo(s)==="array"&&s.length===3)return"hsi"}});var wo=T.unpack,xo=T.type,So=ct,Xi=_,Hi=N,To=qr;Xi.prototype.hsl=function(){return To(this._rgb)},So.hsl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Xi,[null].concat(s,["hsl"])))},Hi.format.hsl=Si,Hi.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=wo(s,"hsl"),xo(s)==="array"&&s.length===3)return"hsl"}});var Po=T.unpack,Co=Math.min,Ro=Math.max,ko=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=Po(s,"rgb");var h=s[0],u=s[1],p=s[2],g=Co(h,u,p),f=Ro(h,u,p),m=f-g,b,S,C;return C=f/255,f===0?(b=Number.NaN,S=0):(S=m/f,h===f&&(b=(u-p)/m),u===f&&(b=2+(p-h)/m),p===f&&(b=4+(h-u)/m),b*=60,b<0&&(b+=360)),[b,S,C]},Fo=ko,Lo=T.unpack,zo=Math.floor,Mo=function(){for(var s,o,h,u,p,g,f=[],m=arguments.length;m--;)f[m]=arguments[m];f=Lo(f,"hsv");var b=f[0],S=f[1],C=f[2],M,R,I;if(C*=255,S===0)M=R=I=C;else{b===360&&(b=0),b>360&&(b-=360),b<0&&(b+=360),b/=60;var $=zo(b),H=b-$,J=C*(1-S),et=C*(1-S*H),st=C*(1-S*(1-H));switch($){case 0:s=[C,st,J],M=s[0],R=s[1],I=s[2];break;case 1:o=[et,C,J],M=o[0],R=o[1],I=o[2];break;case 2:h=[J,C,st],M=h[0],R=h[1],I=h[2];break;case 3:u=[J,et,C],M=u[0],R=u[1],I=u[2];break;case 4:p=[st,J,C],M=p[0],R=p[1],I=p[2];break;case 5:g=[C,J,et],M=g[0],R=g[1],I=g[2];break}}return[M,R,I,f.length>3?f[3]:1]},$o=Mo,Io=T.unpack,Ao=T.type,Eo=ct,Yi=_,Zi=N,Oo=Fo;Yi.prototype.hsv=function(){return Oo(this._rgb)},Eo.hsv=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Yi,[null].concat(s,["hsv"])))},Zi.format.hsv=$o,Zi.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=Io(s,"hsv"),Ao(s)==="array"&&s.length===3)return"hsv"}});var Yr={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},or=Yr,_o=T.unpack,Vi=Math.pow,Wo=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=_o(s,"rgb"),u=h[0],p=h[1],g=h[2],f=Do(u,p,g),m=f[0],b=f[1],S=f[2],C=116*b-16;return[C<0?0:C,500*(m-b),200*(b-S)]},Tn=function(s){return(s/=255)<=.04045?s/12.92:Vi((s+.055)/1.055,2.4)},Pn=function(s){return s>or.t3?Vi(s,1/3):s/or.t2+or.t0},Do=function(s,o,h){s=Tn(s),o=Tn(o),h=Tn(h);var u=Pn((.4124564*s+.3575761*o+.1804375*h)/or.Xn),p=Pn((.2126729*s+.7151522*o+.072175*h)/or.Yn),g=Pn((.0193339*s+.119192*o+.9503041*h)/or.Zn);return[u,p,g]},Ji=Wo,lr=Yr,Bo=T.unpack,jo=Math.pow,No=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=Bo(s,"lab");var h=s[0],u=s[1],p=s[2],g,f,m,b,S,C;return f=(h+16)/116,g=isNaN(u)?f:f+u/500,m=isNaN(p)?f:f-p/200,f=lr.Yn*Rn(f),g=lr.Xn*Rn(g),m=lr.Zn*Rn(m),b=Cn(3.2404542*g-1.5371385*f-.4985314*m),S=Cn(-.969266*g+1.8760108*f+.041556*m),C=Cn(.0556434*g-.2040259*f+1.0572252*m),[b,S,C,s.length>3?s[3]:1]},Cn=function(s){return 255*(s<=.00304?12.92*s:1.055*jo(s,1/2.4)-.055)},Rn=function(s){return s>lr.t1?s*s*s:lr.t2*(s-lr.t0)},Qi=No,Uo=T.unpack,Go=T.type,qo=ct,Ki=_,ts=N,Xo=Ji;Ki.prototype.lab=function(){return Xo(this._rgb)},qo.lab=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Ki,[null].concat(s,["lab"])))},ts.format.lab=Qi,ts.autodetect.push({p:2,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=Uo(s,"lab"),Go(s)==="array"&&s.length===3)return"lab"}});var Ho=T.unpack,Yo=T.RAD2DEG,Zo=Math.sqrt,Vo=Math.atan2,Jo=Math.round,Qo=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Ho(s,"lab"),u=h[0],p=h[1],g=h[2],f=Zo(p*p+g*g),m=(Vo(g,p)*Yo+360)%360;return Jo(f*1e4)===0&&(m=Number.NaN),[u,f,m]},es=Qo,Ko=T.unpack,tl=Ji,el=es,rl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Ko(s,"rgb"),u=h[0],p=h[1],g=h[2],f=tl(u,p,g),m=f[0],b=f[1],S=f[2];return el(m,b,S)},nl=rl,il=T.unpack,sl=T.DEG2RAD,al=Math.sin,ol=Math.cos,ll=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=il(s,"lch"),u=h[0],p=h[1],g=h[2];return isNaN(g)&&(g=0),g=g*sl,[u,ol(g)*p,al(g)*p]},rs=ll,hl=T.unpack,cl=rs,ul=Qi,fl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=hl(s,"lch");var h=s[0],u=s[1],p=s[2],g=cl(h,u,p),f=g[0],m=g[1],b=g[2],S=ul(f,m,b),C=S[0],M=S[1],R=S[2];return[C,M,R,s.length>3?s[3]:1]},ns=fl,dl=T.unpack,pl=ns,gl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=dl(s,"hcl").reverse();return pl.apply(void 0,h)},yl=gl,vl=T.unpack,ml=T.type,is=ct,Zr=_,kn=N,ss=nl;Zr.prototype.lch=function(){return ss(this._rgb)},Zr.prototype.hcl=function(){return ss(this._rgb).reverse()},is.lch=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Zr,[null].concat(s,["lch"])))},is.hcl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Zr,[null].concat(s,["hcl"])))},kn.format.lch=ns,kn.format.hcl=yl,["lch","hcl"].forEach(function(s){return kn.autodetect.push({p:2,test:function(){for(var o=[],h=arguments.length;h--;)o[h]=arguments[h];if(o=vl(o,s),ml(o)==="array"&&o.length===3)return s}})});var bl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},as=bl,wl=_,os=N,xl=T.type,Sr=as,Sl=Bi,Tl=Di;wl.prototype.name=function(){for(var s=Tl(this._rgb,"rgb"),o=0,h=Object.keys(Sr);o<h.length;o+=1){var u=h[o];if(Sr[u]===s)return u.toLowerCase()}return s},os.format.named=function(s){if(s=s.toLowerCase(),Sr[s])return Sl(Sr[s]);throw new Error("unknown color name: "+s)},os.autodetect.push({p:5,test:function(s){for(var o=[],h=arguments.length-1;h-- >0;)o[h]=arguments[h+1];if(!o.length&&xl(s)==="string"&&Sr[s.toLowerCase()])return"named"}});var Pl=T.unpack,Cl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Pl(s,"rgb"),u=h[0],p=h[1],g=h[2];return(u<<16)+(p<<8)+g},Rl=Cl,kl=T.type,Fl=function(s){if(kl(s)=="number"&&s>=0&&s<=16777215){var o=s>>16,h=s>>8&255,u=s&255;return[o,h,u,1]}throw new Error("unknown num color: "+s)},Ll=Fl,zl=ct,ls=_,hs=N,Ml=T.type,$l=Rl;ls.prototype.num=function(){return $l(this._rgb)},zl.num=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(ls,[null].concat(s,["num"])))},hs.format.num=Ll,hs.autodetect.push({p:5,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s.length===1&&Ml(s[0])==="number"&&s[0]>=0&&s[0]<=16777215)return"num"}});var Il=ct,Fn=_,cs=N,us=T.unpack,fs=T.type,ds=Math.round;Fn.prototype.rgb=function(s){return s===void 0&&(s=!0),s===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ds)},Fn.prototype.rgba=function(s){return s===void 0&&(s=!0),this._rgb.slice(0,4).map(function(o,h){return h<3?s===!1?o:ds(o):o})},Il.rgb=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Fn,[null].concat(s,["rgb"])))},cs.format.rgb=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=us(s,"rgba");return h[3]===void 0&&(h[3]=1),h},cs.autodetect.push({p:3,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=us(s,"rgba"),fs(s)==="array"&&(s.length===3||s.length===4&&fs(s[3])=="number"&&s[3]>=0&&s[3]<=1))return"rgb"}});var Vr=Math.log,Al=function(s){var o=s/100,h,u,p;return o<66?(h=255,u=o<6?0:-155.25485562709179-.44596950469579133*(u=o-2)+104.49216199393888*Vr(u),p=o<20?0:-254.76935184120902+.8274096064007395*(p=o-10)+115.67994401066147*Vr(p)):(h=351.97690566805693+.114206453784165*(h=o-55)-40.25366309332127*Vr(h),u=325.4494125711974+.07943456536662342*(u=o-50)-28.0852963507957*Vr(u),p=255),[h,u,p,1]},ps=Al,El=ps,Ol=T.unpack,_l=Math.round,Wl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];for(var h=Ol(s,"rgb"),u=h[0],p=h[2],g=1e3,f=4e4,m=.4,b;f-g>m;){b=(f+g)*.5;var S=El(b);S[2]/S[0]>=p/u?f=b:g=b}return _l(b)},Dl=Wl,Ln=ct,Jr=_,zn=N,Bl=Dl;Jr.prototype.temp=Jr.prototype.kelvin=Jr.prototype.temperature=function(){return Bl(this._rgb)},Ln.temp=Ln.kelvin=Ln.temperature=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(Jr,[null].concat(s,["temp"])))},zn.format.temp=zn.format.kelvin=zn.format.temperature=ps;var jl=T.unpack,Mn=Math.cbrt,Nl=Math.pow,Ul=Math.sign,Gl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=jl(s,"rgb"),u=h[0],p=h[1],g=h[2],f=[$n(u/255),$n(p/255),$n(g/255)],m=f[0],b=f[1],S=f[2],C=Mn(.4122214708*m+.5363325363*b+.0514459929*S),M=Mn(.2119034982*m+.6806995451*b+.1073969566*S),R=Mn(.0883024619*m+.2817188376*b+.6299787005*S);return[.2104542553*C+.793617785*M-.0040720468*R,1.9779984951*C-2.428592205*M+.4505937099*R,.0259040371*C+.7827717662*M-.808675766*R]},gs=Gl;function $n(s){var o=Math.abs(s);return o<.04045?s/12.92:(Ul(s)||1)*Nl((o+.055)/1.055,2.4)}var ql=T.unpack,Qr=Math.pow,Xl=Math.sign,Hl=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=ql(s,"lab");var h=s[0],u=s[1],p=s[2],g=Qr(h+.3963377774*u+.2158037573*p,3),f=Qr(h-.1055613458*u-.0638541728*p,3),m=Qr(h-.0894841775*u-1.291485548*p,3);return[255*In(4.0767416621*g-3.3077115913*f+.2309699292*m),255*In(-1.2684380046*g+2.6097574011*f-.3413193965*m),255*In(-.0041960863*g-.7034186147*f+1.707614701*m),s.length>3?s[3]:1]},ys=Hl;function In(s){var o=Math.abs(s);return o>.0031308?(Xl(s)||1)*(1.055*Qr(o,1/2.4)-.055):s*12.92}var Yl=T.unpack,Zl=T.type,Vl=ct,vs=_,ms=N,Jl=gs;vs.prototype.oklab=function(){return Jl(this._rgb)},Vl.oklab=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(vs,[null].concat(s,["oklab"])))},ms.format.oklab=ys,ms.autodetect.push({p:3,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=Yl(s,"oklab"),Zl(s)==="array"&&s.length===3)return"oklab"}});var Ql=T.unpack,Kl=gs,th=es,eh=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];var h=Ql(s,"rgb"),u=h[0],p=h[1],g=h[2],f=Kl(u,p,g),m=f[0],b=f[1],S=f[2];return th(m,b,S)},rh=eh,nh=T.unpack,ih=rs,sh=ys,ah=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];s=nh(s,"lch");var h=s[0],u=s[1],p=s[2],g=ih(h,u,p),f=g[0],m=g[1],b=g[2],S=sh(f,m,b),C=S[0],M=S[1],R=S[2];return[C,M,R,s.length>3?s[3]:1]},oh=ah,lh=T.unpack,hh=T.type,ch=ct,bs=_,ws=N,uh=rh;bs.prototype.oklch=function(){return uh(this._rgb)},ch.oklch=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];return new(Function.prototype.bind.apply(bs,[null].concat(s,["oklch"])))},ws.format.oklch=oh,ws.autodetect.push({p:3,test:function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];if(s=lh(s,"oklch"),hh(s)==="array"&&s.length===3)return"oklch"}});var xs=_,fh=T.type;xs.prototype.alpha=function(s,o){return o===void 0&&(o=!1),s!==void 0&&fh(s)==="number"?o?(this._rgb[3]=s,this):new xs([this._rgb[0],this._rgb[1],this._rgb[2],s],"rgb"):this._rgb[3]};var dh=_;dh.prototype.clipped=function(){return this._rgb._clipped||!1};var De=_,ph=Yr;De.prototype.darken=function(s){s===void 0&&(s=1);var o=this,h=o.lab();return h[0]-=ph.Kn*s,new De(h,"lab").alpha(o.alpha(),!0)},De.prototype.brighten=function(s){return s===void 0&&(s=1),this.darken(-s)},De.prototype.darker=De.prototype.darken,De.prototype.brighter=De.prototype.brighten;var gh=_;gh.prototype.get=function(s){var o=s.split("."),h=o[0],u=o[1],p=this[h]();if(u){var g=h.indexOf(u)-(h.substr(0,2)==="ok"?2:0);if(g>-1)return p[g];throw new Error("unknown channel "+u+" in mode "+h)}else return p};var hr=_,yh=T.type,vh=Math.pow,mh=1e-7,bh=20;hr.prototype.luminance=function(s){if(s!==void 0&&yh(s)==="number"){if(s===0)return new hr([0,0,0,this._rgb[3]],"rgb");if(s===1)return new hr([255,255,255,this._rgb[3]],"rgb");var o=this.luminance(),h="rgb",u=bh,p=function(f,m){var b=f.interpolate(m,.5,h),S=b.luminance();return Math.abs(s-S)<mh||!u--?b:S>s?p(f,b):p(b,m)},g=(o>s?p(new hr([0,0,0]),this):p(this,new hr([255,255,255]))).rgb();return new hr(g.concat([this._rgb[3]]))}return wh.apply(void 0,this._rgb.slice(0,3))};var wh=function(s,o,h){return s=An(s),o=An(o),h=An(h),.2126*s+.7152*o+.0722*h},An=function(s){return s/=255,s<=.03928?s/12.92:vh((s+.055)/1.055,2.4)},Bt={},Ss=_,Ts=T.type,Kr=Bt,Ps=function(s,o,h){h===void 0&&(h=.5);for(var u=[],p=arguments.length-3;p-- >0;)u[p]=arguments[p+3];var g=u[0]||"lrgb";if(!Kr[g]&&!u.length&&(g=Object.keys(Kr)[0]),!Kr[g])throw new Error("interpolation mode "+g+" is not defined");return Ts(s)!=="object"&&(s=new Ss(s)),Ts(o)!=="object"&&(o=new Ss(o)),Kr[g](s,o,h).alpha(s.alpha()+h*(o.alpha()-s.alpha()))},Cs=_,xh=Ps;Cs.prototype.mix=Cs.prototype.interpolate=function(s,o){o===void 0&&(o=.5);for(var h=[],u=arguments.length-2;u-- >0;)h[u]=arguments[u+2];return xh.apply(void 0,[this,s,o].concat(h))};var Rs=_;Rs.prototype.premultiply=function(s){s===void 0&&(s=!1);var o=this._rgb,h=o[3];return s?(this._rgb=[o[0]*h,o[1]*h,o[2]*h,h],this):new Rs([o[0]*h,o[1]*h,o[2]*h,h],"rgb")};var En=_,Sh=Yr;En.prototype.saturate=function(s){s===void 0&&(s=1);var o=this,h=o.lch();return h[1]+=Sh.Kn*s,h[1]<0&&(h[1]=0),new En(h,"lch").alpha(o.alpha(),!0)},En.prototype.desaturate=function(s){return s===void 0&&(s=1),this.saturate(-s)};var ks=_,Fs=T.type;ks.prototype.set=function(s,o,h){h===void 0&&(h=!1);var u=s.split("."),p=u[0],g=u[1],f=this[p]();if(g){var m=p.indexOf(g)-(p.substr(0,2)==="ok"?2:0);if(m>-1){if(Fs(o)=="string")switch(o.charAt(0)){case"+":f[m]+=+o;break;case"-":f[m]+=+o;break;case"*":f[m]*=+o.substr(1);break;case"/":f[m]/=+o.substr(1);break;default:f[m]=+o}else if(Fs(o)==="number")f[m]=o;else throw new Error("unsupported value for Color.set");var b=new ks(f,p);return h?(this._rgb=b._rgb,this):b}throw new Error("unknown channel "+g+" in mode "+p)}else return f};var Th=_,Ph=function(s,o,h){var u=s._rgb,p=o._rgb;return new Th(u[0]+h*(p[0]-u[0]),u[1]+h*(p[1]-u[1]),u[2]+h*(p[2]-u[2]),"rgb")};Bt.rgb=Ph;var Ch=_,On=Math.sqrt,cr=Math.pow,Rh=function(s,o,h){var u=s._rgb,p=u[0],g=u[1],f=u[2],m=o._rgb,b=m[0],S=m[1],C=m[2];return new Ch(On(cr(p,2)*(1-h)+cr(b,2)*h),On(cr(g,2)*(1-h)+cr(S,2)*h),On(cr(f,2)*(1-h)+cr(C,2)*h),"rgb")};Bt.lrgb=Rh;var kh=_,Fh=function(s,o,h){var u=s.lab(),p=o.lab();return new kh(u[0]+h*(p[0]-u[0]),u[1]+h*(p[1]-u[1]),u[2]+h*(p[2]-u[2]),"lab")};Bt.lab=Fh;var Ls=_,ur=function(s,o,h,u){var p,g,f,m;u==="hsl"?(f=s.hsl(),m=o.hsl()):u==="hsv"?(f=s.hsv(),m=o.hsv()):u==="hcg"?(f=s.hcg(),m=o.hcg()):u==="hsi"?(f=s.hsi(),m=o.hsi()):u==="lch"||u==="hcl"?(u="hcl",f=s.hcl(),m=o.hcl()):u==="oklch"&&(f=s.oklch().reverse(),m=o.oklch().reverse());var b,S,C,M,R,I;(u.substr(0,1)==="h"||u==="oklch")&&(p=f,b=p[0],C=p[1],R=p[2],g=m,S=g[0],M=g[1],I=g[2]);var $,H,J,et;return!isNaN(b)&&!isNaN(S)?(S>b&&S-b>180?et=S-(b+360):S<b&&b-S>180?et=S+360-b:et=S-b,H=b+h*et):isNaN(b)?isNaN(S)?H=Number.NaN:(H=S,(R==1||R==0)&&u!="hsv"&&($=M)):(H=b,(I==1||I==0)&&u!="hsv"&&($=C)),$===void 0&&($=C+h*(M-C)),J=R+h*(I-R),u==="oklch"?new Ls([J,$,H],u):new Ls([H,$,J],u)},Lh=ur,zs=function(s,o,h){return Lh(s,o,h,"lch")};Bt.lch=zs,Bt.hcl=zs;var zh=_,Mh=function(s,o,h){var u=s.num(),p=o.num();return new zh(u+h*(p-u),"num")};Bt.num=Mh;var $h=ur,Ih=function(s,o,h){return $h(s,o,h,"hcg")};Bt.hcg=Ih;var Ah=ur,Eh=function(s,o,h){return Ah(s,o,h,"hsi")};Bt.hsi=Eh;var Oh=ur,_h=function(s,o,h){return Oh(s,o,h,"hsl")};Bt.hsl=_h;var Wh=ur,Dh=function(s,o,h){return Wh(s,o,h,"hsv")};Bt.hsv=Dh;var Bh=_,jh=function(s,o,h){var u=s.oklab(),p=o.oklab();return new Bh(u[0]+h*(p[0]-u[0]),u[1]+h*(p[1]-u[1]),u[2]+h*(p[2]-u[2]),"oklab")};Bt.oklab=jh;var Nh=ur,Uh=function(s,o,h){return Nh(s,o,h,"oklch")};Bt.oklch=Uh;var _n=_,Gh=T.clip_rgb,Wn=Math.pow,Dn=Math.sqrt,Bn=Math.PI,Ms=Math.cos,$s=Math.sin,qh=Math.atan2,Xh=function(s,o,h){o===void 0&&(o="lrgb"),h===void 0&&(h=null);var u=s.length;h||(h=Array.from(new Array(u)).map(function(){return 1}));var p=u/h.reduce(function(H,J){return H+J});if(h.forEach(function(H,J){h[J]*=p}),s=s.map(function(H){return new _n(H)}),o==="lrgb")return Hh(s,h);for(var g=s.shift(),f=g.get(o),m=[],b=0,S=0,C=0;C<f.length;C++)if(f[C]=(f[C]||0)*h[0],m.push(isNaN(f[C])?0:h[0]),o.charAt(C)==="h"&&!isNaN(f[C])){var M=f[C]/180*Bn;b+=Ms(M)*h[0],S+=$s(M)*h[0]}var R=g.alpha()*h[0];s.forEach(function(H,J){var et=H.get(o);R+=H.alpha()*h[J+1];for(var st=0;st<f.length;st++)if(!isNaN(et[st]))if(m[st]+=h[J+1],o.charAt(st)==="h"){var kt=et[st]/180*Bn;b+=Ms(kt)*h[J+1],S+=$s(kt)*h[J+1]}else f[st]+=et[st]*h[J+1]});for(var I=0;I<f.length;I++)if(o.charAt(I)==="h"){for(var $=qh(S/m[I],b/m[I])/Bn*180;$<0;)$+=360;for(;$>=360;)$-=360;f[I]=$}else f[I]=f[I]/m[I];return R/=u,new _n(f,o).alpha(R>.99999?1:R,!0)},Hh=function(s,o){for(var h=s.length,u=[0,0,0,0],p=0;p<s.length;p++){var g=s[p],f=o[p]/h,m=g._rgb;u[0]+=Wn(m[0],2)*f,u[1]+=Wn(m[1],2)*f,u[2]+=Wn(m[2],2)*f,u[3]+=m[3]*f}return u[0]=Dn(u[0]),u[1]=Dn(u[1]),u[2]=Dn(u[2]),u[3]>.9999999&&(u[3]=1),new _n(Gh(u))},Ht=ct,fr=T.type,Yh=Math.pow,jn=function(s){var o="rgb",h=Ht("#ccc"),u=0,p=[0,1],g=[],f=[0,0],m=!1,b=[],S=!1,C=0,M=1,R=!1,I={},$=!0,H=1,J=function(k){if(k=k||["#fff","#000"],k&&fr(k)==="string"&&Ht.brewer&&Ht.brewer[k.toLowerCase()]&&(k=Ht.brewer[k.toLowerCase()]),fr(k)==="array"){k.length===1&&(k=[k[0],k[0]]),k=k.slice(0);for(var j=0;j<k.length;j++)k[j]=Ht(k[j]);g.length=0;for(var V=0;V<k.length;V++)g.push(V/(k.length-1))}return _t(),b=k},et=function(k){if(m!=null){for(var j=m.length-1,V=0;V<j&&k>=m[V];)V++;return V-1}return 0},st=function(k){return k},kt=function(k){return k},Ct=function(k,j){var V,Y;if(j==null&&(j=!1),isNaN(k)||k===null)return h;if(j)Y=k;else if(m&&m.length>2){var Ft=et(k);Y=Ft/(m.length-2)}else M!==C?Y=(k-C)/(M-C):Y=1;Y=kt(Y),j||(Y=st(Y)),H!==1&&(Y=Yh(Y,H)),Y=f[0]+Y*(1-f[0]-f[1]),Y=Math.min(1,Math.max(0,Y));var ft=Math.floor(Y*1e4);if($&&I[ft])V=I[ft];else{if(fr(b)==="array")for(var rt=0;rt<g.length;rt++){var at=g[rt];if(Y<=at){V=b[rt];break}if(Y>=at&&rt===g.length-1){V=b[rt];break}if(Y>at&&Y<g[rt+1]){Y=(Y-at)/(g[rt+1]-at),V=Ht.interpolate(b[rt],b[rt+1],Y,o);break}}else fr(b)==="function"&&(V=b(Y));$&&(I[ft]=V)}return V},_t=function(){return I={}};J(s);var tt=function(k){var j=Ht(Ct(k));return S&&j[S]?j[S]():j};return tt.classes=function(k){if(k!=null){if(fr(k)==="array")m=k,p=[k[0],k[k.length-1]];else{var j=Ht.analyze(p);k===0?m=[j.min,j.max]:m=Ht.limits(j,"e",k)}return tt}return m},tt.domain=function(k){if(!arguments.length)return p;C=k[0],M=k[k.length-1],g=[];var j=b.length;if(k.length===j&&C!==M)for(var V=0,Y=Array.from(k);V<Y.length;V+=1){var Ft=Y[V];g.push((Ft-C)/(M-C))}else{for(var ft=0;ft<j;ft++)g.push(ft/(j-1));if(k.length>2){var rt=k.map(function(ot,lt){return lt/(k.length-1)}),at=k.map(function(ot){return(ot-C)/(M-C)});at.every(function(ot,lt){return rt[lt]===ot})||(kt=function(ot){if(ot<=0||ot>=1)return ot;for(var lt=0;ot>=at[lt+1];)lt++;var Zt=(ot-at[lt])/(at[lt+1]-at[lt]),Pe=rt[lt]+Zt*(rt[lt+1]-rt[lt]);return Pe})}}return p=[C,M],tt},tt.mode=function(k){return arguments.length?(o=k,_t(),tt):o},tt.range=function(k,j){return J(k),tt},tt.out=function(k){return S=k,tt},tt.spread=function(k){return arguments.length?(u=k,tt):u},tt.correctLightness=function(k){return k==null&&(k=!0),R=k,_t(),R?st=function(j){for(var V=Ct(0,!0).lab()[0],Y=Ct(1,!0).lab()[0],Ft=V>Y,ft=Ct(j,!0).lab()[0],rt=V+(Y-V)*j,at=ft-rt,ot=0,lt=1,Zt=20;Math.abs(at)>.01&&Zt-- >0;)(function(){return Ft&&(at*=-1),at<0?(ot=j,j+=(lt-j)*.5):(lt=j,j+=(ot-j)*.5),ft=Ct(j,!0).lab()[0],at=ft-rt})();return j}:st=function(j){return j},tt},tt.padding=function(k){return k!=null?(fr(k)==="number"&&(k=[k,k]),f=k,tt):f},tt.colors=function(k,j){arguments.length<2&&(j="hex");var V=[];if(arguments.length===0)V=b.slice(0);else if(k===1)V=[tt(.5)];else if(k>1){var Y=p[0],Ft=p[1]-Y;V=Zh(0,k).map(function(lt){return tt(Y+lt/(k-1)*Ft)})}else{s=[];var ft=[];if(m&&m.length>2)for(var rt=1,at=m.length,ot=1<=at;ot?rt<at:rt>at;ot?rt++:rt--)ft.push((m[rt-1]+m[rt])*.5);else ft=p;V=ft.map(function(lt){return tt(lt)})}return Ht[j]&&(V=V.map(function(lt){return lt[j]()})),V},tt.cache=function(k){return k!=null?($=k,tt):$},tt.gamma=function(k){return k!=null?(H=k,tt):H},tt.nodata=function(k){return k!=null?(h=Ht(k),tt):h},tt};function Zh(s,o,h){for(var u=[],p=s<o,g=o,f=s;p?f<g:f>g;p?f++:f--)u.push(f);return u}var Tr=_,Vh=jn,Jh=function(s){for(var o=[1,1],h=1;h<s;h++){for(var u=[1],p=1;p<=o.length;p++)u[p]=(o[p]||0)+o[p-1];o=u}return o},Qh=function(s){var o,h,u,p,g,f,m;if(s=s.map(function(R){return new Tr(R)}),s.length===2)o=s.map(function(R){return R.lab()}),g=o[0],f=o[1],p=function(R){var I=[0,1,2].map(function($){return g[$]+R*(f[$]-g[$])});return new Tr(I,"lab")};else if(s.length===3)h=s.map(function(R){return R.lab()}),g=h[0],f=h[1],m=h[2],p=function(R){var I=[0,1,2].map(function($){return(1-R)*(1-R)*g[$]+2*(1-R)*R*f[$]+R*R*m[$]});return new Tr(I,"lab")};else if(s.length===4){var b;u=s.map(function(R){return R.lab()}),g=u[0],f=u[1],m=u[2],b=u[3],p=function(R){var I=[0,1,2].map(function($){return(1-R)*(1-R)*(1-R)*g[$]+3*(1-R)*(1-R)*R*f[$]+3*(1-R)*R*R*m[$]+R*R*R*b[$]});return new Tr(I,"lab")}}else if(s.length>=5){var S,C,M;S=s.map(function(R){return R.lab()}),M=s.length-1,C=Jh(M),p=function(R){var I=1-R,$=[0,1,2].map(function(H){return S.reduce(function(J,et,st){return J+C[st]*Math.pow(I,M-st)*Math.pow(R,st)*et[H]},0)});return new Tr($,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return p},Kh=function(s){var o=Qh(s);return o.scale=function(){return Vh(o)},o},Nn=ct,Yt=function(s,o,h){if(!Yt[h])throw new Error("unknown blend mode "+h);return Yt[h](s,o)},Se=function(s){return function(o,h){var u=Nn(h).rgb(),p=Nn(o).rgb();return Nn.rgb(s(u,p))}},Te=function(s){return function(o,h){var u=[];return u[0]=s(o[0],h[0]),u[1]=s(o[1],h[1]),u[2]=s(o[2],h[2]),u}},tc=function(s){return s},ec=function(s,o){return s*o/255},rc=function(s,o){return s>o?o:s},nc=function(s,o){return s>o?s:o},ic=function(s,o){return 255*(1-(1-s/255)*(1-o/255))},sc=function(s,o){return o<128?2*s*o/255:255*(1-2*(1-s/255)*(1-o/255))},ac=function(s,o){return 255*(1-(1-o/255)/(s/255))},oc=function(s,o){return s===255?255:(s=255*(o/255)/(1-s/255),s>255?255:s)};Yt.normal=Se(Te(tc)),Yt.multiply=Se(Te(ec)),Yt.screen=Se(Te(ic)),Yt.overlay=Se(Te(sc)),Yt.darken=Se(Te(rc)),Yt.lighten=Se(Te(nc)),Yt.dodge=Se(Te(oc)),Yt.burn=Se(Te(ac));for(var lc=Yt,Un=T.type,hc=T.clip_rgb,cc=T.TWOPI,uc=Math.pow,fc=Math.sin,dc=Math.cos,Is=ct,pc=function(s,o,h,u,p){s===void 0&&(s=300),o===void 0&&(o=-1.5),h===void 0&&(h=1),u===void 0&&(u=1),p===void 0&&(p=[0,1]);var g=0,f;Un(p)==="array"?f=p[1]-p[0]:(f=0,p=[p,p]);var m=function(b){var S=cc*((s+120)/360+o*b),C=uc(p[0]+f*b,u),M=g!==0?h[0]+b*g:h,R=M*C*(1-C)/2,I=dc(S),$=fc(S),H=C+R*(-.14861*I+1.78277*$),J=C+R*(-.29227*I-.90649*$),et=C+R*(1.97294*I);return Is(hc([H*255,J*255,et*255,1]))};return m.start=function(b){return b==null?s:(s=b,m)},m.rotations=function(b){return b==null?o:(o=b,m)},m.gamma=function(b){return b==null?u:(u=b,m)},m.hue=function(b){return b==null?h:(h=b,Un(h)==="array"?(g=h[1]-h[0],g===0&&(h=h[1])):g=0,m)},m.lightness=function(b){return b==null?p:(Un(b)==="array"?(p=b,f=b[1]-b[0]):(p=[b,b],f=0),m)},m.scale=function(){return Is.scale(m)},m.hue(h),m},gc=_,yc="0123456789abcdef",vc=Math.floor,mc=Math.random,bc=function(){for(var s="#",o=0;o<6;o++)s+=yc.charAt(vc(mc()*16));return new gc(s,"hex")},Gn=v,As=Math.log,wc=Math.pow,xc=Math.floor,Sc=Math.abs,Es=function(s,o){o===void 0&&(o=null);var h={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Gn(s)==="object"&&(s=Object.values(s)),s.forEach(function(u){o&&Gn(u)==="object"&&(u=u[o]),u!=null&&!isNaN(u)&&(h.values.push(u),h.sum+=u,u<h.min&&(h.min=u),u>h.max&&(h.max=u),h.count+=1)}),h.domain=[h.min,h.max],h.limits=function(u,p){return Os(h,u,p)},h},Os=function(s,o,h){o===void 0&&(o="equal"),h===void 0&&(h=7),Gn(s)=="array"&&(s=Es(s));var u=s.min,p=s.max,g=s.values.sort(function(Xn,Hn){return Xn-Hn});if(h===1)return[u,p];var f=[];if(o.substr(0,1)==="c"&&(f.push(u),f.push(p)),o.substr(0,1)==="e"){f.push(u);for(var m=1;m<h;m++)f.push(u+m/h*(p-u));f.push(p)}else if(o.substr(0,1)==="l"){if(u<=0)throw new Error("Logarithmic scales are only possible for values > 0");var b=Math.LOG10E*As(u),S=Math.LOG10E*As(p);f.push(u);for(var C=1;C<h;C++)f.push(wc(10,b+C/h*(S-b)));f.push(p)}else if(o.substr(0,1)==="q"){f.push(u);for(var M=1;M<h;M++){var R=(g.length-1)*M/h,I=xc(R);if(I===R)f.push(g[I]);else{var $=R-I;f.push(g[I]*(1-$)+g[I+1]*$)}}f.push(p)}else if(o.substr(0,1)==="k"){var H,J=g.length,et=new Array(J),st=new Array(h),kt=!0,Ct=0,_t=null;_t=[],_t.push(u);for(var tt=1;tt<h;tt++)_t.push(u+tt/h*(p-u));for(_t.push(p);kt;){for(var k=0;k<h;k++)st[k]=0;for(var j=0;j<J;j++)for(var V=g[j],Y=Number.MAX_VALUE,Ft=void 0,ft=0;ft<h;ft++){var rt=Sc(_t[ft]-V);rt<Y&&(Y=rt,Ft=ft),st[Ft]++,et[j]=Ft}for(var at=new Array(h),ot=0;ot<h;ot++)at[ot]=null;for(var lt=0;lt<J;lt++)H=et[lt],at[H]===null?at[H]=g[lt]:at[H]+=g[lt];for(var Zt=0;Zt<h;Zt++)at[Zt]*=1/st[Zt];kt=!1;for(var Pe=0;Pe<h;Pe++)if(at[Pe]!==_t[Pe]){kt=!0;break}_t=at,Ct++,Ct>200&&(kt=!1)}for(var Ce={},dr=0;dr<h;dr++)Ce[dr]=[];for(var pr=0;pr<J;pr++)H=et[pr],Ce[H].push(g[pr]);for(var de=[],Be=0;Be<h;Be++)de.push(Ce[Be][0]),de.push(Ce[Be][Ce[Be].length-1]);de=de.sort(function(Xn,Hn){return Xn-Hn}),f.push(de[0]);for(var Pr=1;Pr<de.length;Pr+=2){var je=de[Pr];!isNaN(je)&&f.indexOf(je)===-1&&f.push(je)}}return f},_s={analyze:Es,limits:Os},Ws=_,Tc=function(s,o){s=new Ws(s),o=new Ws(o);var h=s.luminance(),u=o.luminance();return h>u?(h+.05)/(u+.05):(u+.05)/(h+.05)},Ds=_,fe=Math.sqrt,St=Math.pow,Pc=Math.min,Cc=Math.max,Bs=Math.atan2,js=Math.abs,tn=Math.cos,Ns=Math.sin,Rc=Math.exp,Us=Math.PI,kc=function(s,o,h,u,p){h===void 0&&(h=1),u===void 0&&(u=1),p===void 0&&(p=1);var g=function(je){return 360*je/(2*Us)},f=function(je){return 2*Us*je/360};s=new Ds(s),o=new Ds(o);var m=Array.from(s.lab()),b=m[0],S=m[1],C=m[2],M=Array.from(o.lab()),R=M[0],I=M[1],$=M[2],H=(b+R)/2,J=fe(St(S,2)+St(C,2)),et=fe(St(I,2)+St($,2)),st=(J+et)/2,kt=.5*(1-fe(St(st,7)/(St(st,7)+St(25,7)))),Ct=S*(1+kt),_t=I*(1+kt),tt=fe(St(Ct,2)+St(C,2)),k=fe(St(_t,2)+St($,2)),j=(tt+k)/2,V=g(Bs(C,Ct)),Y=g(Bs($,_t)),Ft=V>=0?V:V+360,ft=Y>=0?Y:Y+360,rt=js(Ft-ft)>180?(Ft+ft+360)/2:(Ft+ft)/2,at=1-.17*tn(f(rt-30))+.24*tn(f(2*rt))+.32*tn(f(3*rt+6))-.2*tn(f(4*rt-63)),ot=ft-Ft;ot=js(ot)<=180?ot:ft<=Ft?ot+360:ot-360,ot=2*fe(tt*k)*Ns(f(ot)/2);var lt=R-b,Zt=k-tt,Pe=1+.015*St(H-50,2)/fe(20+St(H-50,2)),Ce=1+.045*j,dr=1+.015*j*at,pr=30*Rc(-St((rt-275)/25,2)),de=2*fe(St(j,7)/(St(j,7)+St(25,7))),Be=-de*Ns(2*f(pr)),Pr=fe(St(lt/(h*Pe),2)+St(Zt/(u*Ce),2)+St(ot/(p*dr),2)+Be*(Zt/(u*Ce))*(ot/(p*dr)));return Cc(0,Pc(100,Pr))},Gs=_,Fc=function(s,o,h){h===void 0&&(h="lab"),s=new Gs(s),o=new Gs(o);var u=s.get(h),p=o.get(h),g=0;for(var f in u){var m=(u[f]||0)-(p[f]||0);g+=m*m}return Math.sqrt(g)},Lc=_,zc=function(){for(var s=[],o=arguments.length;o--;)s[o]=arguments[o];try{return new(Function.prototype.bind.apply(Lc,[null].concat(s))),!0}catch{return!1}},qs=ct,Xs=jn,Mc={cool:function(){return Xs([qs.hsl(180,1,.9),qs.hsl(250,.7,.4)])},hot:function(){return Xs(["#000","#f00","#ff0","#fff"]).mode("rgb")}},en={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},qn=0,Hs=Object.keys(en);qn<Hs.length;qn+=1){var Ys=Hs[qn];en[Ys.toLowerCase()]=en[Ys]}var $c=en,Pt=ct;Pt.average=Xh,Pt.bezier=Kh,Pt.blend=lc,Pt.cubehelix=pc,Pt.mix=Pt.interpolate=Ps,Pt.random=bc,Pt.scale=jn,Pt.analyze=_s.analyze,Pt.contrast=Tc,Pt.deltaE=kc,Pt.distance=Fc,Pt.limits=_s.limits,Pt.valid=zc,Pt.scales=Mc,Pt.colors=as,Pt.brewer=$c;var Ic=Pt;return Ic})})(wa);var pt=wa.exports;const $e=(pt.Color.symbol=pt.Color.prototype.symbol=Symbol.for("@motion-canvas/core/types/Color"),pt.Color.lerp=pt.Color.prototype.lerp=(n,t,e,r="lch")=>{typeof n=="string"&&(n=new pt.Color(n)),typeof t=="string"&&(t=new pt.Color(t));const i=n instanceof pt.Color,a=t instanceof pt.Color;return i||(n=a?t.alpha(0):new pt.Color("rgba(0, 0, 0, 0)")),a||(t=i?n.alpha(0):new pt.Color("rgba(0, 0, 0, 0)")),pt.mix(n,t,e,r)},pt.Color.createLerp=pt.Color.prototype.createLerp=n=>(t,e,r)=>pt.Color.lerp(t,e,r,n),pt.Color.createSignal=(n,t=pt.Color.lerp)=>new Qe(n,t,void 0,e=>new pt.Color(e)).toSignal(),pt.Color.prototype.toSymbol=()=>pt.Color.symbol,pt.Color.prototype.toUniform=function(n,t){n.uniform4fv(t,this.gl())},pt.Color.prototype.serialize=function(){return this.css()},pt.Color.prototype.lerp=function(n,t,e){return pt.Color.lerp(this,n,t,e)},pt.Color);function xu(n,t){return y.fromDegrees(n).transform(t).degrees}function Jn(n,t){return y.magnitude(t.m11,t.m12)*n}class Qn extends jt{constructor(){super(...arguments),this.type=$e.symbol}parse(t){return t===null?null:new $e(t)}serialize(){var t;return((t=this.value.current)==null?void 0:t.serialize())??null}}class Je extends jt{constructor(t,e,r=(i=>(i=e[0])==null?void 0:i.value)()){super(t,r),this.options=e,this.type=Je.symbol}set(t){var e;super.set((e=this.getOption(t))==null?void 0:e.value)}parse(t){var e;return(e=this.getOption(t))==null?void 0:e.value}getOption(t){return this.options.find(e=>e.value===t)??this.options[0]}}Je.symbol=Symbol.for("@motion-canvas/core/meta/EnumMetaField");class Su extends jt{get onFieldsChanged(){return this.fields.subscribable}get options(){return this.optionFields[this.current]}constructor(t,e,r=0){var c,d;const i=e.plugins.flatMap(v=>{var x;return((x=v.exporters)==null?void 0:x.call(v,e))??[]}),a=i.map(v=>v.meta(e)),l=new Je("exporter",i.map(v=>({value:v.id,text:v.displayName})),(c=i[r])==null?void 0:c.id);super(t,{name:l.get(),options:(d=a[r])==null?void 0:d.get()}),this.current=r,this.type=Object,this.handleChange=()=>{var z,A,B;const v=this.exporterField.get(),x=Math.max(this.exporters.findIndex(X=>X.id===v),0);this.current!==x&&((z=this.options)==null||z.onChanged.unsubscribe(this.handleChange),this.current=x,(A=this.options)==null||A.onChanged.subscribe(this.handleChange,!1),this.fields.current=this.options?[this.exporterField,this.options]:[this.exporterField]),this.value.current={name:this.exporterField.get(),options:((B=this.options)==null?void 0:B.get())??null}},this.exporters=i,this.exporterField=l,this.exporterField.onChanged.subscribe(this.handleChange,!1),this.exporterField.disable(a.length<2).space(),this.optionFields=a,this.fields=new Nt([this.exporterField]),this.options&&(this.options.onChanged.subscribe(this.handleChange,!1),this.fields.current=[this.exporterField,this.options])}set(t){var e;this.exporterField.set(t.name),(e=this.options)==null||e.set(t.options??{})}serialize(){var t;return{name:this.exporterField.serialize(),options:((t=this.options)==null?void 0:t.serialize())??null}}clone(){return new this.constructor(this.name,this.exporters,this.current)}}var Cr;class oe{constructor(t,e=!1){this.name=t,this.source=e,this.lock=new _c,this.ignoreChange=!1,this.cache=null,this.metaField=null,this.handleChanged=async()=>{}}attach(t){var e;this.metaField||(this.metaField=t,this.cache&&this.metaField.set(this.cache),(e=this.metaField)==null||e.onChanged.subscribe(this.handleChanged))}async saveData(t){if(this.source===!1)return;if(!this.source)throw new Error(`The meta file for ${this.name} is missing.`);if(Cr.sourceLookup[this.source])throw new Error(`Metadata for ${this.name} is already being updated`);const e=this.source;await new Promise((r,i)=>{setTimeout(()=>{delete Cr.sourceLookup[e],i(`Connection timeout when updating metadata for ${this.name}`)},1e3),Cr.sourceLookup[e]=()=>{delete Cr.sourceLookup[e],r()},(void 0).send("motion-canvas:meta",{source:e,data:t})})}loadData(t){var e;this.ignoreChange=!0,this.cache=t,(e=this.metaField)==null||e.set(t),this.ignoreChange=!1}}Cr=oe;oe.sourceLookup={};class Zn extends jt{constructor(){super(...arguments),this.type=Number,this.presets=[]}parse(t){let e=parseFloat(t);return this.min!==void 0&&e<this.min&&(e=this.min),this.max!==void 0&&e>this.max&&(e=this.max),e}getPresets(){return this.presets}setPresets(t){return this.presets=t,this}setRange(t,e){return this.min=t,this.max=e,this}getMin(){return this.min??-1/0}getMax(){return this.max??1/0}}class dn extends jt{constructor(){super(...arguments),this.type=dn.symbol}parse(t){return this.parseRange(1/0,t[0],t[1]??1/0)}update(t,e,r,i){this.value.current=this.parseRange(r/i-Rr,t/i-Rr,e/i-Rr)}parseRange(t,e=this.value.current[0],r=this.value.current[1]){return e=Et(0,t,e),r=Et(0,t,r??1/0),e>r&&([e,r]=[r,e]),r>=t&&(r=1/0),[e,r]}}dn.symbol=Symbol.for("@motion-canvas/core/meta/RangeMetaField");class xa extends jt{constructor(){super(...arguments),this.type=y.symbol}parse(t){return new y(t)}serialize(){return this.value.current.serialize()}}let li;li??(li=new oe("project",!1));li.loadData({version:0,shared:{background:null,range:[0,null],size:{x:1920,y:1080},audioOffset:0},preview:{fps:30,resolutionScale:1},rendering:{fps:60,resolutionScale:1,colorSpace:"srgb",exporter:{name:"@motion-canvas/core/image-sequence",options:{fileType:"image/png",quality:100,groupByScene:!1}}}});const Tu=li;let hi;hi??(hi=new oe("hook",!1));hi.loadData({version:0,timeEvents:[],seed:2092259550});const Pu=hi;function Cu(n){var t;return!!((t=n.prototype)!=null&&t.isClass)}const Ru=Symbol.for("@motion-canvas/2d/fragment");function w(n,t,e){const{ref:r,children:i,...a}=t,l=Array.isArray(i)?i.flat():i;if(n===Ru)return l;if(Cu(n)){const c=new n({...a,children:l,key:e});return r==null||r(c),c}else return n({...a,ref:r,children:l,key:e})}const sa={invert:{name:"invert"},sepia:{name:"sepia"},grayscale:{name:"grayscale"},brightness:{name:"brightness",default:1},contrast:{name:"contrast",default:1},saturate:{name:"saturate",default:1},hue:{name:"hue-rotate",unit:"deg",scale:1},blur:{name:"blur",transform:!0,unit:"px",scale:1}};class ku{get name(){return this.props.name}get default(){return this.props.default}constructor(t){this.props={name:"invert",default:0,unit:"%",scale:100,transform:!1,...t,value:t.value??t.default??0},this.value=It(this.props.value,dt,this)}isActive(){return this.value()!==this.props.default}serialize(t){let e=this.value();return this.props.transform&&(e=Jn(e,t)),`${this.props.name}(${e*this.props.scale}${this.props.unit})`}}const pe=Symbol.for("@motion-canvas/2d/decorators/initializers");function $r(n,t){if(!n[pe])n[pe]=[];else if(n[pe]&&!Object.prototype.hasOwnProperty.call(n,pe)){const e=Object.getPrototypeOf(n);n[pe]=[...e[pe]]}n[pe].push(t)}function Fu(n,t){if(n[pe])try{n[pe].forEach(e=>e(n,t))}catch(e){throw e.inspect??(e.inspect=n.key),e}}function U(){return(n,t)=>{$r(n,e=>{const r=Object.getPrototypeOf(e)[t];e[t]=mu(r.bind(e),e)})}}function Kn(n={},t,e){const r={};if(e&&t){const i=n.setter??(t==null?void 0:t[`set${Ze(e)}`]);i&&(r.setter=i.bind(t));const a=n.getter??(t==null?void 0:t[`get${Ze(e)}`]);a&&(r.getter=a.bind(t));const l=n.tweener??(t==null?void 0:t[`tween${Ze(e)}`]);l&&(r.tweener=l.bind(t))}return r}const ge=Symbol.for("@motion-canvas/2d/decorators/properties");function Ke(n,t){var e;return((e=n[ge])==null?void 0:e[t])??null}function ci(n,t){let e;return n[ge]?n[ge]&&!Object.prototype.hasOwnProperty.call(n,ge)?n[ge]=e=Object.fromEntries(Object.entries(n[ge]).map(([r,i])=>[r,{...i}])):e=n[ge]:n[ge]=e={},e[t]??(e[t]={cloneable:!0,inspectable:!0,compoundEntries:[]}),e[t]}function Sa(n){return n&&typeof n=="object"?n[ge]??{}:{}}function ui(n,t){Fu(n);for(const[e,r]of Object.entries(Sa(n))){const i=n[e];if(i.reset(),t[e]!==void 0&&i(t[e]),r.compoundEntries!==void 0)for(const[a,l]of r.compoundEntries)l in t&&i[a](t[l])}}function L(){return(n,t)=>{const e=ci(n,t);$r(n,r=>{var c;let i=e.default;const a=r[`getDefault${Ze(t)}`];a&&(i=()=>a.call(r,e.default));const l=new Qe(i,e.interpolationFunction??mr,r,(c=e.parser)==null?void 0:c.bind(r),Kn(e,r,t));r[t]=l.toSignal()})}}function O(n){return(t,e)=>{const r=Ke(t,e);if(!r){zt().error(`Missing property decorator for "${e.toString()}"`);return}r.default=n}}function fi(n){return(t,e)=>{const r=Ke(t,e);if(!r){zt().error(`Missing property decorator for "${e.toString()}"`);return}r.interpolationFunction=n}}function di(n){return(t,e)=>{const r=Ke(t,e);if(!r){zt().error(`Missing property decorator for "${e.toString()}"`);return}r.parser=n}}function Ir(n){return(t,e)=>{const r=Ke(t,e);if(!r){zt().error(`Missing property decorator for "${e.toString()}"`);return}r.parser=i=>new n(i),"lerp"in n&&(r.interpolationFunction??(r.interpolationFunction=n.lerp))}}function tr(n=!0){return(t,e)=>{const r=Ke(t,e);if(!r){zt().error(`Missing property decorator for "${e.toString()}"`);return}r.cloneable=n}}function Ta(n=!0){return(t,e)=>{const r=Ke(t,e);if(!r){zt().error(`Missing property decorator for "${e.toString()}"`);return}r.inspectable=n}}function Pa(n,t=fn){return(e,r)=>{const i=ci(e,r);i.compound=!0,i.compoundEntries=Object.entries(n),$r(e,a=>{if(!i.parser){zt().error(`Missing parser decorator for "${r.toString()}"`);return}const l=i.default,c=i.parser.bind(a),d=new t(i.compoundEntries.map(([v,x])=>{const z=new Qe(Ve(l,A=>c(A)[v]),dt,a,void 0,Kn(void 0,a,x)).toSignal();return[v,z]}),c,l,i.interpolationFunction??mr,a,Kn(i,a,r));a[r]=d.toSignal()})}}function be(n){return(t,e)=>{Pa(typeof n=="object"?n:{x:n?`${n}X`:"x",y:n?`${n}Y`:"y"},ba)(t,e),Ir(y)(t,e)}}var Ae=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};class le{constructor(t){ui(this,t)}canvasGradient(t){let e;switch(this.type()){case"linear":e=t.createLinearGradient(this.from.x(),this.from.y(),this.to.x(),this.to.y());break;case"conic":e=t.createConicGradient(this.angle(),this.from.x(),this.from.y());break;case"radial":e=t.createRadialGradient(this.from.x(),this.from.y(),this.fromRadius(),this.to.x(),this.to.y(),this.toRadius());break}for(const{offset:r,color:i}of this.stops())e.addColorStop(ae(r),new $e(ae(i)).serialize());return e}}Ae([O("linear"),L()],le.prototype,"type",void 0);Ae([be("from")],le.prototype,"from",void 0);Ae([be("to")],le.prototype,"to",void 0);Ae([O(0),L()],le.prototype,"angle",void 0);Ae([O(0),L()],le.prototype,"fromRadius",void 0);Ae([O(0),L()],le.prototype,"toRadius",void 0);Ae([O([]),L()],le.prototype,"stops",void 0);Ae([U()],le.prototype,"canvasGradient",null);var pi=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};class Ar{constructor(t){ui(this,t)}canvasPattern(t){return t.createPattern(this.image(),this.repetition())}}pi([L()],Ar.prototype,"image",void 0);pi([O(null),L()],Ar.prototype,"repetition",void 0);pi([U()],Ar.prototype,"canvasPattern",null);function Lu(n){return n===null?null:n instanceof le||n instanceof Ar?n:new $e(n)}function ti(n,t){return n===null?"":n instanceof $e?n.serialize():n instanceof le?n.canvasGradient(t):n instanceof Ar?n.canvasPattern(t)??"":""}function aa(n,t,e,r,i){if(e.top===0&&e.right===0&&e.bottom===0&&e.left===0){zu(n,t);return}const a=Le(e.top,e.right,e.left,t),l=Le(e.right,e.top,e.bottom,t),c=Le(e.bottom,e.left,e.right,t),d=Le(e.left,e.bottom,e.top,t);if(r){const v=x=>{const z=x*i;return x-z};n.moveTo(t.left+a,t.top),n.lineTo(t.right-l,t.top),n.bezierCurveTo(t.right-v(l),t.top,t.right,t.top+v(l),t.right,t.top+l),n.lineTo(t.right,t.bottom-c),n.bezierCurveTo(t.right,t.bottom-v(c),t.right-v(c),t.bottom,t.right-c,t.bottom),n.lineTo(t.left+d,t.bottom),n.bezierCurveTo(t.left+v(d),t.bottom,t.left,t.bottom-v(d),t.left,t.bottom-d),n.lineTo(t.left,t.top+a),n.bezierCurveTo(t.left,t.top+v(a),t.left+v(a),t.top,t.left+a,t.top);return}n.moveTo(t.left+a,t.top),n.arcTo(t.right,t.top,t.right,t.bottom,l),n.arcTo(t.right,t.bottom,t.left,t.bottom,c),n.arcTo(t.left,t.bottom,t.left,t.top,d),n.arcTo(t.left,t.top,t.right,t.top,a)}function Le(n,t,e,r){const i=n+t>r.width?r.width*(n/(n+t)):n,a=n+e>r.height?r.height*(n/(n+e)):n;return Math.min(i,a)}function zu(n,t){n.rect(t.x,t.y,t.width,t.height)}function Er(n,t){n.moveTo(t.x,t.y)}function se(n,t){n.lineTo(t.x,t.y)}function Re(n,t){if(!(t.length<2)){Er(n,t[0]);for(const e of t.slice(1))se(n,e)}}function Ca(n,t,e=8){se(n,t.addY(-e)),se(n,t.addY(e)),se(n,t),se(n,t.addX(-e)),Ra(n,t,e)}function Ra(n,t,e,r=0,i=Math.PI*2,a=!1){n.arc(t.x,t.y,e,r,i,a)}function Mu(n,t,e,r){n.bezierCurveTo(t.x,t.y,e.x,e.y,r.x,r.y)}function gi(n){return t=>t instanceof n}function ka(){return(n,t)=>{L()(n,t),di(Lu)(n,t),fi($e.lerp)(n,t),O(null)(n,t)}}function $u(){return(n,t)=>{L()(n,t),Ir($e)(n,t)}}function Ee(n,t=e=>e){return(e,r)=>{e[`getDefault${Ze(r)}`]=function(){this.requestLayoutUpdate();const i=this.element.style[n];this.element.style[n]="";const a=t.call(this,this.styles.getPropertyValue(n));return this.element.style[n]=i,a}}}class Iu extends Qe{constructor(t,e){super(t,mr,e);for(const r in sa){const i=sa[r];Object.defineProperty(this.invokable,r,{value:(a,l,c=re)=>{var v,x,z;if(a===void 0)return((x=(v=this.get())==null?void 0:v.find(A=>A.name===i.name))==null?void 0:x.value())??i.default??0;let d=(z=this.get())==null?void 0:z.find(A=>A.name===i.name);return d||(d=new ku(i),this.set([...this.get(),d])),l===void 0?(d.value(a),this.owner):d.value(a,l,c)}})}}*tweener(t,e,r){const i=this.get(),a=ae(t);if(Eu(i,a)){yield*Q(...i.map((d,v)=>d.value(a[v].value(),e,r))),this.set(a);return}for(const d of a)d.value(d.default);const l=a.map(d=>d.value.context.raw()),c=i.length>0&&a.length>0?e/2:e;i.length>0&&(yield*Q(...i.map(d=>d.value(d.default,c,r)))),this.set(a),a.length>0&&(yield*Q(...a.map((d,v)=>d.value(l[v],c,r))))}}function Au(){return(n,t)=>{const e=ci(n,t);$r(n,r=>{r[t]=new Iu(e.default??[],r).toSignal()})}}function Eu(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e].name!==t[e].name)return!1;return!0}const Ou=Symbol.for("@motion-canvas/2d/nodeName");function he(n){return function(t){t.prototype[Ou]=n}}function oa(n,t){const e=Et(0,n.arcLength,t);let r=0;for(const i of n.segments){const a=r;if(r+=i.arcLength,r>=e){const l=(e-a)/i.arcLength;return i.getPoint(Et(0,1,l))}}return{position:y.zero,tangent:y.up,normal:y.up}}function pn(n){return(t,e)=>{Pa({top:n?`${n}Top`:"top",right:n?`${n}Right`:"right",bottom:n?`${n}Bottom`:"bottom",left:n?`${n}Left`:"left"})(t,e),Ir(Jt)(t,e)}}function _u(n){let t;return n?typeof n=="string"?t=[{fragment:n}]:Array.isArray(n)?t=n.map(e=>typeof e=="string"?{fragment:e}:e):t=[n]:t=[],!ii().experimentalFeatures&&t.length>0&&(t=[],zt().log({...Xc("Node uses experimental shaders."),inspect:this.key})),t}function nn(){return ii()}var q=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a},sn;let E=sn=class{get x(){return this.position.x}get y(){return this.position.y}getAbsolutePosition(){return new y(this.parentToWorld().transformPoint(this.position()))}setAbsolutePosition(t){this.position(Ve(t,e=>new y(e).transformAsPoint(this.worldToParent())))}getAbsoluteRotation(){const t=this.localToWorld();return y.degrees(t.m11,t.m12)}setAbsoluteRotation(t){this.rotation(Ve(t,e=>xu(e,this.worldToParent())))}getAbsoluteScale(){const t=this.localToWorld();return new y(y.magnitude(t.m11,t.m12),y.magnitude(t.m21,t.m22))}setAbsoluteScale(t){this.scale(Ve(t,e=>this.getRelativeScale(new y(e))))}getRelativeScale(t){var r;const e=((r=this.parent())==null?void 0:r.absoluteScale())??y.one;return t.div(e)}*tweenCompositeOperation(t,e,r){const i=ae(t);i==="source-over"?(yield*this.compositeOverride(1,e,r),this.compositeOverride(0),this.compositeOperation(i)):(this.compositeOperation(i),this.compositeOverride(1),yield*this.compositeOverride(0,e,r))}absoluteOpacity(){var t;return(((t=this.parent())==null?void 0:t.absoluteOpacity())??1)*this.opacity()}hasFilters(){return!!this.filters().find(t=>t.isActive())}hasShadow(){return!!this.shadowColor()&&(this.shadowBlur()>0||this.shadowOffset.x()!==0||this.shadowOffset.y()!==0)}filterString(){let t="";const e=this.compositeToWorld();for(const r of this.filters())r.isActive()&&(t+=" "+r.serialize(e));return t}getSpawner(){return this.children()}setSpawner(t){this.children(t)}setChildren(t){if(this.children.context.raw()!==t){if(this.children.context.setter(t),!ye(t))this.spawnChildren(!1,t);else if(!this.hasSpawnedChildren)for(const e of this.realChildren)e.parent(null)}}getChildren(){return this.children.context.getter(),this.spawnedChildren()}spawnedChildren(){const t=this.children.context.getter();return ye(this.children.context.raw())&&this.spawnChildren(!0,t),this.realChildren}sortedChildren(){return[...this.children()].sort((t,e)=>Math.sign(t.zIndex()-e.zIndex()))}constructor({children:t,spawner:e,key:r,...i}){this.compositeOverride=It(0),this.stateStack=[],this.realChildren=[],this.hasSpawnedChildren=!1,this.parent=It(null),this.properties=Sa(this);const a=nn();[this.key,this.unregister]=a.registerNode(this,r),this.view2D=a.getView(),this.creationStack=new Error().stack,ui(this,i),e&&zt().warn({message:"Node.spawner() has been deprecated.",remarks:"Use <code>Node.children()</code> instead.",inspect:this.key,stack:new Error().stack}),this.children(e??t)}localToWorld(){const t=this.parent();return t?t.localToWorld().multiply(this.localToParent()):this.localToParent()}worldToLocal(){return this.localToWorld().inverse()}worldToParent(){var t;return((t=this.parent())==null?void 0:t.worldToLocal())??new DOMMatrix}parentToWorld(){var t;return((t=this.parent())==null?void 0:t.localToWorld())??new DOMMatrix}localToParent(){const t=new DOMMatrix;return t.translateSelf(this.x(),this.y()),t.rotateSelf(0,0,this.rotation()),t.scaleSelf(this.scale.x(),this.scale.y()),t.skewXSelf(this.skew.x()),t.skewYSelf(this.skew.y()),t}compositeToWorld(){var t;return((t=this.compositeRoot())==null?void 0:t.localToWorld())??new DOMMatrix}compositeRoot(){var t;return this.composite()?this:((t=this.parent())==null?void 0:t.compositeRoot())??null}compositeToLocal(){const t=this.compositeRoot();if(t){const e=this.worldToLocal();return e.m44=1,t.localToWorld().multiply(e)}return new DOMMatrix}view(){return this.view2D}add(t){return this.insert(t,1/0)}insert(t,e=0){const r=Array.isArray(t)?t:[t];if(r.length===0)return this;const i=this.children(),a=i.slice(0,e);for(const l of r)l instanceof sn&&(a.push(l),l.remove(),l.parent(this));return a.push(...i.slice(e)),this.setParsedChildren(a),this}remove(){const t=this.parent();return t===null?this:(t.removeChild(this),this.parent(null),this)}move(t=1){const e=this.parent();if(t===0||!e)return this;const r=e.children(),i=[];if(t>0)for(let a=0;a<r.length;a++){const l=r[a];if(l===this){const c=a+t;for(;a<c&&a+1<r.length;a++)i[a]=r[a+1]}i[a]=l}else for(let a=r.length-1;a>=0;a--){const l=r[a];if(l===this){const c=a+t;for(;a>c&&a>0;a--)i[a]=r[a-1]}i[a]=l}return e.setParsedChildren(i),this}moveUp(){return this.move(1)}moveDown(){return this.move(-1)}moveToTop(){return this.move(1/0)}moveToBottom(){return this.move(-1/0)}moveTo(t){const e=this.parent();if(!e)return this;const r=e.children().indexOf(this),i=t-r;return this.move(i)}moveBelow(t,e=!1){const r=this.parent();if(!r)return this;if(t.parent()!==r)return zt().error("Cannot position nodes relative to each other if they don't belong to the same parent."),this;const i=r.children(),a=i.indexOf(this),l=i.indexOf(t);if(!e&&a<l)return this;const c=l-a-1;return this.move(c)}moveAbove(t,e=!1){const r=this.parent();if(!r)return this;if(t.parent()!==r)return zt().error("Cannot position nodes relative to each other if they don't belong to the same parent."),this;const i=r.children(),a=i.indexOf(this),l=i.indexOf(t);if(!e&&a>l)return this;const c=l-a+1;return this.move(c)}reparent(t){const e=this.absolutePosition(),r=this.absoluteRotation(),i=this.absoluteScale();return t.add(this),this.absolutePosition(e),this.absoluteRotation(r),this.absoluteScale(i),this}removeChildren(){for(const t of this.realChildren)t.parent(null);return this.setParsedChildren([]),this}peekChildren(){return this.realChildren}findAll(t){const e=[],r=this.reversedChildren();for(;r.length>0;){const i=r.pop();t(i)&&e.push(i);const a=i.children();for(let l=a.length-1;l>=0;l--)r.push(a[l])}return e}findFirst(t){const e=this.reversedChildren();for(;e.length>0;){const r=e.pop();if(t(r))return r;const i=r.children();for(let a=i.length-1;a>=0;a--)e.push(i[a])}return null}findLast(t){const e=[],r=this.reversedChildren();for(;r.length>0;){const i=r.pop();e.push(i);const a=i.children();for(let l=a.length-1;l>=0;l--)r.push(a[l])}for(;e.length>0;){const i=e.pop();if(t(i))return i}return null}findAncestor(t){let e=this.parent();for(;e;){if(t(e))return e;e=e.parent()}return null}childAs(t){return this.children()[t]??null}childrenAs(){return this.children()}parentAs(){return this.parent()??null}dispose(){if(this.unregister){this.stateStack=[],this.unregister(),this.unregister=null;for(const{signal:t}of this)t==null||t.context.dispose();for(const t of this.realChildren)t.dispose()}}clone(t={}){const e={...t};ye(this.children.context.raw())?e.children??(e.children=this.children.context.raw()):this.children().length>0&&(e.children??(e.children=this.children().map(r=>r.clone())));for(const{key:r,meta:i,signal:a}of this)if(!(!i.cloneable||r in e))if(i.compound)for(const[l,c]of i.compoundEntries){if(c in e)continue;const d=a[l];d.context.isInitial()||(e[c]=d.context.raw())}else a.context.isInitial()||(e[r]=a.context.raw());return this.instantiate(e)}snapshotClone(t={}){const e={...this.getState(),...t};return this.children().length>0&&(e.children??(e.children=this.children().map(r=>r.snapshotClone()))),this.instantiate(e)}reactiveClone(t={}){const e={...t};this.children().length>0&&(e.children??(e.children=this.children().map(r=>r.reactiveClone())));for(const{key:r,meta:i,signal:a}of this)!i.cloneable||r in e||(e[r]=()=>a());return this.instantiate(e)}instantiate(t={}){return new this.constructor(t)}setParsedChildren(t){this.children.context.setter(t),this.realChildren=t}spawnChildren(t,e){const r=this.parseChildren(e),i=new Set;for(const a of r){const l=a.parent.context.raw();l&&l!==this&&l.removeChild(a),i.add(a.key),a.parent(this)}for(const a of this.realChildren)i.has(a.key)||a.parent(null);this.hasSpawnedChildren=t,this.realChildren=r}parseChildren(t){const e=[],r=Array.isArray(t)?t:[t];for(const i of r)i instanceof sn&&e.push(i);return e}removeChild(t){this.setParsedChildren(this.children().filter(e=>e!==t))}requiresCache(){return this.cache()||this.opacity()<1||this.compositeOperation()!=="source-over"||this.hasFilters()||this.hasShadow()||this.shaders().length>0}cacheCanvas(){const t=document.createElement("canvas").getContext("2d");if(!t)throw new Error("Could not create a cache canvas");return t}cachedCanvas(){const t=this.cacheCanvas(),e=this.worldSpaceCacheBBox(),r=this.localToWorld();return t.canvas.width=e.width,t.canvas.height=e.height,t.setTransform(r.a,r.b,r.c,r.d,r.e-e.x,r.f-e.y),this.draw(t),t}getCacheBBox(){return new nt}cacheBBox(){const t=this.getCacheBBox(),e=this.children(),r=this.cachePadding();if(e.length===0)return t.addSpacing(r);const i=t.corners;for(const l of e){const c=l.fullCacheBBox(),d=l.localToParent();i.push(...c.corners.map(v=>v.transformAsPoint(d)))}return nt.fromPoints(...i).addSpacing(r)}fullCacheBBox(){const t=this.compositeToLocal(),e=this.shadowOffset().transform(t),r=Jn(this.shadowBlur(),t),i=this.cacheBBox().expand(this.filters.blur()*2+r);return e.x<0?(i.x+=e.x,i.width-=e.x):i.width+=e.x,e.y<0?(i.y+=e.y,i.height-=e.y):i.height+=e.y,i}worldSpaceCacheBBox(){const t=nt.fromSizeCentered(this.view().size()).expand(this.view().cachePadding()),e=nt.fromPoints(...t.transformCorners(this.view().localToWorld())),r=nt.fromPoints(...this.cacheBBox().transformCorners(this.localToWorld()));return e.intersection(r).pixelPerfect.expand(2)}parentWorldSpaceCacheBBox(){var t;return((t=this.findAncestor(e=>e.requiresCache()))==null?void 0:t.worldSpaceCacheBBox())??new nt(y.zero,nn().getRealSize())}setupDrawFromCache(t){if(t.globalCompositeOperation=this.compositeOperation(),t.globalAlpha*=this.opacity(),this.hasFilters()&&(t.filter=this.filterString()),this.hasShadow()){const r=this.compositeToWorld(),i=this.shadowOffset().transform(r),a=Jn(this.shadowBlur(),r);t.shadowColor=this.shadowColor().serialize(),t.shadowBlur=a,t.shadowOffsetX=i.x,t.shadowOffsetY=i.y}const e=this.worldToLocal();t.transform(e.a,e.b,e.c,e.d,e.e,e.f)}renderFromSource(t,e,r,i){this.setupDrawFromCache(t);const a=this.compositeOverride();t.drawImage(e,r,i),a>0&&(t.save(),t.globalAlpha*=a,t.globalCompositeOperation="source-over",t.drawImage(e,r,i),t.restore())}shaderCanvas(t,e){var z,A;const r=this.shaders();if(r.length===0)return null;const i=nn(),a=i.getRealSize(),l=this.parentWorldSpaceCacheBBox(),c=new DOMMatrix().scaleSelf(a.width/l.width,a.height/-l.height).translateSelf(l.x/-a.width,l.y/a.height-1),d=this.worldSpaceCacheBBox(),v=new DOMMatrix().scaleSelf(a.width/d.width,a.height/-d.height).translateSelf(d.x/-a.width,d.y/a.height-1).invertSelf(),x=i.shaders.getGL();i.shaders.copyTextures(t,e),i.shaders.clear();for(const B of r){const X=i.shaders.getProgram(B.fragment);if(X){if(B.uniforms)for(const[T,N]of Object.entries(B.uniforms)){const it=x.getUniformLocation(X,T);if(it===null)continue;const K=ae(N);typeof K=="number"?x.uniform1f(it,K):"toUniform"in K?K.toUniform(x,it):K.length===1?x.uniform1f(it,K[0]):K.length===2?x.uniform2f(it,K[0],K[1]):K.length===3?x.uniform3f(it,K[0],K[1],K[2]):K.length===4&&x.uniform4f(it,K[0],K[1],K[2],K[3])}x.uniform1f(x.getUniformLocation(X,na),this.view2D.globalTime()),x.uniform1i(x.getUniformLocation(X,na),i.playback.frame),x.uniformMatrix4fv(x.getUniformLocation(X,au),!1,v.toFloat32Array()),x.uniformMatrix4fv(x.getUniformLocation(X,ou),!1,c.toFloat32Array()),(z=B.setup)==null||z.call(B,x,X),i.shaders.render(),(A=B.teardown)==null||A.call(B,x,X)}}return x.canvas}render(t){if(!(this.absoluteOpacity()<=0)){if(t.save(),this.transformContext(t),this.requiresCache()){const e=this.worldSpaceCacheBBox();if(e.width!==0&&e.height!==0){const r=this.cachedCanvas().canvas,i=this.shaderCanvas(t.canvas,r);i?this.renderFromSource(t,i,0,0):this.renderFromSource(t,r,e.position.x,e.position.y)}}else this.draw(t);t.restore()}}draw(t){this.drawChildren(t)}drawChildren(t){for(const e of this.sortedChildren())e.render(t)}drawOverlay(t,e){const r=this.cacheBBox().transformCorners(e),i=this.getCacheBBox().transformCorners(e);t.strokeStyle="white",t.lineWidth=1,t.beginPath(),Re(t,r),t.closePath(),t.stroke(),t.strokeStyle="blue",t.beginPath(),Re(t,i),t.closePath(),t.stroke()}transformContext(t){const e=this.localToParent();t.transform(e.a,e.b,e.c,e.d,e.e,e.f)}hit(t){let e=null;const r=t.transformAsPoint(this.localToParent().inverse()),i=this.children();for(let a=i.length-1;a>=0&&(e=i[a].hit(r),!e);a--);return e}collectAsyncResources(){for(const t of this.children())t.collectAsyncResources()}async toPromise(){do await Tt.consumePromises(),this.collectAsyncResources();while(Tt.hasPromises());return this}getState(){const t={};for(const{key:e,meta:r,signal:i}of this)!r.cloneable||e in t||(t[e]=i());return t}applyState(t,e,r=re){if(e===void 0)for(const a in t){const l=this.signalByKey(a);l&&l(t[a])}const i=[];for(const a in t){const l=this.signalByKey(a);t[a]!==l.context.raw()&&i.push(l(t[a],e,r))}return Q(...i)}save(){this.stateStack.push(this.getState())}restore(t,e=re){const r=this.stateStack.pop();if(r!==void 0)return this.applyState(r,t,e)}*[Symbol.iterator](){for(const t in this.properties){const e=this.properties[t],r=this.signalByKey(t);yield{meta:e,signal:r,key:t}}}signalByKey(t){return this[t]}reversedChildren(){const t=this.children(),e=[];for(let r=t.length-1;r>=0;r--)e.push(t[r]);return e}};q([be()],E.prototype,"position",void 0);q([Ir(y),tr(!1),L()],E.prototype,"absolutePosition",void 0);q([O(0),L()],E.prototype,"rotation",void 0);q([tr(!1),L()],E.prototype,"absoluteRotation",void 0);q([O(y.one),be("scale")],E.prototype,"scale",void 0);q([O(y.zero),be("skew")],E.prototype,"skew",void 0);q([Ir(y),tr(!1),L()],E.prototype,"absoluteScale",void 0);q([O(0),L()],E.prototype,"zIndex",void 0);q([O(!1),L()],E.prototype,"cache",void 0);q([pn("cachePadding")],E.prototype,"cachePadding",void 0);q([O(!1),L()],E.prototype,"composite",void 0);q([O("source-over"),L()],E.prototype,"compositeOperation",void 0);q([bt()],E.prototype,"tweenCompositeOperation",null);q([O(1),di(n=>Et(0,1,n)),L()],E.prototype,"opacity",void 0);q([U()],E.prototype,"absoluteOpacity",null);q([Au()],E.prototype,"filters",void 0);q([O("#0000"),$u()],E.prototype,"shadowColor",void 0);q([O(0),L()],E.prototype,"shadowBlur",void 0);q([be("shadowOffset")],E.prototype,"shadowOffset",void 0);q([O([]),di(_u),L()],E.prototype,"shaders",void 0);q([U()],E.prototype,"hasFilters",null);q([U()],E.prototype,"hasShadow",null);q([U()],E.prototype,"filterString",null);q([Ta(!1),tr(!1),L()],E.prototype,"spawner",void 0);q([Ta(!1),tr(!1),L()],E.prototype,"children",void 0);q([U()],E.prototype,"spawnedChildren",null);q([U()],E.prototype,"sortedChildren",null);q([U()],E.prototype,"localToWorld",null);q([U()],E.prototype,"worldToLocal",null);q([U()],E.prototype,"worldToParent",null);q([U()],E.prototype,"parentToWorld",null);q([U()],E.prototype,"localToParent",null);q([U()],E.prototype,"compositeToWorld",null);q([U()],E.prototype,"compositeRoot",null);q([U()],E.prototype,"compositeToLocal",null);q([U()],E.prototype,"cacheCanvas",null);q([U()],E.prototype,"cachedCanvas",null);q([U()],E.prototype,"cacheBBox",null);q([U()],E.prototype,"fullCacheBBox",null);q([U()],E.prototype,"worldSpaceCacheBBox",null);q([U()],E.prototype,"parentWorldSpaceCacheBBox",null);E=sn=q([he("Node")],E);E.prototype.isClass=!0;var D=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a},an;let W=an=class extends E{get columnGap(){return this.gap.x}get rowGap(){return this.gap.y}getX(){return this.isLayoutRoot()?this.x.context.getter():this.computedPosition().x}setX(t){this.x.context.setter(t)}getY(){return this.isLayoutRoot()?this.y.context.getter():this.computedPosition().y}setY(t){this.y.context.setter(t)}get width(){return this.size.x}get height(){return this.size.y}getWidth(){return this.computedSize().width}setWidth(t){this.width.context.setter(t)}*tweenWidth(t,e,r,i){const a=this.desiredSize().x,l=typeof a!="number"||typeof t!="number";let c;l?c=this.size.x():c=a;let d;l?(this.size.x(t),d=this.size.x()):d=t,this.size.x(c),l&&this.lockSize(),yield*Qt(e,v=>this.size.x(i(c,d,r(v)))),this.size.x(t),l&&this.releaseSize()}getHeight(){return this.computedSize().height}setHeight(t){this.height.context.setter(t)}*tweenHeight(t,e,r,i){const a=this.desiredSize().y,l=typeof a!="number"||typeof t!="number";let c;l?c=this.size.y():c=a;let d;l?(this.size.y(t),d=this.size.y()):d=t,this.size.y(c),l&&this.lockSize(),yield*Qt(e,v=>this.size.y(i(c,d,r(v)))),this.size.y(t),l&&this.releaseSize()}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}*tweenSize(t,e,r,i){const a=this.desiredSize();let l;typeof a.x!="number"||typeof a.y!="number"?l=this.size():l=new y(a);let c;typeof t=="object"&&typeof t.x=="number"&&typeof t.y=="number"?c=new y(t):(this.size(t),c=this.size()),this.size(l),this.lockSize(),yield*Qt(e,d=>this.size(i(l,c,r(d)))),this.releaseSize(),this.size(t)}cardinalPoint(t){switch(t){case mt.TopLeft:return this.topLeft;case mt.TopRight:return this.topRight;case mt.BottomLeft:return this.bottomLeft;case mt.BottomRight:return this.bottomRight;case mt.Top:case Wt.Top:return this.top;case mt.Bottom:case Wt.Bottom:return this.bottom;case mt.Left:case Wt.Left:return this.left;case mt.Right:case Wt.Right:return this.right;default:return this.middle}}constructor(t){super(t),this.element.dataset.motionCanvasKey=this.key}lockSize(){this.sizeLockCounter(this.sizeLockCounter()+1)}releaseSize(){this.sizeLockCounter(this.sizeLockCounter()-1)}parentTransform(){return this.findAncestor(gi(an))}anchorPosition(){const t=this.computedSize(),e=this.offset();return t.scale(.5).mul(e)}layoutEnabled(){var t;return this.layout()??((t=this.parentTransform())==null?void 0:t.layoutEnabled())??!1}isLayoutRoot(){var t;return!this.layoutEnabled()||!((t=this.parentTransform())!=null&&t.layoutEnabled())}localToParent(){const t=super.localToParent(),e=this.offset();if(!e.exactlyEquals(y.zero)){const r=this.size().mul(e).scale(-.5);t.translateSelf(r.x,r.y)}return t}scalingRotationMatrix(){const t=new DOMMatrix;t.rotateSelf(0,0,this.rotation()),t.scaleSelf(this.scale.x(),this.scale.y());const e=this.offset();if(!e.exactlyEquals(y.zero)){const r=this.size().mul(e).scale(-.5);t.translateSelf(r.x,r.y)}return t}getComputedLayout(){return new nt(this.element.getBoundingClientRect())}computedPosition(){this.requestLayoutUpdate();const t=this.getComputedLayout(),e=new y(t.x+t.width/2*this.offset.x(),t.y+t.height/2*this.offset.y()),r=this.parentTransform();if(r){const i=r.getComputedLayout();e.x-=i.x+(i.width-t.width)/2,e.y-=i.y+(i.height-t.height)/2}return e}computedSize(){return this.requestLayoutUpdate(),this.getComputedLayout().size}requestLayoutUpdate(){const t=this.parentTransform();this.appendedToView()?(t==null||t.requestFontUpdate(),this.updateLayout()):t.requestLayoutUpdate()}appendedToView(){const t=this.isLayoutRoot();return t&&this.view().element.append(this.element),t}updateLayout(){if(this.applyFont(),this.applyFlex(),this.layoutEnabled()){const t=this.layoutChildren();for(const e of t)e.updateLayout()}}layoutChildren(){const t=[...this.children()],e=[],r=[];for(;t.length;){const i=t.shift();i instanceof an?i.layoutEnabled()&&(e.push(i),r.push(i.element)):i&&t.unshift(...i.children())}return this.element.replaceChildren(...r),e}requestFontUpdate(){var t;this.appendedToView(),(t=this.parentTransform())==null||t.requestFontUpdate(),this.applyFont()}getCacheBBox(){return nt.fromSizeCentered(this.computedSize())}draw(t){if(this.clip()){const e=this.computedSize();if(e.width===0||e.height===0)return;t.beginPath(),t.rect(e.width/-2,e.height/-2,e.width,e.height),t.closePath(),t.clip()}this.drawChildren(t)}drawOverlay(t,e){const r=this.computedSize(),i=r.mul(this.offset()).scale(.5).transformAsPoint(e),a=nt.fromSizeCentered(r),l=a.transformCorners(e),c=a.addSpacing(this.padding().scale(-1)).transformCorners(e),d=a.addSpacing(this.margin()).transformCorners(e);t.beginPath(),Re(t,d),Re(t,l),t.closePath(),t.fillStyle="rgba(255,193,125,0.6)",t.fill("evenodd"),t.beginPath(),Re(t,l),Re(t,c),t.closePath(),t.fillStyle="rgba(180,255,147,0.6)",t.fill("evenodd"),t.beginPath(),Re(t,l),t.closePath(),t.lineWidth=1,t.strokeStyle="white",t.stroke(),t.beginPath(),Ca(t,i),t.stroke()}getOriginDelta(t){const e=this.computedSize().scale(.5),r=this.offset().mul(e);return t===mt.Middle?r.flipped:bu(t).mul(e).sub(r)}moveOffset(t){const e=this.computedSize().scale(.5),r=this.offset().mul(e),i=t.mul(e);this.offset(t),this.position(this.position().add(i).sub(r))}parsePixels(t){return t===null?"":`${t}px`}parseLength(t){return t===null?"":typeof t=="string"?t:`${t}px`}applyFlex(){this.element.style.position=this.isLayoutRoot()?"absolute":"relative";const t=this.desiredSize();this.element.style.width=this.parseLength(t.x),this.element.style.height=this.parseLength(t.y),this.element.style.maxWidth=this.parseLength(this.maxWidth()),this.element.style.minWidth=this.parseLength(this.minWidth()),this.element.style.maxHeight=this.parseLength(this.maxHeight()),this.element.style.minHeight=this.parseLength(this.minHeight()),this.element.style.aspectRatio=this.ratio()===null?"":this.ratio().toString(),this.element.style.marginTop=this.parsePixels(this.margin.top()),this.element.style.marginBottom=this.parsePixels(this.margin.bottom()),this.element.style.marginLeft=this.parsePixels(this.margin.left()),this.element.style.marginRight=this.parsePixels(this.margin.right()),this.element.style.paddingTop=this.parsePixels(this.padding.top()),this.element.style.paddingBottom=this.parsePixels(this.padding.bottom()),this.element.style.paddingLeft=this.parsePixels(this.padding.left()),this.element.style.paddingRight=this.parsePixels(this.padding.right()),this.element.style.flexDirection=this.direction(),this.element.style.flexBasis=this.parseLength(this.basis()),this.element.style.flexWrap=this.wrap(),this.element.style.justifyContent=this.justifyContent(),this.element.style.alignContent=this.alignContent(),this.element.style.alignItems=this.alignItems(),this.element.style.alignSelf=this.alignSelf(),this.element.style.columnGap=this.parseLength(this.gap.x()),this.element.style.rowGap=this.parseLength(this.gap.y()),this.sizeLockCounter()>0?(this.element.style.flexGrow="0",this.element.style.flexShrink="0"):(this.element.style.flexGrow=this.grow().toString(),this.element.style.flexShrink=this.shrink().toString())}applyFont(){if(this.element.style.fontFamily=this.fontFamily.isInitial()?"":this.fontFamily(),this.element.style.fontSize=this.fontSize.isInitial()?"":`${this.fontSize()}px`,this.element.style.fontStyle=this.fontStyle.isInitial()?"":this.fontStyle(),this.lineHeight.isInitial())this.element.style.lineHeight="";else{const t=this.lineHeight();this.element.style.lineHeight=typeof t=="string"?(parseFloat(t)/100).toString():`${t}px`}if(this.element.style.fontWeight=this.fontWeight.isInitial()?"":this.fontWeight().toString(),this.element.style.letterSpacing=this.letterSpacing.isInitial()?"":`${this.letterSpacing()}px`,this.element.style.textAlign=this.textAlign.isInitial()?"":this.textAlign(),this.textWrap.isInitial())this.element.style.whiteSpace="";else{const t=this.textWrap();typeof t=="boolean"?this.element.style.whiteSpace=t?"normal":"nowrap":this.element.style.whiteSpace=t}}dispose(){var t;super.dispose(),(t=this.sizeLockCounter)==null||t.context.dispose(),this.element&&(this.element.remove(),this.element.innerHTML=""),this.element=null,this.styles=null}hit(t){const e=t.transformAsPoint(this.localToParent().inverse());return this.cacheBBox().includes(e)?super.hit(t)??this:null}};D([O(null),fi(pu),L()],W.prototype,"layout",void 0);D([O(null),L()],W.prototype,"maxWidth",void 0);D([O(null),L()],W.prototype,"maxHeight",void 0);D([O(null),L()],W.prototype,"minWidth",void 0);D([O(null),L()],W.prototype,"minHeight",void 0);D([O(null),L()],W.prototype,"ratio",void 0);D([pn("margin")],W.prototype,"margin",void 0);D([pn("padding")],W.prototype,"padding",void 0);D([O("row"),L()],W.prototype,"direction",void 0);D([O(null),L()],W.prototype,"basis",void 0);D([O(0),L()],W.prototype,"grow",void 0);D([O(1),L()],W.prototype,"shrink",void 0);D([O("nowrap"),L()],W.prototype,"wrap",void 0);D([O("start"),L()],W.prototype,"justifyContent",void 0);D([O("normal"),L()],W.prototype,"alignContent",void 0);D([O("stretch"),L()],W.prototype,"alignItems",void 0);D([O("auto"),L()],W.prototype,"alignSelf",void 0);D([O(0),be({x:"columnGap",y:"rowGap"})],W.prototype,"gap",void 0);D([Ee("font-family"),L()],W.prototype,"fontFamily",void 0);D([Ee("font-size",parseFloat),L()],W.prototype,"fontSize",void 0);D([Ee("font-style"),L()],W.prototype,"fontStyle",void 0);D([Ee("font-weight",parseInt),L()],W.prototype,"fontWeight",void 0);D([Ee("line-height",parseFloat),L()],W.prototype,"lineHeight",void 0);D([Ee("letter-spacing",n=>n==="normal"?0:parseFloat(n)),L()],W.prototype,"letterSpacing",void 0);D([Ee("white-space",n=>n==="pre"?"pre":n==="normal"),L()],W.prototype,"textWrap",void 0);D([O("inherit"),L()],W.prototype,"textDirection",void 0);D([Ee("text-align"),L()],W.prototype,"textAlign",void 0);D([O({x:null,y:null}),be({x:"width",y:"height"})],W.prototype,"size",void 0);D([bt()],W.prototype,"tweenWidth",null);D([bt()],W.prototype,"tweenHeight",null);D([U()],W.prototype,"desiredSize",null);D([bt()],W.prototype,"tweenSize",null);D([be("offset")],W.prototype,"offset",void 0);D([we(mt.Middle)],W.prototype,"middle",void 0);D([we(mt.Top)],W.prototype,"top",void 0);D([we(mt.Bottom)],W.prototype,"bottom",void 0);D([we(mt.Left)],W.prototype,"left",void 0);D([we(mt.Right)],W.prototype,"right",void 0);D([we(mt.TopLeft)],W.prototype,"topLeft",void 0);D([we(mt.TopRight)],W.prototype,"topRight",void 0);D([we(mt.BottomLeft)],W.prototype,"bottomLeft",void 0);D([we(mt.BottomRight)],W.prototype,"bottomRight",void 0);D([O(!1),L()],W.prototype,"clip",void 0);D([O(0),L()],W.prototype,"sizeLockCounter",void 0);D([U()],W.prototype,"parentTransform",null);D([U()],W.prototype,"anchorPosition",null);D([U()],W.prototype,"layoutEnabled",null);D([U()],W.prototype,"isLayoutRoot",null);D([U()],W.prototype,"scalingRotationMatrix",null);D([U()],W.prototype,"computedPosition",null);D([U()],W.prototype,"computedSize",null);D([U()],W.prototype,"requestLayoutUpdate",null);D([U()],W.prototype,"appendedToView",null);D([U()],W.prototype,"updateLayout",null);D([U()],W.prototype,"layoutChildren",null);D([U()],W.prototype,"requestFontUpdate",null);D([U()],W.prototype,"applyFlex",null);D([U()],W.prototype,"applyFont",null);W=an=D([he("Layout")],W);function we(n){return(t,e)=>{L()(t,e),tr(!1)(t,e);const r=Ke(t,e);r.parser=i=>new y(i),r.getter=function(){return this.computedSize().getOriginOffset(n).transformAsPoint(this.localToParent())},r.setter=function(i){return this.position(Ve(i,a=>this.getOriginDelta(n).transform(this.scalingRotationMatrix()).flipped.add(a))),this}}}$r(W.prototype,n=>{n.element=document.createElement("div"),n.element.style.display="flex",n.element.style.boxSizing="border-box",n.styles=getComputedStyle(n.element)});var Ut=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};let $t=class extends W{rippleSize(){return br(this.rippleStrength(),0,50)}constructor(t){super(t),this.rippleStrength=It(0)}applyText(t){t.direction=this.textDirection(),this.element.dir=this.textDirection()}applyStyle(t){t.fillStyle=ti(this.fill(),t),t.strokeStyle=ti(this.stroke(),t),t.lineWidth=this.lineWidth(),t.lineJoin=this.lineJoin(),t.lineCap=this.lineCap(),t.setLineDash(this.lineDash()),t.lineDashOffset=this.lineDashOffset(),this.antialiased()||(t.filter="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxmaWx0ZXIgaWQ9ImZpbHRlciIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj48ZmVDb21wb25lbnRUcmFuc2Zlcj48ZmVGdW5jUiB0eXBlPSJpZGVudGl0eSIvPjxmZUZ1bmNHIHR5cGU9ImlkZW50aXR5Ii8+PGZlRnVuY0IgdHlwZT0iaWRlbnRpdHkiLz48ZmVGdW5jQSB0eXBlPSJkaXNjcmV0ZSIgdGFibGVWYWx1ZXM9IjAgMSIvPjwvZmVDb21wb25lbnRUcmFuc2Zlcj48L2ZpbHRlcj48L3N2Zz4=#filter)")}draw(t){this.drawShape(t),this.clip()&&t.clip(this.getPath()),this.drawChildren(t)}drawShape(t){const e=this.getPath(),r=this.lineWidth()>0&&this.stroke()!==null,i=this.fill()!==null;t.save(),this.applyStyle(t),this.drawRipple(t),this.strokeFirst()?(r&&t.stroke(e),i&&t.fill(e)):(i&&t.fill(e),r&&t.stroke(e)),t.restore()}getCacheBBox(){return super.getCacheBBox().expand(this.lineWidth()/2)}getPath(){return new Path2D}getRipplePath(){return new Path2D}drawRipple(t){const e=this.rippleStrength();if(e>0){const r=this.getRipplePath();t.save(),t.globalAlpha*=dt(.54,0,e),t.fill(r),t.restore()}}*ripple(t=1){this.rippleStrength(0),yield*this.rippleStrength(1,t,yu),this.rippleStrength(0)}};Ut([ka()],$t.prototype,"fill",void 0);Ut([ka()],$t.prototype,"stroke",void 0);Ut([O(!1),L()],$t.prototype,"strokeFirst",void 0);Ut([O(0),L()],$t.prototype,"lineWidth",void 0);Ut([O("miter"),L()],$t.prototype,"lineJoin",void 0);Ut([O("butt"),L()],$t.prototype,"lineCap",void 0);Ut([O([]),L()],$t.prototype,"lineDash",void 0);Ut([O(0),L()],$t.prototype,"lineDashOffset",void 0);Ut([O(!0),L()],$t.prototype,"antialiased",void 0);Ut([U()],$t.prototype,"rippleSize",null);Ut([U()],$t.prototype,"getPath",null);Ut([bt()],$t.prototype,"ripple",null);$t=Ut([he("Shape")],$t);var Kt=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};let Ot=class extends $t{desiredSize(){return this.childrenBBox().size}constructor(t){super(t),this.canHaveSubpath=!1}percentageToDistance(t){return Et(0,this.baseArcLength(),this.startOffset()+this.offsetArcLength()*t)}distanceToPercentage(t){return(t-this.startOffset())/this.offsetArcLength()}baseArcLength(){return this.profile().arcLength}offsetArcLength(){const t=this.startOffset(),e=this.endOffset(),r=this.baseArcLength();return Et(0,r,r-t-e)}arcLength(){return this.offsetArcLength()*Math.abs(this.start()-this.end())}completion(){return Math.abs(this.start()-this.end())}processSubpath(t,e,r){}curveDrawingInfo(){const t=new Path2D;let e=new Path2D;const r=this.profile();let i=this.percentageToDistance(this.start()),a=this.percentageToDistance(this.end());i>a&&([i,a]=[a,i]);const l=a-i,c=Math.min(l/2,this.arrowSize());this.startArrow()&&(i+=c/2),this.endArrow()&&(a-=c/2);let d=0,v=null,x=null,z=null,A=null;for(const B of r.segments){const X=d;if(d+=B.arcLength,d<i)continue;const T=(i-X)/B.arcLength,N=(a-X)/B.arcLength,it=Et(0,1,T),K=Et(0,1,N);this.canHaveSubpath&&z&&!B.getPoint(0).position.equals(z)&&(t.addPath(e),this.processSubpath(e,v,z),e=new Path2D,v=null);const[yt,ht]=B.draw(e,it,K,v===null);if(v===null&&(v=yt.position,x=yt.normal.flipped.perpendicular),z=ht.position,A=ht.normal.flipped.perpendicular,d>a)break}return this.closed()&&this.start.isInitial()&&this.end.isInitial()&&this.startOffset.isInitial()&&this.endOffset.isInitial()&&e.closePath(),this.processSubpath(e,v,z),t.addPath(e),{startPoint:v??y.zero,startTangent:x??y.right,endPoint:z??y.zero,endTangent:A??y.right,arrowSize:c,path:t,startOffset:i}}getPointAtDistance(t){return oa(this.profile(),t+this.startOffset())}getPointAtPercentage(t){return oa(this.profile(),this.percentageToDistance(t))}getComputedLayout(){return this.offsetComputedLayout(super.getComputedLayout())}offsetComputedLayout(t){return t.position=t.position.sub(this.childrenBBox().center),t}getPath(){return this.curveDrawingInfo().path}getCacheBBox(){const t=this.childrenBBox(),e=this.startArrow()||this.endArrow()?this.arrowSize():0,r=this.lineWidth(),i=this.lineWidthCoefficient();return t.expand(Math.max(0,e,r*i))}lineWidthCoefficient(){return this.lineCap()==="square"?.5*1.4143:.5}requiresProfile(){return!this.start.isInitial()||!this.startOffset.isInitial()||!this.startArrow.isInitial()||!this.end.isInitial()||!this.endOffset.isInitial()||!this.endArrow.isInitial()}drawShape(t){super.drawShape(t),(this.startArrow()||this.endArrow())&&this.drawArrows(t)}drawArrows(t){const{startPoint:e,startTangent:r,endPoint:i,endTangent:a,arrowSize:l}=this.curveDrawingInfo();l<.001||(t.save(),t.beginPath(),this.endArrow()&&this.drawArrow(t,i,a.flipped,l),this.startArrow()&&this.drawArrow(t,e,r,l),t.fillStyle=ti(this.stroke(),t),t.closePath(),t.fill(),t.restore())}drawArrow(t,e,r,i){const a=r.perpendicular,l=e.add(r.scale(-i/2));Er(t,l),se(t,l.add(r.add(a).scale(i))),se(t,l.add(r.sub(a).scale(i))),se(t,l),t.closePath()}};Kt([O(!1),L()],Ot.prototype,"closed",void 0);Kt([O(0),L()],Ot.prototype,"start",void 0);Kt([O(0),L()],Ot.prototype,"startOffset",void 0);Kt([O(!1),L()],Ot.prototype,"startArrow",void 0);Kt([O(1),L()],Ot.prototype,"end",void 0);Kt([O(0),L()],Ot.prototype,"endOffset",void 0);Kt([O(!1),L()],Ot.prototype,"endArrow",void 0);Kt([O(24),L()],Ot.prototype,"arrowSize",void 0);Kt([U()],Ot.prototype,"arcLength",null);Kt([U()],Ot.prototype,"curveDrawingInfo",null);Ot=Kt([he("Curve")],Ot);class gn{}class Fa extends gn{constructor(t,e,r,i,a){super(),this.center=t,this.radius=e,this.from=r,this.to=i,this.counter=a,this.angle=Math.acos(Et(-1,1,r.dot(i))),this.length=Math.abs(this.angle*e);const l=new y(1,1).scale(e);this.points=[t.sub(l),t.add(l)]}get arcLength(){return this.length}draw(t,e,r){const i=this.counter?-1:1,a=this.from.radians+e*this.angle*i,l=this.to.radians-(1-r)*this.angle*i;Math.abs(this.angle)>1e-4&&t.arc(this.center.x,this.center.y,this.radius,a,l,this.counter);const c=y.fromRadians(a),d=y.fromRadians(l);return[{position:this.center.add(c.scale(this.radius)),tangent:this.counter?c:c.flipped,normal:this.counter?c.flipped:c},{position:this.center.add(d.scale(this.radius)),tangent:this.counter?d.flipped:d,normal:this.counter?d.flipped:d}]}getPoint(t){const e=this.counter?-1:1,r=this.from.radians+t*this.angle*e,i=y.fromRadians(r);return{position:this.center.add(i.scale(this.radius)),tangent:this.counter?i:i.flipped,normal:this.counter?i:i.flipped}}}class At{static constant(t){return new At(t)}static linear(t,e){return new At(t,e)}static quadratic(t,e,r){return new At(t,e,r)}static cubic(t,e,r,i){return new At(t,e,r,i)}get degree(){return this.c3!==0?3:this.c2!==0?2:this.c1!==0?1:0}constructor(t,e,r,i){this.c0=t,this.c1=e??0,this.c2=r??0,this.c3=i??0}differentiate(t=1){switch(t){case 0:return this;case 1:return new At(this.c1,2*this.c2,3*this.c3,0);case 2:return new At(2*this.c2,6*this.c3,0,0);case 3:return new At(6*this.c3,0,0,0);default:throw new Error("Unsupported derivative")}}eval(t,e=0){return e!==0?this.differentiate(e).eval(t):this.c3*(t*t*t)+this.c2*(t*t)+this.c1*t+this.c0}split(t){const e=1-t,r=new At(this.c0,this.c1*t,this.c2*t*t,this.c3*t*t*t),i=new At(this.eval(0),e*this.differentiate(1).eval(t),e*e/2*this.differentiate(2).eval(t),e*e*e/6*this.differentiate(3).eval(t));return[r,i]}roots(){switch(this.degree){case 3:return this.solveCubicRoots();case 2:return this.solveQuadraticRoots();case 1:return this.solveLinearRoot();case 0:return[];default:throw new Error(`Unsupported polynomial degree: ${this.degree}`)}}localExtrema(){return this.differentiate().roots()}localExtrema01(){const t=this.localExtrema(),e=[];for(let r=0;r<t.length;r++){const i=t[r];i>=0&&i<=1&&e.push(t[r])}return e}outputRange01(){let t=[this.eval(0),this.eval(1)];const e=r=>{t[1]>t[0]?t=[Math.min(t[0],r),Math.max(t[1],r)]:t=[Math.min(t[1],r),Math.max(t[0],r)]};return this.localExtrema01().forEach(r=>e(this.eval(r))),t}solveCubicRoots(){const t=this.c0,e=this.c1,r=this.c2,i=this.c3,a=t*t,l=t*r,c=e*e,d=(3*l-c)/(3*a),v=(2*c*e-9*l*e+27*a*i)/(27*a*t),x=this.solveDepressedCubicRoots(d,v),z=A=>A-e/(3*t);switch(x.length){case 1:return[z(x[0])];case 2:return[z(x[0]),z(x[1])];case 3:return[z(x[0]),z(x[1]),z(x[2])];default:return[]}}solveDepressedCubicRoots(t,e){if(this.almostZero(t))return[Math.cbrt(-e)];const r=Math.PI*2,i=4*t*t*t+27*e*e;if(i<1e-5){const a=2*Math.sqrt(-t/3),l=3*e/(2*t)*Math.sqrt(-3/t),c=d=>a*Math.cos(1/3*Math.acos(Et(-1,1,l))-r/3*d);return l>=.9999?[c(0),c(2)]:l<=-.9999?[c(1),c(2)]:[c(0),c(1),c(2)]}if(i>0&&t<0){const a=.3333333333333333*Math.acosh(-3*Math.abs(e)/(2*t)*Math.sqrt(-3/t));return[-2*Math.sign(e)*Math.sqrt(-t/3)*Math.cosh(a)]}if(t>0){const a=.3333333333333333*Math.asinh(3*e/(2*t)*Math.sqrt(3/t));return[-2*Math.sqrt(t/3)*Math.sinh(a)]}return[]}solveQuadraticRoots(){const t=this.c2,e=this.c1,r=this.c0,i=e*e-4*t*r;if(this.almostZero(i))return[-e/(2*t)];if(i>=0){const a=Math.sqrt(i),l=(-e-a)/(2*t),c=(-e+a)/(2*t);return[Math.min(l,c),Math.max(l,c)]}return[]}solveLinearRoot(){return[-this.c0/this.c1]}almostZero(t){return Math.abs(0-t)<=Number.EPSILON}}class kr{constructor(t,e,r,i){this.c0=t,this.c1=e,this.c2=r,this.c3=i,t instanceof At?(this.x=t,this.y=e):i!==void 0?(this.x=new At(t.x,e.x,r.x,i.x),this.y=new At(t.y,e.y,r.y,i.y)):(this.x=new At(t.x,e.x,r.x),this.y=new At(t.y,e.y,r.y))}eval(t,e=0){return new y(this.x.differentiate(e).eval(t),this.y.differentiate(e).eval(t))}split(t){const[e,r]=this.x.split(t),[i,a]=this.y.split(t);return[new kr(e,i),new kr(r,a)]}differentiate(t=1){return new kr(this.x.differentiate(t),this.y.differentiate(t))}evalDerivative(t){return this.differentiate().eval(t)}getBounds(){const t=this.x.outputRange01(),e=this.y.outputRange01();return nt.fromPoints(new y(Math.min(...t),Math.max(...e)),new y(Math.max(...t),Math.min(...e)))}}class Wu{constructor(t,e=20){this.curve=t,this.sampledDistances=[],this.resample(e)}resample(t){this.sampledDistances=[0];let e=0,r=this.curve.eval(0).position;for(let i=1;i<t;i++){const a=i/(t-1),l=this.curve.eval(a),c=r.sub(l.position).magnitude;e+=c,this.sampledDistances.push(e),r=l.position}this.sampledDistances[this.sampledDistances.length-1]=this.curve.arcLength}pointAtDistance(t){return this.curve.eval(this.distanceToT(t))}distanceToT(t){const e=this.sampledDistances.length;t=Et(0,this.curve.arcLength,t);for(let r=0;r<e;r++){const i=this.sampledDistances[r],a=this.sampledDistances[r+1];if(t>=i&&t<=a)return gu(i,a,r/(e-1),(r+1)/(e-1),t)}return 1}}class Du extends gn{get arcLength(){return this.length}constructor(t,e){super(),this.curve=t,this.length=e,this.pointSampler=new Wu(this)}getBBox(){return this.curve.getBounds()}eval(t){const e=this.tangent(t);return{position:this.curve.eval(t),tangent:e,normal:e.perpendicular}}getPoint(t){const e=this.pointSampler.pointAtDistance(this.arcLength*t);return{position:e.position,tangent:e.tangent,normal:e.tangent.perpendicular}}transformPoints(t){return this.points.map(e=>e.transformAsPoint(t))}tangent(t){return this.curve.evalDerivative(t).normalized}draw(t,e=0,r=1,i=!0){let a=null,l=e,c=r,d=this.points;if(e!==0||r!==1){const z=this.length*e,A=this.length*r;l=this.pointSampler.distanceToT(z),c=this.pointSampler.distanceToT(A);const B=(c-l)/(1-l),[,X]=this.split(l);[a]=X.split(B),d=a.points}i&&Er(t,d[0]),(a??this).doDraw(t);const v=this.tangent(l),x=this.tangent(c);return[{position:d[0],tangent:v,normal:v.perpendicular},{position:d.at(-1),tangent:x,normal:x.perpendicular}]}}var Bu=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};class ke extends Du{get points(){return[this.p0,this.p1,this.p2,this.p3]}constructor(t,e,r,i){super(new kr(t,t.flipped.add(e).scale(3),t.scale(3).sub(e.scale(6)).add(r.scale(3)),t.flipped.add(e.scale(3)).sub(r.scale(3)).add(i)),ke.getLength(t,e,r,i)),this.p0=t,this.p1=e,this.p2=r,this.p3=i}split(t){const e=new y(this.p0.x+(this.p1.x-this.p0.x)*t,this.p0.y+(this.p1.y-this.p0.y)*t),r=new y(this.p1.x+(this.p2.x-this.p1.x)*t,this.p1.y+(this.p2.y-this.p1.y)*t),i=new y(this.p2.x+(this.p3.x-this.p2.x)*t,this.p2.y+(this.p3.y-this.p2.y)*t),a=new y(e.x+(r.x-e.x)*t,e.y+(r.y-e.y)*t),l=new y(r.x+(i.x-r.x)*t,r.y+(i.y-r.y)*t),c=new y(a.x+(l.x-a.x)*t,a.y+(l.y-a.y)*t),d=new ke(this.p0,e,a,c),v=new ke(c,l,i,this.p3);return[d,v]}doDraw(t){Mu(t,this.p1,this.p2,this.p3)}static getLength(t,e,r,i){return ke.el.setAttribute("d",`M ${t.x} ${t.y} C ${e.x} ${e.y} ${r.x} ${r.y} ${i.x} ${i.y}`),ke.el.getTotalLength()}}Bu([Mr(()=>document.createElementNS("http://www.w3.org/2000/svg","path"))],ke,"el",void 0);class ze extends gn{constructor(t,e){super(),this.from=t,this.to=e,this.vector=e.sub(t),this.length=this.vector.magnitude,this.normal=this.vector.perpendicular.normalized.safe,this.points=[t,e]}get arcLength(){return this.length}draw(t,e=0,r=1,i=!1){const a=this.from.add(this.vector.scale(e)),l=this.from.add(this.vector.scale(r));return i&&Er(t,a),se(t,l),[{position:a,tangent:this.normal.flipped,normal:this.normal},{position:l,tangent:this.normal,normal:this.normal}]}getPoint(t){return{position:this.from.add(this.vector.scale(t)),tangent:this.normal.flipped,normal:this.normal}}}function ju(n,t,e,r){const i={arcLength:0,segments:[],minSin:1},a=Le(t.top,t.right,t.left,n),l=Le(t.right,t.top,t.bottom,n),c=Le(t.bottom,t.left,t.right,n),d=Le(t.left,t.bottom,t.top,n);let v=new y(n.left+a,n.top),x=new y(n.right-l,n.top);return gr(i,new ze(v,x)),v=new y(n.right,n.top+l),x=new y(n.right,n.bottom-c),l>0&&rn(i,v.addX(-l),l,y.down,y.right,e,r),gr(i,new ze(v,x)),v=new y(n.right-c,n.bottom),x=new y(n.left+d,n.bottom),c>0&&rn(i,v.addY(-c),c,y.right,y.up,e,r),gr(i,new ze(v,x)),v=new y(n.left,n.bottom-d),x=new y(n.left,n.top+a),d>0&&rn(i,v.addX(d),d,y.up,y.left,e,r),gr(i,new ze(v,x)),v=new y(n.left+a,n.top),a>0&&rn(i,v.addY(a),a,y.left,y.down,e,r),i}function gr(n,t){n.segments.push(t),n.arcLength+=t.arcLength}function rn(n,t,e,r,i,a,l){const c=t.add(r.scale(e)),d=t.add(i.scale(e));a?gr(n,new ke(c,c.add(i.scale(l*e)),d.add(r.scale(l*e)),d)):gr(n,new Fa(t,e,r,i,!1))}var Or=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};let Z=class extends Ot{constructor(t){super(t)}profile(){return ju(this.childrenBBox(),this.radius(),this.smoothCorners(),this.cornerSharpness())}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}offsetComputedLayout(t){return t}childrenBBox(){return nt.fromSizeCentered(this.computedSize())}getPath(){if(this.requiresProfile())return this.curveDrawingInfo().path;const t=new Path2D,e=this.radius(),r=this.smoothCorners(),i=this.cornerSharpness(),a=nt.fromSizeCentered(this.size());return aa(t,a,e,r,i),t}getCacheBBox(){return super.getCacheBBox().expand(this.rippleSize())}getRipplePath(){const t=new Path2D,e=this.rippleSize(),r=this.radius().addScalar(e),i=this.smoothCorners(),a=this.cornerSharpness(),l=nt.fromSizeCentered(this.size()).expand(e);return aa(t,l,r,i,a),t}};Or([pn("radius")],Z.prototype,"radius",void 0);Or([O(!1),L()],Z.prototype,"smoothCorners",void 0);Or([O(.6),L()],Z.prototype,"cornerSharpness",void 0);Or([U()],Z.prototype,"profile",null);Z=Or([he("Rect")],Z);var Oe=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};class te extends E{constructor({children:t,...e}){super(e),this.scene()||this.scene(new E({})),t&&this.scene().add(t)}getZoom(){return 1/this.scale.x()}setZoom(t){this.scale(Ve(t,e=>1/e))}getDefaultZoom(){return this.scale.x.context.getInitial()}*tweenZoom(t,e,r,i){const a=this.scale.x();yield*Qt(e,l=>{this.zoom(1/i(a,1/ae(t),r(l)))})}*reset(t,e=re){yield*Q(this.position(yr,t,e),this.zoom(yr,t,e),this.rotation(yr,t,e))}*centerOn(t,e,r=re,i=y.lerp){const a=t instanceof E?t.absolutePosition().transformAsPoint(this.scene().worldToLocal()):t;yield*this.position(a,e,r,i)}*followCurve(t,e,r=re){yield*Qt(e,i=>{const a=r(i),l=t.getPointAtPercentage(a).position.transformAsPoint(t.localToWorld());this.position(l)})}*followCurveReverse(t,e,r=re){yield*Qt(e,i=>{const a=1-r(i),l=t.getPointAtPercentage(a).position.transformAsPoint(t.localToWorld());this.position(l)})}*followCurveWithRotation(t,e,r=re){yield*Qt(e,i=>{const a=r(i),{position:l,normal:c}=t.getPointAtPercentage(a),d=l.transformAsPoint(t.localToWorld()),v=c.flipped.perpendicular.degrees;this.position(d),this.rotation(v)})}*followCurveWithRotationReverse(t,e,r=re){yield*Qt(e,i=>{const a=1-r(i),{position:l,normal:c}=t.getPointAtPercentage(a),d=l.transformAsPoint(t.localToWorld()),v=c.flipped.perpendicular.degrees;this.position(d),this.rotation(v)})}transformContext(t){const e=this.localToParent().inverse();t.transform(e.a,e.b,e.c,e.d,e.e,e.f)}hit(t){const e=t.transformAsPoint(this.localToParent());return this.scene().hit(e)}drawChildren(t){this.scene().drawChildren(t)}static Stage({children:t,cameraRef:e,scene:r,...i}){const a=new te({scene:r,children:t});return e==null||e(a),new Z({clip:!0,...i,children:[a]})}}Oe([L()],te.prototype,"scene",void 0);Oe([tr(!1),L()],te.prototype,"zoom",void 0);Oe([bt()],te.prototype,"reset",null);Oe([bt()],te.prototype,"centerOn",null);Oe([bt()],te.prototype,"followCurve",null);Oe([bt()],te.prototype,"followCurveReverse",null);Oe([bt()],te.prototype,"followCurveWithRotation",null);Oe([bt()],te.prototype,"followCurveWithRotationReverse",null);var _r=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a},ei;let ve=ei=class extends Z{constructor(t){super({composite:!0,fontFamily:"Roboto",fontSize:48,lineHeight:"120%",textWrap:!1,fontStyle:"normal",...t}),this.view2D=this,ei.shadowRoot.append(this.element),this.applyFlex()}dispose(){this.removeChildren(),super.dispose()}render(t){this.computedSize(),this.computedPosition(),super.render(t)}findKey(t){return nn().getNode(t)??null}requestLayoutUpdate(){this.updateLayout()}requestFontUpdate(){this.applyFont()}view(){return this}};_r([O(Fr.Paused),L()],ve.prototype,"playbackState",void 0);_r([O(0),L()],ve.prototype,"globalTime",void 0);_r([L()],ve.prototype,"assetHash",void 0);_r([Mr(()=>{const n="motion-canvas-2d-frame";let t=document.querySelector(`#${n}`);return t||(t=document.createElement("div"),t.id=n,t.style.position="absolute",t.style.pointerEvents="none",t.style.top="0",t.style.left="0",t.style.opacity="0",t.style.overflow="hidden",document.body.prepend(t)),t.shadowRoot??t.attachShadow({mode:"open"})})],ve,"shadowRoot",void 0);ve=ei=_r([he("View2D")],ve);var Nu=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};class vr extends gn{constructor(t,e,r,i,a,l){super(),this.startPoint=t,this.radius=e,this.xAxisRotationDegree=r,this.largeArcFlag=i,this.sweepFlag=a,this.endPoint=l,this.xAxisRotation=this.xAxisRotationDegree*Fe,this.radius=new y(Math.abs(e.x),Math.abs(e.y));const c=t.sub(l).div(2).transform(gt.fromRotation(-r).domMatrix),d=c.x*c.x/(e.x*e.x)+c.y*c.y/(e.y*e.y);if(d>1){const B=Math.sqrt(d);e.x=B*e.x,e.y=B*e.y}const v=new y(e.ctg*c.y,e.perpendicular.ctg*c.x).scale(Math.sqrt(1/(c.x*c.x/(e.x*e.x)+c.y*c.y/(e.y*e.y))-1)*(i===a?-1:1));this.xAxisRotationMatrix=gt.fromRotation(r).domMatrix,this.center=v.transform(this.xAxisRotationMatrix).add(t.add(l).div(2));const x=c.sub(v).div(e),z=c.scale(-1).sub(v).div(e);this.startAngle=x.radians,this.deltaAngle=y.angleBetween(x,z)%(Math.PI*2),this.sweepFlag===0&&this.deltaAngle>0&&(this.deltaAngle-=Math.PI*2),this.sweepFlag===1&&this.deltaAngle<0&&(this.deltaAngle+=Math.PI*2),vr.el.setAttribute("d",`M ${this.startPoint.x} ${this.startPoint.y} A ${this.radius.x} ${this.radius.y} ${this.xAxisRotationDegree} ${this.largeArcFlag} ${this.sweepFlag} ${this.endPoint.x} ${this.endPoint.y}`),this.length=vr.el.getTotalLength();const A=new nt(vr.el.getBBox());this.points=[A.topLeft,A.bottomRight]}getAnglePosition(t){return this.radius.mul(y.fromRadians(t)).transform(this.xAxisRotationMatrix).add(this.center)}getAngleDerivative(t){return new y(-this.radius.x*Math.sin(t),this.radius.y*Math.cos(t)).transform(this.xAxisRotationMatrix)}draw(t,e,r,i){const a=this.startAngle+this.deltaAngle*e,l=this.startAngle+this.deltaAngle*r,c=this.getPoint(e),d=this.getPoint(r);return i&&t.moveTo(c.position.x,c.position.y),t.ellipse(this.center.x,this.center.y,this.radius.x,this.radius.y,this.xAxisRotation,a,l,this.sweepFlag===0),[c,d]}getPoint(t){const e=this.startAngle+t*this.deltaAngle,r=this.getAngleDerivative(e).normalized;return{position:t===0?this.startPoint:t===1?this.endPoint:this.getAnglePosition(e),tangent:r,normal:r.perpendicular}}get arcLength(){return this.length}}Nu([Mr(()=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),t=document.createElementNS("http://www.w3.org/2000/svg","path");return n.appendChild(t),ve.shadowRoot.appendChild(n),t})],vr,"el",void 0);function Uu(n,t,e,r,i=!1){const a={arcLength:0,minSin:1,segments:[]};if(e<t){const x=Math.floor((t-e)/(Math.PI*2))+1;e+=Math.PI*2*x}else if(e>t+Math.PI*2){const x=Math.floor((e-t)/(Math.PI*2));e-=Math.PI*2*x}const l=(t+e)/2,c=n.mul(y.fromRadians(t)),d=n.mul(y.fromRadians(e)),v=n.mul(y.fromRadians(l)).scale(i?-1:1);return r&&ri(a,new ze(y.zero,c)),la(a,n,c,v,t,l,i),la(a,n,v,d,l,e,i),r&&ri(a,new ze(d,y.zero)),a}function ri(n,t){n.segments.push(t),n.arcLength+=t.arcLength}function la(n,t,e,r,i,a,l){const c=Math.abs(i-a)<=180?1:0,d=i>a?0:1,v=l?0:1;ri(n,new vr(e,t,0,0,c^v^d,r))}function Gu(n,t,e){const r={arcLength:0,segments:[],minSin:1};if(n.length===0)return r;if(e){const l=n[0].add(n[n.length-1]).scale(.5);n=[l,...n,l]}let i=n[0];for(let l=2;l<n.length;l++){const c=n[l-2],d=n[l-1],v=n[l],x=c.sub(d),z=v.sub(d),A=x.normalized.safe,B=z.normalized.safe,X=Math.acos(Et(-1,1,A.dot(B))),T=Math.tan(X/2),N=Math.sin(X/2),it=Math.min(t,T*x.magnitude*(l===2?1:.5),T*z.magnitude*(l===n.length-1?1:.5)),K=N===0?0:it/N,yt=T===0?0:it/T,ht=A.add(B).scale(1/2).normalized.safe.scale(K).add(d),ut=A.perpendicular.dot(B)<0,_=new ze(i,d.add(A.scale(yt))),xt=new Fa(ht,it,A.perpendicular.scale(ut?1:-1),B.perpendicular.scale(ut?-1:1),ut);_.arcLength>0&&(r.segments.push(_),r.arcLength+=_.arcLength),xt.arcLength>0&&(r.segments.push(xt),r.arcLength+=xt.arcLength),r.minSin=Math.min(r.minSin,Math.abs(N)),i=d.add(B.scale(yt))}const a=new ze(i,n[n.length-1]);return a.arcLength>0&&(r.segments.push(a),r.arcLength+=a.arcLength),r}var Wr=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a};let Ie=class extends Ot{constructor(t){super(t)}profile(){return Uu(this.size().scale(.5),this.startAngle()*Fe,this.endAngle()*Fe,this.closed(),this.counterclockwise())}desiredSize(){return{x:this.width.context.getter(),y:this.height.context.getter()}}offsetComputedLayout(t){return t}childrenBBox(){return nt.fromSizeCentered(this.computedSize())}getPath(){return this.requiresProfile()?this.curveDrawingInfo().path:this.createPath()}getRipplePath(){return this.createPath(this.rippleSize())}getCacheBBox(){return super.getCacheBBox().expand(this.rippleSize())}createPath(t=0){const e=new Path2D,r=this.startAngle()*Fe;let i=this.endAngle()*Fe;const a=this.size().scale(.5).add(t),l=this.closed();if(i>r+Math.PI*2){const c=Math.floor((i-r)/(Math.PI*2));i-=Math.PI*2*c}return l&&e.moveTo(0,0),e.ellipse(0,0,a.x,a.y,0,r,i,this.counterclockwise()),l&&e.closePath(),e}};Wr([O(0),L()],Ie.prototype,"startAngle",void 0);Wr([O(360),L()],Ie.prototype,"endAngle",void 0);Wr([O(!1),L()],Ie.prototype,"counterclockwise",void 0);Wr([U()],Ie.prototype,"profile",null);Ie=Wr([he("Circle")],Ie);function qu(n){return n.reduce((t,e,r)=>r?t+n[r-1].sub(e).magnitude:0,0)}function Vn(n,t,e){const r=n.length;let i=0;for(let a=0;a<t.length;a+=1){const l=n[(e+a)%r],c=t[a];i+=l.sub(c).squaredMagnitude}return i}function Xu(n,t,e){const r=[];if(e===0)return[...n];if(e===1)return[...t];for(let i=0;i<n.length;i++){const a=n[i],l=t[i];r.push(y.lerp(a,l,e))}return r}var er=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a},on;let Mt=on=class extends Ot{static rotatePoints(t,e,r){if(r){let i=1/0,a=0;for(let l=0;l<t.length;l+=1){const c=Vn(t,e,l);c<i&&(i=c,a=l)}if(a){const l=t.splice(0,a);t.splice(t.length,0,...l)}}else{const i=Vn(t,e,0),a=[...t].reverse();Vn(a,e,0)<i&&t.reverse()}}static distributePoints(t,e){if(t.length===0){for(let c=0;c<e;c++)t.push(y.zero);return}if(t.length===1){const c=t[0];for(let d=0;d<e;d++)t.push(c);return}const r=t.length+e,i=qu(t);let a=i===0?0:e/i,l=0;for(;t.length<r;){const c=r-t.length;if(l+1>=t.length){a=i===0?0:c/i,l=0;continue}const d=t[l],v=t[l+1],x=d.sub(v).magnitude;let z=Math.min(Math.round(x*a),c)+1;i===0&&(z=2);for(let A=1;A<z;A++)t.splice(++l,0,y.lerp(d,v,A/z));l++}}*tweenPoints(t,e,r){const i=[...this.parsedPoints()],a=this.parsePoints(ae(t)),l=this.closed(),c=i.length-a.length;on.distributePoints(c<0?i:a,Math.abs(c)),on.rotatePoints(a,i,l),this.tweenedPoints(i),yield*Qt(e,d=>{const v=r(d);this.tweenedPoints(Xu(i,a,v))},()=>{this.tweenedPoints(null),this.points(t)})}constructor(t){super(t),this.tweenedPoints=It(null),t.children===void 0&&t.points===void 0&&zt().warn({message:"No points specified for the line",remarks:`<p>The line won&#39;t be visible unless you specify at least two points:</p>
<pre class=""><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span>
  stroke=<span class="hljs-string">&quot;#fff&quot;</span>
  lineWidth={<span class="hljs-number">8</span>}
  points={[
    [<span class="hljs-number">100</span>, <span class="hljs-number">0</span>],
    [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>],
    [<span class="hljs-number">0</span>, <span class="hljs-number">100</span>],
  ]}
/&gt;</code></pre><p>Alternatively, you can define the points using the children:</p>
<pre class=""><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>}&gt;
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> <span class="hljs-attr">x</span>=<span class="hljs-string">{100}</span> /&gt;</span></span>
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> /&gt;</span></span>
  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Node</span> <span class="hljs-attr">y</span>=<span class="hljs-string">{100}</span> /&gt;</span></span>
&lt;/<span class="hljs-title class_">Line</span>&gt;</code></pre><p>If you did this intentionally, and want to disable this message, set the
<code>points</code> property to <code>null</code>:</p>
<pre class=""><code class="language-tsx">&lt;<span class="hljs-title class_">Line</span> stroke=<span class="hljs-string">&quot;#fff&quot;</span> lineWidth={<span class="hljs-number">8</span>} points={<span class="hljs-literal">null</span>} /&gt;</code></pre>`,inspect:this.key})}childrenBBox(){let t=this.tweenedPoints();if(!t){const e=this.points();t=e?e.map(r=>new y(ae(r))):this.children().filter(r=>!(r instanceof W)||r.isLayoutRoot()).map(r=>r.position())}return nt.fromPoints(...t)}parsedPoints(){return this.parsePoints(this.points())}profile(){return Gu(this.tweenedPoints()??this.parsedPoints(),this.radius(),this.closed())}lineWidthCoefficient(){const t=this.radius(),e=this.lineJoin();let r=super.lineWidthCoefficient();if(t===0&&e==="miter"){const{minSin:i}=this.profile();i>0&&(r=Math.max(r,.5/i))}return r}drawOverlay(t,e){const r=this.childrenBBox().transformCorners(e),a=this.computedSize().mul(this.offset()).scale(.5).transformAsPoint(e);t.fillStyle="white",t.strokeStyle="black",t.lineWidth=1;const l=new Path2D,c=(this.tweenedPoints()??this.parsedPoints()).map(d=>d.transformAsPoint(e));if(c.length>0){Er(l,c[0]);for(const d of c)se(l,d),t.beginPath(),Ra(t,d,4),t.closePath(),t.fill(),t.stroke()}t.strokeStyle="white",t.stroke(l),t.beginPath(),Ca(t,a),t.stroke(),t.beginPath(),Re(t,r),t.closePath(),t.stroke()}parsePoints(t){return t?t.map(e=>new y(ae(e))):this.children().map(e=>e.position())}};er([O(0),L()],Mt.prototype,"radius",void 0);er([O(null),L()],Mt.prototype,"points",void 0);er([bt()],Mt.prototype,"tweenPoints",null);er([U()],Mt.prototype,"childrenBBox",null);er([U()],Mt.prototype,"parsedPoints",null);er([U()],Mt.prototype,"profile",null);Mt=on=er([he("Line")],Mt);var Dr=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a},ln;let Gt=ln=class extends $t{constructor({children:t,...e}){super(e),t&&this.text(t)}parentTxt(){const t=this.parent();return t instanceof F?t:null}draw(t){this.requestFontUpdate(),this.applyStyle(t),this.applyText(t),t.font=this.styles.font,t.textBaseline="bottom","letterSpacing"in t&&(t.letterSpacing=`${this.letterSpacing()}px`);const e=t.measureText("").fontBoundingBoxAscent,r=this.element.getBoundingClientRect(),{width:i,height:a}=this.size(),l=document.createRange();let c="";const d=new nt;for(const v of this.element.childNodes){if(!v.textContent)continue;l.selectNodeContents(v);const x=l.getBoundingClientRect(),z=i/-2+x.left-r.left,A=a/-2+x.top-r.top+e;d.y===A?(d.width+=x.width,c+=v.textContent):(this.drawText(t,c,d),d.x=z,d.y=A,d.width=x.width,d.height=x.height,c=v.textContent)}this.drawText(t,c,d)}drawText(t,e,r){const i=r.y;e=e.replace(/\s+/g," "),this.lineWidth()<=0?t.fillText(e,r.x,i):this.strokeFirst()?(t.strokeText(e,r.x,i),t.fillText(e,r.x,i)):(t.fillText(e,r.x,i),t.strokeText(e,r.x,i))}getCacheBBox(){const t=this.computedSize(),e=document.createRange();e.selectNodeContents(this.element);const r=e.getBoundingClientRect(),i=this.lineWidth(),a=this.lineJoin()==="miter"?.5*10:.5;return new nt(-t.width/2,-t.height/2,r.width,r.height).expand([0,this.fontSize()*.5]).expand(i*a)}applyFlex(){super.applyFlex(),this.element.style.display="inline"}updateLayout(){if(this.applyFont(),this.applyFlex(),this.justifyContent.isInitial()&&(this.element.style.justifyContent=this.styles.getPropertyValue("text-align")),this.styles.whiteSpace!=="nowrap"&&this.styles.whiteSpace!=="pre")if(this.element.innerText="",ln.segmenter)for(const e of ln.segmenter.segment(this.text()))this.element.appendChild(document.createTextNode(e.segment));else for(const e of this.text().split(""))this.element.appendChild(document.createTextNode(e));else if(this.styles.whiteSpace==="pre"){this.element.innerText="";for(const e of this.text().split(`
`))this.element.appendChild(document.createTextNode(e+`
`))}else this.element.innerText=this.text()}};Dr([O(""),fi(va),L()],Gt.prototype,"text",void 0);Dr([U()],Gt.prototype,"parentTxt",null);Dr([Mr(()=>{const n=document.createElement("span");return ve.shadowRoot.append(n),n})],Gt,"formatter",void 0);Dr([Mr(()=>{try{return new Intl.Segmenter(void 0,{granularity:"grapheme"})}catch{return null}})],Gt,"segmenter",void 0);Gt=ln=Dr([he("TxtLeaf")],Gt);["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach(n=>{Gt.prototype[`get${Ze(n)}`]=function(){var t;return((t=this.parentTxt())==null?void 0:t[n]())??this[n].context.getInitial()}});var Br=function(n,t,e,r){var i=arguments.length,a=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(a=(i<3?l(a):i>3?l(t,e,a):l(t,e))||a);return i>3&&a&&Object.defineProperty(t,e,a),a},Ne;let F=Ne=class extends $t{static b(t){return new Ne({...t,fontWeight:700})}static i(t){return new Ne({...t,fontStyle:"italic"})}getText(){return this.innerText()}setText(t){const e=this.children();let r=null;for(let i=0;i<e.length;i++){const a=e[i];r===null&&a instanceof Gt?r=a:a.parent(null)}r===null?(r=new Gt({text:t}),r.parent(this)):r.text(t),this.setParsedChildren([r])}setChildren(t){this.children.context.raw()!==t&&(typeof t=="string"?this.text(t):super.setChildren(t))}*tweenText(t,e,r,i){const a=this.children();(a.length!==1||!(a[0]instanceof Gt))&&this.text.save();const l=this.childAs(0),c=l.text.context.raw(),d=this.size.context.raw();l.text(t);const v=this.size();l.text(c??yr),this.height()===0&&this.height(v.height),yield*Q(this.size(v,e,r),l.text(t,e,r,i)),this.children.context.setter(t),this.size(d)}getLayout(){return!0}constructor({children:t,text:e,...r}){super(r),this.children(e??t)}innerText(){const t=this.childrenAs();let e="";for(const r of t)e+=r.text();return e}parentTxt(){const t=this.parent();return t instanceof Ne?t:null}parseChildren(t){const e=[],r=Array.isArray(t)?t:[t];for(const i of r)i instanceof Ne||i instanceof Gt?e.push(i):typeof i=="string"&&e.push(new Gt({text:i}));return e}applyFlex(){super.applyFlex(),this.element.style.display=this.findAncestor(gi(Ne))?"inline":"block"}draw(t){this.drawChildren(t)}};Br([O(""),L()],F.prototype,"text",void 0);Br([bt()],F.prototype,"tweenText",null);Br([U()],F.prototype,"innerText",null);Br([U()],F.prototype,"parentTxt",null);F=Ne=Br([he("Txt")],F);["fill","stroke","lineWidth","strokeFirst","lineCap","lineJoin","lineDash","lineDashOffset"].forEach(n=>{F.prototype[`getDefault${Ze(n)}`]=function(t){var e;return((e=this.parentTxt())==null?void 0:e[n]())??t}});class Hu extends fu{constructor(t){super(t),this.view=null,this.registeredNodes=new Map,this.nodeCounters=new Map,this.assetHash=Date.now().toString(),this.recreateView()}getView(){return this.view}next(){var t;return(t=this.getView())==null||t.playbackState(this.playback.state).globalTime(this.playback.time),super.next()}draw(t){t.save(),this.renderLifecycle.dispatch([ie.BeforeRender,t]),t.save(),this.renderLifecycle.dispatch([ie.BeginRender,t]),this.getView().playbackState(this.playback.state).globalTime(this.playback.time),this.getView().render(t),this.renderLifecycle.dispatch([ie.FinishRender,t]),t.restore(),this.renderLifecycle.dispatch([ie.AfterRender,t]),t.restore()}reset(t){for(const e of this.registeredNodes.keys())try{this.registeredNodes.get(e).dispose()}catch(r){this.logger.error(r)}return this.registeredNodes.clear(),this.registeredNodes=new Map,this.nodeCounters.clear(),this.recreateView(),super.reset(t)}inspectPosition(t,e){return this.execute(()=>{var r;return((r=this.getView().hit(new y(t,e)))==null?void 0:r.key)??null})}validateInspection(t){var e;return((e=this.getNode(t))==null?void 0:e.key)??null}inspectAttributes(t){const e=this.getNode(t);if(!e)return null;const r={stack:e.creationStack,key:e.key};for(const{key:i,meta:a,signal:l}of e)a.inspectable&&(r[i]=l());return r}drawOverlay(t,e,r){const i=this.getNode(t);i&&this.execute(()=>{const a=this.getView().findAll(gi(te)),l=[];for(const c of a){const d=c.scene();d&&(d===i||d.findFirst(v=>v===i))&&l.push(c)}if(l.length>0)for(const c of l){const d=c.parentToWorld(),v=c.localToParent().inverse(),x=i.localToWorld();i.drawOverlay(r,e.multiply(d).multiply(v).multiply(x))}else i.drawOverlay(r,e.multiply(i.localToWorld()))})}transformMousePosition(t,e){return new y(t,e).transformAsPoint(this.getView().localToParent().inverse())}registerNode(t,e){var l;const r=((l=t.constructor)==null?void 0:l.name)??"unknown",i=(this.nodeCounters.get(r)??0)+1;this.nodeCounters.set(r,i),e&&this.registeredNodes.has(e)&&(zt().error({message:`Duplicated node key: "${e}".`,inspect:e,stack:new Error().stack}),e=void 0),e??(e=`${this.name}/${r}[${i}]`),this.registeredNodes.set(e,t);const a=this.registeredNodes;return[e,()=>a.delete(e)]}getNode(t){return typeof t!="string"?null:this.registeredNodes.get(t)??null}*getDetachedNodes(){for(const t of this.registeredNodes.values())!t.parent()&&t!==this.view&&(yield t)}recreateView(){this.execute(()=>{const t=this.getSize();this.view=new ve({position:t.scale(this.resolutionScale/2),scale:this.resolutionScale,assetHash:this.assetHash,size:t})})}}function wr(n){return{klass:Hu,config:n,stack:new Error().stack,meta:du(),plugins:["@motion-canvas/2d/editor"]}}const Ue=wr(function*(n){const t="#00D1FF",e="#FF4444",r="#0a0a0f",i="#FFFFFF",a="#888888",l="#9945FF";n.fill(r);const c=P();n.add(w(F,{ref:c,text:"Exploring Programmable Privacy",fontSize:58,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,y:-280,opacity:0}));const d=P();n.add(w(F,{ref:d,text:"Native private payments using commitments + nullifiers",fontSize:28,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:t,y:-220,opacity:0}));const v=P();n.add(w(F,{ref:v,text:"Based on ZEXE model  not Token 2022 confidential transfers",fontSize:18,fontFamily:"Inter, system-ui, sans-serif",fontWeight:400,fill:a,y:-175,opacity:0}));const x=P();n.add(w(Z,{ref:x,width:700,height:80,radius:16,fill:"#1a1a2e",stroke:e,lineWidth:2,y:-80,opacity:0,children:[w(F,{text:"Current approach is broken",fontSize:28,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:e,y:-15}),w(F,{text:"Every nullifier = $0.13 rent locked forever",fontSize:18,fontFamily:"Inter, system-ui, sans-serif",fontWeight:400,fill:a,y:18})]}));const z=It(0),A=P();n.add(w(F,{ref:A,text:()=>`${Math.floor(z())} transactions`,fontSize:42,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:a,y:30,opacity:0}));const B=It(0),X=P(),T=P();n.add(w(F,{ref:X,text:"Rent Locked (Other Protocols)",fontSize:24,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:a,y:100,opacity:0})),n.add(w(F,{ref:T,text:()=>`$${B().toFixed(2)}`,fontSize:72,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:e,y:170,opacity:0}));const N=P();n.add(w(Z,{ref:N,width:500,height:90,radius:20,fill:"#0a1a2a",stroke:t,lineWidth:3,y:290,opacity:0,children:w(F,{text:"ZORB: Amortizable Rent  $0",fontSize:32,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t})}));const it=P();n.add(w(F,{ref:it,text:"This problem space is unexplored on Solana",fontSize:20,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:l,y:360,opacity:0})),yield*c().opacity(1,.6),yield*G(.3),yield*d().opacity(1,.5),yield*G(.3),yield*v().opacity(1,.4),yield*G(1),yield*x().opacity(1,.5),yield*x().scale(1.02,.15).to(1,.15),yield*G(1.5),yield*Q(A().opacity(1,.3),X().opacity(1,.3),T().opacity(1,.3)),yield*Q(z(1e3,4),B(130,4)),yield*G(.5),yield*Q(N().opacity(1,.6),N().scale(1.05,.3).to(1,.2)),yield*G(.5),yield*Q(T().fill("#FF6666",.3),N().stroke("#00FFFF",.3)),yield*G(.5),yield*it().opacity(1,.4),yield*G(2)});Ue.name="hook";Pu.attach(Ue.meta);Ue.onReplaced??(Ue.onReplaced=new Nt(Ue.config));let yi;yi??(yi=new oe("problem",!1));yi.loadData({version:0,timeEvents:[],seed:3145985724});const Yu=yi,Ge=wr(function*(n){const t="#FF4444",e="#FF8844",r="#0a0a0f",i="#FFFFFF",a="#888888",l="#9945FF";n.fill(r);const c=P();n.add(w(F,{ref:c,text:"The Nullifier Rent Problem",fontSize:52,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,y:-330,opacity:0}));const d=P();n.add(w(F,{ref:d,text:"ZEXE: Private execution requires commitments and nullifiers",fontSize:20,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:l,y:-280,opacity:0}));const v=P();n.add(w(E,{ref:v,y:-120}));const x=P();v().add(w(Z,{ref:x,width:180,height:70,radius:12,fill:l,opacity:0,x:-380,children:w(F,{text:"Private TX",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:i})}));const z=P();v().add(w(Mt,{ref:z,points:[[-270,0],[-160,0]],stroke:a,lineWidth:3,endArrow:!0,opacity:0}));const A=P();v().add(w(Z,{ref:A,width:160,height:70,radius:12,fill:"#333355",opacity:0,x:-60,children:w(F,{text:"Nullifier",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:i})}));const B=P();v().add(w(Mt,{ref:B,points:[[30,0],[140,0]],stroke:a,lineWidth:3,endArrow:!0,opacity:0}));const X=P();v().add(w(Z,{ref:X,width:160,height:70,radius:12,fill:e,opacity:0,x:240,children:w(F,{text:"PDA",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:i})}));const T=P();v().add(w(Z,{ref:T,width:220,height:50,radius:25,fill:"#1a1a2e",stroke:t,lineWidth:2,opacity:0,x:240,y:60,children:[w(F,{text:"2-year rent-exempt",fontSize:14,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:a,y:-10}),w(F,{text:"~$0.13 locked",fontSize:18,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:12})]}));const N=P();n.add(w(E,{ref:N,y:60}));const it=[];for(let Rt=0;Rt<8;Rt++){const qt=P();N().add(w(Z,{ref:qt,width:70,height:45,radius:8,fill:e,opacity:0,x:-280+Rt*85,y:0,children:w(F,{text:`PDA ${Rt+1}`,fontSize:13,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:i})})),it.push(qt())}const K=It(0),yt=P();n.add(w(F,{ref:yt,text:()=>`Total Rent Locked: $${K().toFixed(2)}`,fontSize:36,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:140,opacity:0}));const ht=P();n.add(w(E,{ref:ht,y:220,opacity:0}));const ut=P();ht().add(w(Z,{ref:ut,width:260,height:70,radius:12,fill:"#1a1a1a",stroke:a,lineWidth:1,x:-200,children:[w(F,{text:"10,000 tx",fontSize:18,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:a,y:-15}),w(F,{text:"= $1,300",fontSize:26,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:15})]}));const _=P();ht().add(w(Z,{ref:_,width:260,height:70,radius:12,fill:"#1a1a1a",stroke:a,lineWidth:1,x:100,children:[w(F,{text:"1 million tx",fontSize:18,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:a,y:-15}),w(F,{text:"= $130,000",fontSize:26,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:15})]}));const xt=P();n.add(w(F,{ref:xt,text:"This doesn't scale.",fontSize:40,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,y:320,opacity:0}));const ct=P();n.add(w(F,{ref:ct,text:"locked FOREVER",fontSize:24,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:t,y:355,opacity:0})),yield*c().opacity(1,.5),yield*G(.3),yield*d().opacity(1,.4),yield*G(.8),yield*x().opacity(1,.3),yield*z().opacity(1,.2),yield*A().opacity(1,.3),yield*B().opacity(1,.2),yield*Q(X().opacity(1,.3),T().opacity(1,.4)),yield*G(.8),yield*yt().opacity(1,.3);for(let Rt=0;Rt<8;Rt++)yield*Q(it[Rt].opacity(1,.12),it[Rt].y(-15,.1).to(0,.08),K(K()+.13,.15));yield*G(.5),yield*ht().opacity(1,.4),yield*ut().scale(1.05,.2).to(1,.15),yield*G(.5),yield*_().scale(1.05,.2).to(1,.15),yield*G(1),yield*Q(xt().opacity(1,.5),xt().scale(1.1,.25).to(1,.2)),yield*G(.5),yield*ct().opacity(1,.4),yield*Q(yt().scale(1.08,.2).to(1,.2),xt().fill(t,.4)),yield*G(2)});Ge.name="problem";Yu.attach(Ge.meta);Ge.onReplaced??(Ge.onReplaced=new Nt(Ge.config));let vi;vi??(vi=new oe("solution",!1));vi.loadData({version:0,timeEvents:[],seed:1305355742});const Zu=vi,qe=wr(function*(n){const t="#00D1FF",e="#44FF88",r="#FF8844",i="#44FF88",a="#4488FF",l="#0a0a0f",c="#FFFFFF",d="#888888",v="#9945FF",x="#22FF88";n.fill(l);const z=P();n.add(w(F,{ref:z,text:"Concurrent Nullifier Tree Scheme",fontSize:48,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:-340,opacity:0}));const A=P();n.add(w(F,{ref:A,text:"Aztec-style Indexed Merkle Tree + Reclaimable PDAs",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:-295,opacity:0}));const B=P();n.add(w(E,{ref:B,y:-220,opacity:0}));const X=P(),T=It(42);B().add(w(Z,{ref:X,width:240,height:70,radius:12,fill:"#1a2a3a",stroke:v,lineWidth:2,x:-180,children:[w(F,{text:"Earliest Provable",fontSize:14,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:-18}),w(F,{text:()=>`Epoch: ${Math.floor(T())}`,fontSize:24,fontFamily:"monospace",fontWeight:700,fill:v,y:12})]}));const N=P(),it=It(42);B().add(w(Z,{ref:N,width:240,height:70,radius:12,fill:"#1a2a3a",stroke:t,lineWidth:2,x:180,children:[w(F,{text:"Current Nullifier",fontSize:14,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:-18}),w(F,{text:()=>`Epoch: ${Math.floor(it())}`,fontSize:24,fontFamily:"monospace",fontWeight:700,fill:t,y:12})]}));const K=P();B().add(w(Mt,{ref:K,points:[[-40,0],[40,0]],stroke:d,lineWidth:2,endArrow:!0,opacity:0}));const yt=P();B().add(w(F,{ref:yt,text:()=>`Gap: ${Math.floor(it())-Math.floor(T())} epochs`,fontSize:14,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:50,opacity:0}));const ht=P();n.add(w(E,{ref:ht,y:20}));const ut=P();ht().add(w(E,{ref:ut,x:-420,y:-60,opacity:0}));const _=P();ut().add(w(F,{ref:_,text:"Layer 1: Immediate",fontSize:26,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:r,y:-100}));const xt=P();ut().add(w(F,{ref:xt,text:"PDA created on spend",fontSize:16,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:-75}));const ct=P();ut().add(w(Z,{ref:ct,width:130,height:45,radius:10,fill:"#333355",y:-30,opacity:0,children:w(F,{text:"User Spends",fontSize:15,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:c})}));const Rt=P();ut().add(w(Mt,{ref:Rt,points:[[0,0],[0,30]],stroke:r,lineWidth:3,endArrow:!0,opacity:0}));const qt=[],_e=[],ee=[44,45,46,47];for(let vt=0;vt<4;vt++){const ue=P(),Xr=P();ut().add(w(Z,{ref:ue,width:75,height:42,radius:8,fill:r,x:-55+vt%2*110,y:65+Math.floor(vt/2)*55,opacity:0,children:w(F,{text:`E${ee[vt]}`,fontSize:14,fontFamily:"monospace",fontWeight:600,fill:c})})),ut().add(w(F,{ref:Xr,text:"$0.13",fontSize:11,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:"#FF6666",x:-55+vt%2*110,y:98+Math.floor(vt/2)*55,opacity:0})),qt.push(ue()),_e.push(Xr())}const Dt=P();ht().add(w(E,{ref:Dt,x:0,y:-60,opacity:0}));const rr=P();Dt().add(w(F,{ref:rr,text:"Layer 2: Background",fontSize:26,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:a,y:-100}));const nr=P();Dt().add(w(F,{ref:nr,text:"ZK batch insertion",fontSize:16,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:-75}));const xe=P();Dt().add(w(Z,{ref:xe,width:130,height:45,radius:10,fill:"#224466",y:-30,opacity:0,children:w(F,{text:"Sequencer",fontSize:15,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:c})}));const wt=P();Dt().add(w(Z,{ref:wt,width:150,height:55,radius:12,fill:"#1a2a3a",stroke:t,lineWidth:2,y:40,opacity:0,children:[w(F,{text:"ZK Proof",fontSize:16,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:-10}),w(F,{text:"(4/16/64 batch)",fontSize:11,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:10})]}));const Xt=P();Dt().add(w(Z,{ref:Xt,width:170,height:90,radius:12,fill:"#1a2a1a",stroke:e,lineWidth:2,y:130,opacity:0,children:[w(F,{text:"Indexed Merkle Tree",fontSize:13,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:e,y:-25}),w(F,{text:"67M capacity",fontSize:11,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:-5}),w(F,{text:"~1KB account",fontSize:11,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:d,y:12})]}));const jr=P();Dt().add(w(Mt,{ref:jr,points:[[0,72],[0,82]],stroke:e,lineWidth:3,endArrow:!0,opacity:0}));const ce=P();ht().add(w(E,{ref:ce,x:420,y:-60,opacity:0}));const yn=P();ce().add(w(F,{ref:yn,text:"The Payoff",fontSize:26,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,y:-100}));const vn=P();ce().add(w(F,{ref:vn,text:"epoch < earliest  closable",fontSize:16,fontFamily:"monospace",fontWeight:500,fill:d,y:-75}));const Nr=P();ce().add(w(Z,{ref:Nr,width:200,height:45,radius:10,fill:"#1a3a2a",stroke:x,lineWidth:2,y:-30,opacity:0,children:w(F,{text:"44 < 45  Closable",fontSize:14,fontFamily:"monospace",fontWeight:600,fill:x})}));const ir=[];for(let vt=0;vt<4;vt++){const ue=P();ce().add(w(Z,{ref:ue,width:75,height:42,radius:8,fill:"#333333",stroke:i,lineWidth:2,lineDash:[5,5],x:-55+vt%2*110,y:50+Math.floor(vt/2)*55,opacity:0,children:w(F,{text:"CLOSED",fontSize:11,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i})})),ir.push(ue())}const Ur=It(0),Gr=P();ce().add(w(F,{ref:Gr,text:()=>`+$${Ur().toFixed(2)} returned`,fontSize:26,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,y:180,opacity:0}));const We=P();n.add(w(E,{ref:We,y:250,opacity:0}));const mn=P();We().add(w(F,{ref:mn,text:"eprint.iacr.org/2021/1263.pdf",fontSize:14,fontFamily:"monospace",fontWeight:500,fill:d,y:0}));const qr=P();We().add(w(F,{ref:qr,text:"docs.aztec.network/.../indexed_merkle_tree",fontSize:14,fontFamily:"monospace",fontWeight:500,fill:d,y:20}));const xr=P();n.add(w(Z,{ref:xr,width:620,height:65,radius:32,fill:null,stroke:t,lineWidth:3,y:320,opacity:0,children:w(F,{text:"Amortizable Rent  Tending to Zero",fontSize:24,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t})})),yield*Q(z().opacity(1,.6),A().opacity(1,.6)),yield*G(1),yield*B().opacity(1,.5),yield*G(.5),yield*K().opacity(1,.3),yield*Q(it(47,2),yt().opacity(1,.5)),yield*G(.5),yield*ut().opacity(1,.4),yield*ct().opacity(1,.3),yield*Rt().opacity(1,.2),yield*Lr(.2,...qt.map((vt,ue)=>Q(vt.opacity(1,.2),vt.y(vt.y()-10,.1).to(vt.y(),.1),_e[ue].opacity(1,.2)))),yield*G(.8),yield*Dt().opacity(1,.4),yield*xe().opacity(1,.3),yield*wt().opacity(1,.3),yield*Q(jr().opacity(1,.2),Xt().opacity(1,.4)),yield*wt().fill("#2a4a5a",.2).to("#1a2a3a",.2),yield*Q(T(45,1.5),yt().opacity(1,.3)),yield*G(.8),yield*ce().opacity(1,.4),yield*Nr().opacity(1,.4),yield*Lr(.25,...ir.map(vt=>Q(vt.opacity(1,.2),vt.scale(1.1,.1).to(1,.1)))),yield*Gr().opacity(1,.3),yield*Ur(.52,1.8,br),yield*G(.8),yield*We().opacity(.7,.5),yield*G(2),yield*We().opacity(0,.5),yield*G(.5),yield*Q(xr().opacity(1,.6),xr().scale(1.05,.25).to(1,.25)),yield*G(3)});qe.name="solution";Zu.attach(qe.meta);qe.onReplaced??(qe.onReplaced=new Nt(qe.config));let mi;mi??(mi=new oe("costComparison",!1));mi.loadData({version:0,timeEvents:[],seed:3495030387});const Vu=mi,Xe=wr(function*(n){const t="#00D1FF",e="#FF4444",r="#0a0a0f",i="#FFFFFF",a="#888888";n.fill(r);const l=P();n.add(w(F,{ref:l,text:"Cost After 1,000 Private Transactions",fontSize:52,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,y:-300,opacity:0}));const c=P();n.add(w(E,{ref:c,y:50}));const d=P();c().add(w(Mt,{ref:d,points:[[-350,200],[-350,-200]],stroke:a,lineWidth:2,opacity:0}));const v=["$0","$50","$100","$150"],x=[];for(let _=0;_<4;_++){const xt=P();c().add(w(F,{ref:xt,text:v[_],fontSize:20,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:a,x:-400,y:200-_*133,opacity:0})),x.push(xt())}const z=It(0),A=P();c().add(w(Z,{ref:A,width:180,height:()=>z(),fill:e,x:-150,y:()=>200-z()/2,radius:[12,12,0,0],opacity:0}));const B=P();c().add(w(F,{ref:B,text:"Other Protocols",fontSize:24,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:i,x:-150,y:250,opacity:0}));const X=It(0),T=P();c().add(w(F,{ref:T,text:()=>`$${X().toFixed(0)}`,fontSize:36,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,x:-150,y:()=>200-z()-30,opacity:0}));const N=It(4),it=P();c().add(w(Z,{ref:it,width:180,height:()=>N(),fill:t,x:150,y:()=>200-N()/2,radius:[12,12,0,0],opacity:0}));const K=P();c().add(w(F,{ref:K,text:"ZORB",fontSize:24,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:i,x:150,y:250,opacity:0}));const yt=P();c().add(w(F,{ref:yt,text:"$0",fontSize:36,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,x:150,y:160,opacity:0}));const ht=P();c().add(w(F,{ref:ht,text:"Locked Forever",fontSize:20,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:e,x:-150,y:290,opacity:0}));const ut=P();n.add(w(Z,{ref:ut,width:350,height:80,radius:16,fill:null,stroke:t,lineWidth:3,x:300,y:-150,opacity:0,children:w(F,{text:"100% Savings",fontSize:32,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t})})),yield*l().opacity(1,.5),yield*G(.3),yield*Q(d().opacity(1,.3),...x.map(_=>_.opacity(1,.3))),yield*Q(B().opacity(1,.3),K().opacity(1,.3)),yield*Q(A().opacity(1,.2),it().opacity(1,.2),T().opacity(1,.2),yt().opacity(1,.2)),yield*G(.3),yield*Q(z(346,3,br),X(130,3,br)),yield*G(.3),yield*Q(ht().opacity(1,.3),A().fill("#FF6666",.3).to(e,.3)),yield*G(.3),yield*Q(ut().opacity(1,.5),ut().scale(1.1,.2).to(1,.2),it().fill("#00FFFF",.3).to(t,.3)),yield*G(2)});Xe.name="costComparison";Vu.attach(Xe.meta);Xe.onReplaced??(Xe.onReplaced=new Nt(Xe.config));let bi;bi??(bi=new oe("techHighlights",!1));bi.loadData({version:0,timeEvents:[],seed:1808578926});const Ju=bi,He=wr(function*(n){const t="#00D1FF",e="#9945FF",r="#44FF88",i="#FF8844",a="#0a0a0f",l="#FFFFFF",c="#888888",d="#FF4444";n.fill(a);const v=P();n.add(w(F,{ref:v,text:"Technical Innovations",fontSize:52,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:-330,opacity:0}));const x=P();n.add(w(E,{ref:x,x:-400,y:-140,opacity:0}));const z=P();x().add(w(F,{ref:z,text:"Zero Rent Costs",fontSize:28,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:r,y:-80}));const A=P();x().add(w(Z,{ref:A,width:150,height:55,radius:10,fill:"#2a1a1a",stroke:d,lineWidth:2,x:-60,y:-20,opacity:0,children:[w(F,{text:"PDAs",fontSize:14,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:d,y:-12}),w(F,{text:"$0.13 each",fontSize:12,fontFamily:"monospace",fontWeight:500,fill:c,y:8})]}));const B=P();x().add(w(F,{ref:B,text:"vs",fontSize:20,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:c,x:20,y:-20,opacity:0}));const X=P();x().add(w(Z,{ref:X,width:150,height:55,radius:10,fill:"#1a2a1a",stroke:r,lineWidth:2,x:100,y:-20,opacity:0,children:[w(F,{text:"Merkle Tree",fontSize:14,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:r,y:-12}),w(F,{text:"~$0.00",fontSize:12,fontFamily:"monospace",fontWeight:500,fill:r,y:8})]}));const T=P();x().add(w(F,{ref:T,text:"67M nullifiers  $0",fontSize:18,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:r,y:50,opacity:0}));const N=P();n.add(w(E,{ref:N,x:200,y:-140,opacity:0}));const it=P();N().add(w(F,{ref:it,text:"Batch Proofs",fontSize:28,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:e,y:-80}));const K=["4","16","64"],yt=[];for(let wt=0;wt<3;wt++){const Xt=P();N().add(w(Z,{ref:Xt,width:80,height:50,radius:10,fill:"#1a1a3a",stroke:e,lineWidth:2,x:-80+wt*90,y:-20,opacity:0,children:w(F,{text:K[wt],fontSize:22,fontFamily:"monospace",fontWeight:700,fill:e})})),yt.push(Xt())}const ht=P();N().add(w(Mt,{ref:ht,points:[[0,20],[0,50]],stroke:e,lineWidth:3,endArrow:!0,opacity:0}));const ut=P();N().add(w(Z,{ref:ut,width:120,height:50,radius:10,fill:e,y:80,opacity:0,children:w(F,{text:"1 ZK Proof",fontSize:16,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:l})}));const _=P();n.add(w(E,{ref:_,y:120,opacity:0}));const xt=P();_().add(w(F,{ref:xt,text:"Yield While Shielded",fontSize:28,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:i,y:-60}));const ct=["vSOL","jitoSOL","mSOL"],Rt=[];for(let wt=0;wt<3;wt++){const Xt=P();_().add(w(Z,{ref:Xt,width:100,height:45,radius:10,fill:"#1a2a2a",stroke:i,lineWidth:2,x:-120+wt*120,y:0,opacity:0,children:w(F,{text:ct[wt],fontSize:16,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:i})})),Rt.push(Xt())}const qt=P();_().add(w(Mt,{ref:qt,points:[[0,30],[0,60]],stroke:i,lineWidth:3,endArrow:!0,opacity:0}));const _e=P();_().add(w(Z,{ref:_e,width:320,height:55,radius:12,fill:null,stroke:r,lineWidth:2,y:95,opacity:0,children:w(F,{text:"Unified Pool  7-8% APY",fontSize:20,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:r})}));const ee=P();n.add(w(E,{ref:ee,y:280,opacity:0}));const Dt=P();ee().add(w(F,{ref:Dt,text:"Other projects:",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:c,x:-180}));const rr=P();ee().add(w(F,{ref:rr,text:"// TODO",fontSize:24,fontFamily:"monospace",fontWeight:600,fill:d,x:-30}));const nr=P();ee().add(w(F,{ref:nr,text:"ZORB:",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:500,fill:c,x:80}));const xe=P();ee().add(w(F,{ref:xe,text:"Working ",fontSize:24,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:r,x:180})),yield*v().opacity(1,.5),yield*G(.5),yield*x().opacity(1,.4),yield*Q(A().opacity(1,.3),B().opacity(1,.2),X().opacity(1,.3)),yield*X().scale(1.1,.2).to(1,.15),yield*T().opacity(1,.3),yield*G(1),yield*N().opacity(1,.4),yield*Lr(.15,...yt.map(wt=>Q(wt.opacity(1,.2),wt.fill("#2a2a4a",.1).to("#1a1a3a",.1)))),yield*ht().opacity(1,.2),yield*Q(ut().opacity(1,.3),ut().scale(1.15,.2).to(1,.15)),yield*G(1),yield*_().opacity(1,.4),yield*Lr(.12,...Rt.map(wt=>wt.opacity(1,.2))),yield*qt().opacity(1,.2),yield*_e().opacity(1,.3),yield*G(1),yield*ee().opacity(1,.4),yield*Q(Dt().opacity(1,.3),rr().opacity(1,.3)),yield*G(.3),yield*Q(nr().opacity(1,.3),xe().opacity(1,.4),xe().scale(1.1,.2).to(1,.15)),yield*G(2)});He.name="techHighlights";Ju.attach(He.meta);He.onReplaced??(He.onReplaced=new Nt(He.config));let wi;wi??(wi=new oe("cta",!1));wi.loadData({version:0,timeEvents:[],seed:3835962278});const Qu=wi,Ye=wr(function*(n){const t="#00D1FF",e="#0a0a0f",r="#FFFFFF",i="#888888",a="#9945FF";n.fill(e);const l=P();n.add(w(E,{ref:l,y:-200,opacity:0}));const c=P();l().add(w(F,{ref:c,text:"ZORB",fontSize:120,fontFamily:"Inter, system-ui, sans-serif",fontWeight:900,fill:t,letterSpacing:8}));const d=P();l().add(w(Ie,{ref:d,width:280,height:280,stroke:t,lineWidth:2,opacity:.3}));const v=P();l().add(w(Ie,{ref:v,width:12,height:12,fill:t,x:140,y:0,opacity:0}));const x=P();n.add(w(Z,{ref:x,width:450,height:55,radius:27,fill:"#1a1a2e",stroke:a,lineWidth:2,y:-60,opacity:0,children:w(F,{text:"ZK team with Polygon experience",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:r})}));const z=P();n.add(w(Z,{ref:z,width:520,height:55,radius:27,fill:"#0a1a2a",stroke:t,lineWidth:2,y:20,opacity:0,children:w(F,{text:"Programmable privacy on Solana  Q2 2026",fontSize:22,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:t})}));const A=P();n.add(w(Z,{ref:A,width:400,height:45,radius:22,fill:"#1a1a1a",stroke:i,lineWidth:1,y:100,opacity:0,children:w(F,{text:"github.com/zorb-protocol/zorb",fontSize:18,fontFamily:"monospace",fontWeight:500,fill:i})}));const B=P();n.add(w(E,{ref:B,y:220,opacity:0}));const X=P();B().add(w(F,{ref:X,text:"Privacy should be free.",fontSize:36,fontFamily:"Inter, system-ui, sans-serif",fontWeight:600,fill:r,y:-25}));const T=P();B().add(w(F,{ref:T,text:"ZORB makes it possible.",fontSize:40,fontFamily:"Inter, system-ui, sans-serif",fontWeight:700,fill:t,y:25}));const N=P();n.add(w(Mt,{ref:N,points:[[-200,0],[200,0]],stroke:t,lineWidth:3,y:320,opacity:0})),yield*l().opacity(1,.5),yield*Q(c().scale(1.1,.3).to(1,.2),v().opacity(1,.3)),yield*v().x(-140,.8),yield*Q(x().opacity(1,.4),x().y(-60,.3,br)),yield*G(.3),yield*Q(z().opacity(1,.4),z().y(20,.3,br)),yield*G(.3),yield*A().opacity(1,.3),yield*G(.3),yield*B().opacity(1,.5),yield*Q(X().opacity(1,.3),T().opacity(1,.4),T().scale(1.08,.25).to(1,.2)),yield*N().opacity(1,.3),yield*v().x(140,1),yield*G(1)});Ye.name="cta";Qu.attach(Ye.meta);Ye.onReplaced??(Ye.onReplaced=new Nt(Ye.config));const Ku={scenes:[Ue,Ge,qe,Xe,He,Ye]};let xi;xi??(xi=new oe("\0virtual:settings",!1));xi.loadData({version:1,appearance:{color:"rgb(51,166,255)",font:!1,coordinates:!0},defaults:{background:null,size:{x:1920,y:1080}}});const tf=xi,ff=qc("project",{core:"3.17.2",two:"3.17.2",ui:"3.17.2",vitePlugin:"3.17.2"},[],Ku,Tu,tf);export{ff as default};
