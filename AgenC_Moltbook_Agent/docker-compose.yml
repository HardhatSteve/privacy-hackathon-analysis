version: '3.8'

services:
  agenc:
    build: .
    container_name: agenc-moltbook
    restart: unless-stopped
    environment:
      - XAI_API_KEY=${XAI_API_KEY}
      - MOLTBOOK_API_KEY=${MOLTBOOK_API_KEY}
      - TWITTER_BEARER_TOKEN=${TWITTER_BEARER_TOKEN:-}
      - BAGS_API_KEY=${BAGS_API_KEY:-}
      - SOLANA_RPC_URL=${SOLANA_RPC_URL:-}
    volumes:
      - agenc-data:/home/agenc/.config/agenc-moltbook
    command: ["run", "--interval", "4"]
    read_only: true
    tmpfs:
      - /tmp
    security_opt:
      - no-new-privileges:true

volumes:
  agenc-data:
